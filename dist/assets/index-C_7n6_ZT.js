const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/submitQueue-G1WRLlPK.js","assets/vendor-5D-o_3O6.js","assets/form-W2PSSBRM.js"])))=>i.map(i=>d[i]);
import{a as e,b as t,g as n,L as s,r,R as i,u as o,c as a,d as c,e as l,B as h}from"./vendor-5D-o_3O6.js";import{P as d,a as u}from"./form-W2PSSBRM.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const p={},m=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=e?.nonce||e?.getAttribute("nonce");r=t.map(e=>{if((e=function(e){return"/"+e}(e))in p)return;p[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,n&&r.setAttribute("nonce",n),document.head.appendChild(r),t?new Promise((t,n)=>{r.addEventListener("load",t),r.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}),s=Promise.all(r.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))}var r;function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})};var f,g,b={exports:{}},w={};var y,v=(g||(g=1,b.exports=function(){if(f)return w;f=1;var t=e(),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(e,t,s){var a,c={},l=null,h=null;for(a in void 0!==s&&(l=""+s),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(h=t.ref),t)r.call(t,a)&&!o.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===c[a]&&(c[a]=t[a]);return{$$typeof:n,type:e,key:l,ref:h,props:c,_owner:i.current}}return w.Fragment=s,w.jsx=a,w.jsxs=a,w}()),b.exports),x={};const k=n(function(){if(y)return x;y=1;var e=t();return x.createRoot=e.createRoot,x.hydrateRoot=e.hydrateRoot,x}()),_=()=>v.jsx("div",{className:"form-hero flex flex-col justify-center items-center px-4",children:v.jsxs("div",{className:"form-panel max-w-4xl w-full rounded-lg p-8 text-center fade-in",children:[v.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 font-inter",children:"Somatic Client Form"}),v.jsx("p",{className:"text-lg sm:text-xl mb-6 italic",children:"Please complete the following steps to book your free consultation call."}),v.jsx("p",{className:"text-sm mb-8",children:"Trusted by 500+ clients for transformative sessions."}),v.jsx(s,{to:"/form",children:v.jsx("button",{className:"primary-btn text-lg mt-8",children:"Book your free call now"})})]})}),N=({currentStep:e})=>v.jsxs("div",{className:"flex justify-between mb-12 relative",children:[v.jsx("div",{className:"absolute top-5 left-0 right-0 h-0.5 bg-gray-200"}),v.jsx("div",{className:"absolute top-5 left-0 h-0.5 bg-blue-500 transition-all duration-500 ease-in-out",style:{width:(e-1)/3*100+"%"}}),[1,2,3,4].map(t=>v.jsxs("div",{className:"flex-1 text-center relative z-10",children:[v.jsx("div",{className:`w-12 h-12 mx-auto rounded-full text-lg flex items-center justify-center transition-all duration-300 transform\n              ${t<e?"bg-blue-600 text-white scale-110 shadow-lg":t===e?"bg-blue-400 text-white scale-110 shadow-lg ring-4 ring-blue-100":"bg-gray-300 text-gray-600"}\n              ${t<=e?"hover:scale-125":"hover:scale-105"}\n            `,children:t<e?"✔":t}),v.jsxs("p",{className:"text-sm mt-3 font-inter transition-colors duration-300 \n            "+(t<=e?"text-blue-800 font-semibold":"text-gray-500"),children:["Step ",t]}),t===e&&v.jsx("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-blue-400 rounded-full animate-bounce"})]},t))]}),j=/^(?!.*\.{2})[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,S=/^\+?[1-9]\d{1,14}$/,A=["tempmail.com","throwawaymail.com"],E=e=>{if(!e)return"Phone number is required";const t=e.replace(/\D/g,"");if(t.length<8)return"Phone number must have at least 8 digits";if(t.length>15)return"Phone number must have at most 15 digits";if(!S.test(t))return t.startsWith("0")?"Phone number should not start with 0":"Please enter a valid phone number";return/(.)\1{4,}/.test(t)?"Please enter a genuine phone number":""},T=(e,t,n={})=>{const{minLength:s=0,maxLength:r=255,pattern:i=null,customValidation:o=null}=n;if(!e||"string"==typeof e&&!e.trim())return`${t} is required`;const a=String(e).trim();if(s&&a.length<s)return`${t} must be at least ${s} characters`;if(r&&a.length>r)return`${t} must be no more than ${r} characters`;if(i&&!i.test(a))return`${t} contains invalid characters`;if("function"==typeof o){const e=o(a);if(e)return e}return""},C=(e,t)=>{switch(e){case"email":return(e=>{if(!e)return"Email is required";if(e.length>254)return"Email address is too long";if(!j.test(e))return e.includes("@")?e.includes(".")?"Please enter a valid email address":"Email address must contain a domain":"Email address must contain an @ symbol";const[t,n]=e.split("@");return t.length>64?"The part before @ is too long":n.length>255?"The domain name is too long":A.includes(n.toLowerCase())?"Please use a non-disposable email address":""})(t);case"phone":return E(t);case"firstName":case"lastName":return T(t,"firstName"===e?"First name":"Last name");default:return""}},R=()=>v.jsx("div",{className:"inline-block",style:{animation:"spin 1s linear infinite"},children:v.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[v.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),v.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})}),O=({formData:e,updateFormData:t})=>{const[n,s]=r.useState({firstName:e?.personalInfo?.firstName||"",lastName:e?.personalInfo?.lastName||"",email:e?.personalInfo?.email||""}),[i,o]=r.useState({}),[a,c]=r.useState({}),[l,h]=r.useState(!1);r.useEffect(()=>{e?.personalInfo&&s(e.personalInfo)},[e]);const d=async e=>{const{name:n,value:r}=e.target;s(e=>({...e,[n]:r})),h(!0),setTimeout(()=>{o(e=>({...e,[n]:C(n,r)})),h(!1)},300),t(1,{[n]:r})},u=e=>{const{name:t}=e.target;c(e=>({...e,[t]:!0})),o(e=>({...e,[t]:C(t,n[t])}))};return v.jsxs("div",{className:"space-y-6 fade-in",children:[v.jsx("h2",{className:"text-2xl font-bold mb-6 text-white/90",children:"Personal Information"}),v.jsxs("div",{className:"relative transform transition-all duration-300 hover:scale-[1.02]",children:[v.jsx("input",{type:"text",name:"firstName",value:n.firstName,onChange:d,onBlur:u,placeholder:"First name",className:`w-full p-4 bg-white/5 border ${a.firstName&&i.firstName?"border-red-400":"border-white/10"} rounded-lg focus:ring-2 focus:ring-[rgba(72,148,137,0.2)] focus:border-[rgba(72,148,137,1)] transition-all duration-300 text-white/90 placeholder-white/50`}),v.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center space-x-2",children:[l&&v.jsx(R,{}),a.firstName&&i.firstName?v.jsx("span",{className:"text-red-400 text-sm bg-[rgb(18,24,31)]/80 px-2",children:i.firstName}):v.jsx("span",{className:"text-white/40 text-sm bg-[rgb(18,24,31)]/80 px-2 transition-opacity duration-300 opacity-60 hover:opacity-100",children:"First name"})]})]}),v.jsxs("div",{className:"relative transform transition-all duration-300 hover:scale-[1.02]",children:[v.jsx("input",{type:"text",name:"lastName",value:n.lastName,onChange:d,onBlur:u,placeholder:"Last name",className:`w-full p-4 bg-white/5 border ${a.lastName&&i.lastName?"border-red-400":"border-white/10"} rounded-lg focus:ring-2 focus:ring-[rgba(72,148,137,0.2)] focus:border-[rgba(72,148,137,1)] transition-all duration-300 text-white/90 placeholder-white/50`}),v.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center space-x-2",children:[l&&v.jsx(R,{}),a.lastName&&i.lastName?v.jsx("span",{className:"text-red-400 text-sm bg-[rgb(18,24,31)]/80 px-2",children:i.lastName}):v.jsx("span",{className:"text-white/40 text-sm bg-[rgb(18,24,31)]/80 px-2 transition-opacity duration-300 opacity-60 hover:opacity-100",children:"Last name"})]})]}),v.jsxs("div",{className:"relative transform transition-all duration-300 hover:scale-[1.02]",children:[v.jsx("input",{type:"email",name:"email",value:n.email,onChange:d,onBlur:u,placeholder:"Email address",className:`w-full p-4 bg-white/5 border ${a.email&&i.email?"border-red-400":"border-white/10"} rounded-lg focus:ring-2 focus:ring-[rgba(72,148,137,0.2)] focus:border-[rgba(72,148,137,1)] transition-all duration-300 text-white/90 placeholder-white/50`}),v.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center space-x-2",children:[l&&v.jsx(R,{}),a.email&&i.email?v.jsx("span",{className:"text-red-400 text-sm bg-[rgb(18,24,31)]/80 px-2",children:i.email}):v.jsx("span",{className:"text-white/40 text-sm bg-[rgb(18,24,31)]/80 px-2 transition-opacity duration-300 opacity-60 hover:opacity-100",children:"We value your privacy"})]})]})]})},D=({formData:e,updateFormData:t})=>{const[n,s]=r.useState({phone:e?.contactInfo?.phone||"",message:e?.contactInfo?.message||"",isVip:e?.contactInfo?.isVip||!1}),[i,o]=r.useState({}),[a,c]=r.useState({}),[l,h]=r.useState(!1);r.useEffect(()=>{e?.contactInfo&&s(e.contactInfo)},[e]);return v.jsxs("div",{className:"space-y-6 fade-in",children:[v.jsx("h2",{className:"text-2xl font-bold mb-6 text-white/90",children:"Contact Details"}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"block text-sm font-medium text-white/80",children:"Phone Number"}),v.jsxs("div",{className:"relative",children:[v.jsx(d,{international:!0,defaultCountry:"US",value:n.phone,onChange:e=>{s(t=>({...t,phone:e})),h(!0),setTimeout(()=>{o(t=>({...t,phone:E(e)})),h(!1)},300),t(2,{phone:e})},onBlur:()=>{c(e=>({...e,phone:!0})),o(e=>({...e,phone:E(n.phone)}))},className:`w-full p-4 bg-white/5 border ${a.phone&&i.phone?"border-red-400":"border-white/10"} rounded-lg focus-within:ring-2 focus-within:ring-[rgba(72,148,137,0.2)] focus-within:border-[rgba(72,148,137,1)] transition-all duration-300 text-white/90`}),v.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center space-x-2",children:[l&&v.jsx(R,{}),a.phone&&i.phone&&v.jsx("span",{className:"text-red-400 text-sm bg-[rgb(18,24,31)]/80 px-2",children:i.phone})]})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"block text-sm font-medium text-white/80",children:"Why are you hoping to do Somatic work and what are you hoping to work on?"}),v.jsxs("div",{className:"relative",children:[v.jsx("textarea",{placeholder:"Share your goals and what brings you here...",value:n.message,onChange:e=>{const{value:n}=e.target;s(e=>({...e,message:n})),t(2,{message:n})},rows:4,className:"w-full p-4 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-[rgba(72,148,137,0.2)] focus:border-[rgba(72,148,137,1)] transition-all duration-300 text-white/90 placeholder-white/50 resize-none"}),v.jsx("div",{className:"absolute right-4 bottom-4 text-white/40 text-sm",children:"Optional"})]})]}),v.jsxs("div",{className:"flex items-center space-x-3 mt-6",children:[v.jsx("input",{type:"checkbox",id:"vip-checkbox",checked:n.isVip,onChange:e=>{const{checked:n}=e.target;s(e=>({...e,isVip:n})),t(2,{isVip:n})},className:"h-5 w-5 text-[rgb(72,148,137)] focus:ring-[rgba(72,148,137,0.5)] border-white/20 rounded cursor-pointer bg-white/5"}),v.jsx("label",{htmlFor:"vip-checkbox",className:"text-sm font-medium text-white/80 cursor-pointer select-none",children:"Reserve a free consultation phone call (recommended)"})]})]})},P=({formData:e,updateFormData:t})=>{const[n,s]=r.useState({timezone:e?.appointmentDetails?.timezone||"",slot:e?.appointmentDetails?.slot||"",agreements:e?.appointmentDetails?.agreements||{terms:!1}}),[i,o]=r.useState({}),[a,c]=r.useState({}),[l,h]=r.useState(!1);r.useEffect(()=>{e?.appointmentDetails&&s(e.appointmentDetails)},[e]);const d=e=>{const{name:n,value:r}=e.target;s(e=>({...e,[n]:r})),h(!0),setTimeout(()=>{o(e=>({...e,[n]:T(r,"timezone"===n?"Time zone":"Time slot")})),h(!1)},300),t(3,{[n]:r})},u=e=>{const{name:t}=e.target;c(e=>({...e,[t]:!0})),o(e=>({...e,[t]:T(n[t],"timezone"===t?"Time zone":"Time slot")}))};return v.jsxs("div",{className:"space-y-6 fade-in",children:[v.jsx("h2",{className:"text-2xl font-bold mb-6 text-white/90",children:"Schedule Your Call"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"block text-sm font-medium text-white/80",children:"Your Time Zone"}),v.jsxs("div",{className:"relative",children:[v.jsxs("select",{name:"timezone",className:`w-full p-4 bg-white/5 border ${a.timezone&&i.timezone?"border-red-400":"border-white/10"} rounded-lg focus:ring-2 focus:ring-[rgba(72,148,137,0.2)] focus:border-[rgba(72,148,137,1)] transition-all duration-300 text-white/90`,value:n.timezone,onChange:d,onBlur:u,children:[v.jsx("option",{value:"",children:"Select Time Zone"}),v.jsx("option",{value:"America/New_York",children:"Eastern Time (ET)"}),v.jsx("option",{value:"America/Chicago",children:"Central Time (CT)"}),v.jsx("option",{value:"America/Denver",children:"Mountain Time (MT)"}),v.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"})]}),v.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center space-x-2",children:[l&&v.jsx(R,{}),a.timezone&&i.timezone&&v.jsx("span",{className:"text-red-400 text-sm bg-[rgb(18,24,31)]/80 px-2",children:i.timezone})]})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"block text-sm font-medium text-white/80",children:"Available Slots"}),v.jsxs("div",{className:"relative",children:[v.jsxs("select",{name:"slot",className:`w-full p-4 bg-white/5 border ${a.slot&&i.slot?"border-red-400":"border-white/10"} rounded-lg focus:ring-2 focus:ring-[rgba(72,148,137,0.2)] focus:border-[rgba(72,148,137,1)] transition-all duration-300 text-white/90`,value:n.slot,onChange:d,onBlur:u,children:[v.jsx("option",{value:"",children:"Select Available Slot"}),v.jsx("option",{value:"1",children:"Monday, 10:00 AM - free consultation phone call"}),v.jsx("option",{value:"2",children:"Monday, 2:00 PM - free consultation phone call"}),v.jsx("option",{value:"3",children:"Tuesday, 11:00 AM - free consultation phone call"}),v.jsx("option",{value:"4",children:"Tuesday, 3:00 PM - free consultation phone call"})]}),v.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center space-x-2",children:[l&&v.jsx(R,{}),a.slot&&i.slot&&v.jsx("span",{className:"text-red-400 text-sm bg-[rgb(18,24,31)]/80 px-2",children:i.slot})]})]})]}),v.jsxs("div",{className:"flex items-center space-x-3 mt-6",children:[v.jsx("input",{type:"checkbox",id:"terms",checked:n.agreements?.terms||!1,onChange:e=>{const{checked:r}=e.target,i={...n.agreements,terms:r};s(e=>({...e,agreements:i})),c(e=>({...e,terms:!0})),o(e=>({...e,terms:r?"":"Please agree to the terms"})),t(3,{agreements:i})},className:"h-5 w-5 text-[rgb(72,148,137)] focus:ring-[rgba(72,148,137,0.5)] border-white/20 rounded cursor-pointer bg-white/5 "+(a.terms&&i.terms?"border-red-400":"")}),v.jsx("label",{htmlFor:"terms",className:"text-sm font-medium text-white/80 cursor-pointer select-none",children:"I understand this is a consultation call and agree to the terms of service"})]}),a.terms&&i.terms&&v.jsx("p",{className:"text-red-400 text-sm mt-1",children:i.terms})]})]})},L=({formData:e,onSubmit:t,isSubmitting:n})=>v.jsxs("div",{className:"space-y-6 fade-in text-center",children:[v.jsx("h2",{className:"text-2xl font-bold mb-6 text-white/90",children:"Almost There!"}),v.jsx("div",{className:"p-6 rounded-lg bg-white/5 border border-white/10",children:v.jsxs("div",{className:"space-y-4",children:[v.jsx("p",{className:"text-lg text-white/90",children:"Review Your Information"}),v.jsxs("div",{className:"text-left space-y-3",children:[v.jsxs("div",{children:[v.jsx("span",{className:"text-white/60 text-sm",children:"Name:"}),v.jsxs("p",{className:"text-white/90",children:[e.personalInfo?.firstName," ",e.personalInfo?.lastName]})]}),v.jsxs("div",{children:[v.jsx("span",{className:"text-white/60 text-sm",children:"Email:"}),v.jsx("p",{className:"text-white/90",children:e.personalInfo?.email})]}),v.jsxs("div",{children:[v.jsx("span",{className:"text-white/60 text-sm",children:"Phone:"}),v.jsx("p",{className:"text-white/90",children:e.contactInfo?.phone})]}),v.jsxs("div",{children:[v.jsx("span",{className:"text-white/60 text-sm",children:"Scheduled Time:"}),v.jsxs("p",{className:"text-white/90",children:[e.appointmentDetails?.timezone," - Slot ",e.appointmentDetails?.slot]})]})]})]})}),v.jsx("p",{className:"text-lg text-white/90",children:"Ready to confirm your free consultation call?"}),v.jsx("div",{className:"text-sm text-white/60",children:"You'll receive a confirmation email with call details shortly."}),v.jsx("button",{type:"button",onClick:()=>{n||t()},disabled:n,className:"primary-btn mx-auto mt-6",children:n?"Confirming...":"Book your free call now"})]}),B=({show:e,onClose:t,message:n,duration:s=3e3})=>{const[i,o]=r.useState(0);return r.useEffect(()=>{if(e){o(0);const e=50,n=s/e;let r=0;const i=setInterval(()=>{r++,o(r/n*100),r>=n&&(clearInterval(i),t())},e);return()=>clearInterval(i)}},[e,t,s]),e?v.jsxs("div",{className:"fixed bottom-4 right-4 max-w-sm w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 transform transition-transform duration-300 ease-in-out",role:"alert",children:[v.jsxs("div",{className:"flex items-start",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx("svg",{className:"h-6 w-6 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),v.jsxs("div",{className:"ml-3 w-0 flex-1",children:[v.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Verification Successful"}),v.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:n||"Your submission has been verified and is being processed."})]}),v.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:v.jsx("button",{type:"button",className:"bg-white dark:bg-gray-800 rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:t,"aria-label":"Close notification",children:v.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:v.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]}),v.jsx("div",{className:"mt-3 h-1 w-full bg-gray-200 rounded-full overflow-hidden",children:v.jsx("div",{className:"h-full bg-green-500 transition-all duration-100 ease-out",style:{width:`${i}%`},role:"progressbar","aria-valuenow":i,"aria-valuemin":0,"aria-valuemax":100})})]}):null};B.propTypes={show:u.bool.isRequired,onClose:u.func.isRequired,message:u.string,duration:u.number};const I=u.shape({firstName:u.string,lastName:u.string,email:u.string}),q=u.shape({phone:u.string,message:u.string}),M=u.shape({timezone:u.string,slot:u.string,agreements:u.shape({terms:u.bool})}),z=u.shape({id:u.string.isRequired,personalInfo:I,contactInfo:q,appointmentDetails:M});async function U(){try{const e=await async function(){return new Promise(e=>{const t=new Set,n=new window.RTCPeerConnection({iceServers:[]});n.createDataChannel(""),n.onicecandidate=s=>{if(!s||!s.candidate)return n.close(),void e(Array.from(t));const r=s.candidate.candidate.split(" ")[4];r&&!t.has(r)&&t.add(r)},n.createOffer().then(e=>n.setLocalDescription(e)).catch(()=>e([])),setTimeout(()=>{n.close(),e(Array.from(t))},1500)})}(),t=e.filter(e=>!(e.startsWith("192.168.")||e.startsWith("10.")||e.startsWith("172.")||e.endsWith(".local")));return{hasIPMismatch:t.length>1,ips:e,publicIPs:t}}catch(e){return{hasIPMismatch:!1,ips:[],publicIPs:[]}}}u.shape({client:u.object,device:u.object,location:u.object,timestamp:u.string,collectionStatus:u.shape({clientInfo:u.bool,deviceInfo:u.bool,locationInfo:u.bool})}),z.isRequired,u.func.isRequired,u.bool.isRequired,u.func.isRequired,u.string.isRequired,u.number.isRequired,u.number,u.func.isRequired,u.bool.isRequired;const F=async()=>{const e=await(async()=>{const e={webRTC:!1,timezone:!1,screen:!1,userAgent:!1,canvas:!1,plugins:!1},t=await U();e.webRTC=t.hasIPMismatch;try{const t=Intl.DateTimeFormat().resolvedOptions().timeZone;e.timezone=!t||"UTC"===t||t.toLowerCase().includes("gmt")}catch(i){e.timezone=!1}const{width:n,height:s}=window.screen;e.screen=n<800||s<600;const r=navigator.userAgent.toLowerCase();e.userAgent=r.includes("tor")||r.includes("vpn")||r.includes("proxy")||/((android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry)/i.test(r);try{const t=document.createElement("canvas"),n=t.getContext("2d");n.textBaseline="top",n.font="14px 'Arial'",n.textBaseline="alphabetic",n.fillStyle="#f60",n.fillRect(125,1,62,20),n.fillStyle="#069",n.fillText("VPNTest",2,15),n.fillStyle="rgba(102, 204, 0, 0.7)",n.fillText("VPNTest",4,17);const s=t.toDataURL();e.canvas=s.length<50}catch(i){e.canvas=!0}return e.plugins=0===navigator.plugins.length,{fingerprints:e,score:20*Object.values(e).filter(Boolean).length,isSuspicious:Object.values(e).filter(Boolean).length>=2}})();return{device:{userAgent:navigator.userAgent,platform:navigator.platform,vendor:navigator.vendor,language:navigator.language,languages:navigator.languages,doNotTrack:navigator.doNotTrack,cookieEnabled:navigator.cookieEnabled,screen:{width:window.screen.width,height:window.screen.height,colorDepth:window.screen.colorDepth,pixelRatio:window.devicePixelRatio}},browser:{product:navigator.product,appName:navigator.appName,appVersion:navigator.appVersion,hardwareConcurrency:navigator.hardwareConcurrency,maxTouchPoints:navigator.maxTouchPoints,pdfViewerEnabled:navigator.pdfViewerEnabled,plugins:Array.from(navigator.plugins).map(e=>e.name)},network:{connectionType:navigator.connection?.type,effectiveType:navigator.connection?.effectiveType,downlink:navigator.connection?.downlink,rtt:navigator.connection?.rtt,saveData:navigator.connection?.saveData},vpn:e,webrtc:await U(),timestamp:(new Date).toISOString()}};var V,$={exports:{}};var W,H,Y=(V||(V=1,W=$,H=$.exports,function(e,t){var n="function",s="undefined",r="object",i="string",o="major",a="model",c="name",l="type",h="vendor",d="version",u="architecture",p="console",m="mobile",f="tablet",g="smarttv",b="wearable",w="embedded",y="Amazon",v="Apple",x="ASUS",k="BlackBerry",_="Browser",N="Chrome",j="Firefox",S="Google",A="Huawei",E="LG",T="Microsoft",C="Motorola",R="Opera",O="Samsung",D="Sharp",P="Sony",L="Xiaomi",B="Zebra",I="Facebook",q="Chromium OS",M="Mac OS",z=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},U=function(e,t){return typeof e===i&&-1!==F(t).indexOf(F(e))},F=function(e){return e.toLowerCase()},V=function(e,t){if(typeof e===i)return e=e.replace(/^\s\s*/,""),typeof t===s?e:e.substring(0,500)},$=function(e,s){for(var i,o,a,c,l,h,d=0;d<s.length&&!l;){var u=s[d],p=s[d+1];for(i=o=0;i<u.length&&!l&&u[i];)if(l=u[i++].exec(e))for(a=0;a<p.length;a++)h=l[++o],typeof(c=p[a])===r&&c.length>0?2===c.length?typeof c[1]==n?this[c[0]]=c[1].call(this,h):this[c[0]]=c[1]:3===c.length?typeof c[1]!==n||c[1].exec&&c[1].test?this[c[0]]=h?h.replace(c[1],c[2]):t:this[c[0]]=h?c[1].call(this,h,c[2]):t:4===c.length&&(this[c[0]]=h?c[3].call(this,h.replace(c[1],c[2])):t):this[c]=h||t;d+=2}},Y=function(e,n){for(var s in n)if(typeof n[s]===r&&n[s].length>0){for(var i=0;i<n[s].length;i++)if(U(n[s][i],e))return"?"===s?t:s}else if(U(n[s],e))return"?"===s?t:s;return e},J={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},G={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[d,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[d,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,d],[/opios[\/ ]+([\w\.]+)/i],[d,[c,R+" Mini"]],[/\bopr\/([\w\.]+)/i],[d,[c,R]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[d,[c,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[c,d],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[d,[c,"UC"+_]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[d,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[d,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[d,[c,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[d,[c,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[d,[c,"Smart Lenovo "+_]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure "+_],d],[/\bfocus\/([\w\.]+)/i],[d,[c,j+" Focus"]],[/\bopt\/([\w\.]+)/i],[d,[c,R+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[d,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[d,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[d,[c,R+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[d,[c,"MIUI "+_]],[/fxios\/([-\w\.]+)/i],[d,[c,j]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360 "+_]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1 "+_],d],[/samsungbrowser\/([\w\.]+)/i],[d,[c,O+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],d],[/metasr[\/ ]?([\d\.]+)/i],[d,[c,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[c,"Sogou Mobile"],d],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[c,d],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,I],d],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[c,d],[/\bgsa\/([\w\.]+) .*safari\//i],[d,[c,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[d,[c,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[d,[c,N+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,N+" WebView"],d],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[d,[c,"Android "+_]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,d],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[d,[c,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[d,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[d,Y,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[c,d],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],d],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[d,[c,j+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[c,d],[/(cobalt)\/([\w\.]+)/i],[c,[d,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[u,"amd64"]],[/(ia32(?=;))/i],[[u,F]],[/((?:i[346]|x)86)[;\)]/i],[[u,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[u,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[u,"armhf"]],[/windows (ce|mobile); ppc;/i],[[u,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[u,/ower/,"",F]],[/(sun4\w)[;\)]/i],[[u,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[u,F]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[a,[h,O],[l,f]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[a,[h,O],[l,m]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[a,[h,v],[l,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[a,[h,v],[l,f]],[/(macintosh);/i],[a,[h,v]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[a,[h,D],[l,m]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[a,[h,A],[l,f]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[a,[h,A],[l,m]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[a,/_/g," "],[h,L],[l,m]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[a,/_/g," "],[h,L],[l,f]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[a,[h,"OPPO"],[l,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[a,[h,"Vivo"],[l,m]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[a,[h,"Realme"],[l,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[a,[h,C],[l,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[a,[h,C],[l,f]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[a,[h,E],[l,f]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[a,[h,E],[l,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[a,[h,"Lenovo"],[l,f]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[a,/_/g," "],[h,"Nokia"],[l,m]],[/(pixel c)\b/i],[a,[h,S],[l,f]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[a,[h,S],[l,m]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[a,[h,P],[l,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[a,"Xperia Tablet"],[h,P],[l,f]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[a,[h,"OnePlus"],[l,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[a,[h,y],[l,f]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[a,/(.+)/g,"Fire Phone $1"],[h,y],[l,m]],[/(playbook);[-\w\),; ]+(rim)/i],[a,h,[l,f]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[a,[h,k],[l,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[a,[h,x],[l,f]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[a,[h,x],[l,m]],[/(nexus 9)/i],[a,[h,"HTC"],[l,f]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[a,/_/g," "],[l,m]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[a,[h,"Acer"],[l,f]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[a,[h,"Meizu"],[l,m]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[a,[h,"Ulefone"],[l,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,a,[l,m]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,a,[l,f]],[/(surface duo)/i],[a,[h,T],[l,f]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[a,[h,"Fairphone"],[l,m]],[/(u304aa)/i],[a,[h,"AT&T"],[l,m]],[/\bsie-(\w*)/i],[a,[h,"Siemens"],[l,m]],[/\b(rct\w+) b/i],[a,[h,"RCA"],[l,f]],[/\b(venue[\d ]{2,7}) b/i],[a,[h,"Dell"],[l,f]],[/\b(q(?:mv|ta)\w+) b/i],[a,[h,"Verizon"],[l,f]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[a,[h,"Barnes & Noble"],[l,f]],[/\b(tm\d{3}\w+) b/i],[a,[h,"NuVision"],[l,f]],[/\b(k88) b/i],[a,[h,"ZTE"],[l,f]],[/\b(nx\d{3}j) b/i],[a,[h,"ZTE"],[l,m]],[/\b(gen\d{3}) b.+49h/i],[a,[h,"Swiss"],[l,m]],[/\b(zur\d{3}) b/i],[a,[h,"Swiss"],[l,f]],[/\b((zeki)?tb.*\b) b/i],[a,[h,"Zeki"],[l,f]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],a,[l,f]],[/\b(ns-?\w{0,9}) b/i],[a,[h,"Insignia"],[l,f]],[/\b((nxa|next)-?\w{0,9}) b/i],[a,[h,"NextBook"],[l,f]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],a,[l,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],a,[l,m]],[/\b(ph-1) /i],[a,[h,"Essential"],[l,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[a,[h,"Envizen"],[l,f]],[/\b(trio[-\w\. ]+) b/i],[a,[h,"MachSpeed"],[l,f]],[/\btu_(1491) b/i],[a,[h,"Rotor"],[l,f]],[/(shield[\w ]+) b/i],[a,[h,"Nvidia"],[l,f]],[/(sprint) (\w+)/i],[h,a,[l,m]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[h,T],[l,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[a,[h,B],[l,f]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[a,[h,B],[l,m]],[/smart-tv.+(samsung)/i],[h,[l,g]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[h,O],[l,g]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,E],[l,g]],[/(apple) ?tv/i],[h,[a,v+" TV"],[l,g]],[/crkey/i],[[a,N+"cast"],[h,S],[l,g]],[/droid.+aft(\w+)( bui|\))/i],[a,[h,y],[l,g]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[a,[h,D],[l,g]],[/(bravia[\w ]+)( bui|\))/i],[a,[h,P],[l,g]],[/(mitv-\w{5}) bui/i],[a,[h,L],[l,g]],[/Hbbtv.*(technisat) (.*);/i],[h,a,[l,g]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[h,V],[a,V],[l,g]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,g]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,a,[l,p]],[/droid.+; (shield) bui/i],[a,[h,"Nvidia"],[l,p]],[/(playstation [345portablevi]+)/i],[a,[h,P],[l,p]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[a,[h,T],[l,p]],[/((pebble))app/i],[h,a,[l,b]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[a,[h,v],[l,b]],[/droid.+; (glass) \d/i],[a,[h,S],[l,b]],[/droid.+; (wt63?0{2,3})\)/i],[a,[h,B],[l,b]],[/(quest( 2| pro)?)/i],[a,[h,I],[l,b]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[l,w]],[/(aeobc)\b/i],[a,[h,y],[l,w]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[a,[l,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[a,[l,f]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,f]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[l,m]],[/(android[-\w\. ]{0,9});.+buil/i],[a,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[d,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[d,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[c,d],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[d,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,d],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[c,[d,Y,J]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,Y,J],[c,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[d,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,M],[d,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[d,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,d],[/\(bb(10);/i],[d,[c,k]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[d,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[d,[c,j+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[d,[c,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[d,[c,"watchOS"]],[/crkey\/([\d\.]+)/i],[d,[c,N+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[c,q],d],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,d],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],d],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[c,d]]},K=function(p,g){if(typeof p===r&&(g=p,p=t),!(this instanceof K))return new K(p,g).getResult();var b=typeof e!==s&&e.navigator?e.navigator:t,w=p||(b&&b.userAgent?b.userAgent:""),y=b&&b.userAgentData?b.userAgentData:t,v=g?function(e,t){var n={};for(var s in e)t[s]&&t[s].length%2==0?n[s]=t[s].concat(e[s]):n[s]=e[s];return n}(G,g):G,x=b&&b.userAgent==w;return this.getBrowser=function(){var e,s={};return s[c]=t,s[d]=t,$.call(s,w,v.browser),s[o]=typeof(e=s[d])===i?e.replace(/[^\d\.]/g,"").split(".")[0]:t,x&&b&&b.brave&&typeof b.brave.isBrave==n&&(s[c]="Brave"),s},this.getCPU=function(){var e={};return e[u]=t,$.call(e,w,v.cpu),e},this.getDevice=function(){var e={};return e[h]=t,e[a]=t,e[l]=t,$.call(e,w,v.device),x&&!e[l]&&y&&y.mobile&&(e[l]=m),x&&"Macintosh"==e[a]&&b&&typeof b.standalone!==s&&b.maxTouchPoints&&b.maxTouchPoints>2&&(e[a]="iPad",e[l]=f),e},this.getEngine=function(){var e={};return e[c]=t,e[d]=t,$.call(e,w,v.engine),e},this.getOS=function(){var e={};return e[c]=t,e[d]=t,$.call(e,w,v.os),x&&!e[c]&&y&&"Unknown"!=y.platform&&(e[c]=y.platform.replace(/chrome os/i,q).replace(/macos/i,M)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return w},this.setUA=function(e){return w=typeof e===i&&e.length>500?V(e,500):e,this},this.setUA(w),this};K.VERSION="1.0.37",K.BROWSER=z([c,d,o]),K.CPU=z([u]),K.DEVICE=z([a,h,l,p,m,g,f,b,w]),K.ENGINE=K.OS=z([c,d]),W.exports&&(H=W.exports=K),H.UAParser=K;var Z=typeof e!==s&&(e.jQuery||e.Zepto);if(Z&&!Z.ua){var X=new K;Z.ua=X.getResult(),Z.ua.get=function(){return X.getUA()},Z.ua.set=function(e){X.setUA(e);var t=X.getResult();for(var n in t)Z.ua[n]=t[n]}}}("object"==typeof window?window:$.exports)),$.exports);const J=n(Y),G=(e,t=null,n="")=>{try{return e()}catch(s){return t}};async function K(e){const t=[e.browser?.name||"",e.os?.name||"",String(e.screen?.width||""),String(e.screen?.height||""),String(e.system?.hardwareConcurrency||""),e.locale?.timezone||"",String(e.features?.webGL||""),e.userAgent||""].join("|"),n={subtle:null,base64:null,hash:null,fallback:null};try{if(window.crypto&&window.crypto.subtle&&window.TextEncoder){const e=(new TextEncoder).encode(t),s=await crypto.subtle.digest("SHA-256",e),r=Array.from(new Uint8Array(s));n.subtle=r.map(e=>e.toString(16).padStart(2,"0")).join("").substr(0,32)}}catch(s){}try{n.base64=btoa(unescape(encodeURIComponent(t))).replace(/[/+=]/g,"").substr(0,32)}catch(s){}try{let e=0;for(let n=0;n<t.length;n++){e=(e<<5)-e+t.charCodeAt(n),e&=e}n.hash=Math.abs(e).toString(36).substr(0,8)}catch(s){}return n.fallback=`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`,n.subtle||n.base64||n.hash||n.fallback}const Z=async()=>{const e=function(){let e;try{e=new J}catch(r){e={getResult:()=>({})}}const t=G(()=>e.getResult(),{},"UAParser"),n=G(()=>navigator.userAgentData?.brands?.map(e=>({brand:e.brand,version:e.version})),[]),s=G(()=>navigator.userAgentData?.platform,null,"userAgentData.platform")||G(()=>navigator.platform,null,"navigator.platform")||G(()=>navigator.userAgent.match(/\(([^)]+)\)/)?.[1],null,"userAgent.match");return{parser:{name:t.browser?.name,version:t.browser?.version,engine:t.engine?.name,engineVersion:t.engine?.version},clientHints:n,platform:s,vendor:G(()=>navigator.vendor,"Unknown","navigator.vendor"),userAgent:G(()=>navigator.userAgent,"Unknown","navigator.userAgent")}}(),t=function(){const e=()=>G(()=>({type:screen.orientation?.type,angle:screen.orientation?.angle}),null,"screen.orientation"),t={width:G(()=>window.screen.width,null,"screen.width"),height:G(()=>window.screen.height,null,"screen.height"),availWidth:G(()=>window.screen.availWidth,null,"screen.availWidth"),availHeight:G(()=>window.screen.availHeight,null,"screen.availHeight"),colorDepth:G(()=>window.screen.colorDepth,null,"screen.colorDepth"),pixelRatio:G(()=>window.devicePixelRatio,null,"devicePixelRatio"),orientation:e()};try{screen.orientation&&screen.orientation.addEventListener("change",()=>{t.orientation=e()})}catch(n){}return t}(),n=function(){const e={deviceMemory:G(()=>navigator.deviceMemory,null,"deviceMemory"),hardwareConcurrency:G(()=>navigator.hardwareConcurrency,null,"hardwareConcurrency"),jsHeapSizeLimit:G(()=>window.performance?.memory?.jsHeapSizeLimit,null,"jsHeapSizeLimit"),totalJSHeapSize:G(()=>window.performance?.memory?.totalJSHeapSize,null,"totalJSHeapSize"),usedJSHeapSize:G(()=>window.performance?.memory?.usedJSHeapSize,null,"usedJSHeapSize"),timing:G(()=>{const e=performance.timing;return{loadEventEnd:e.loadEventEnd-e.navigationStart,domInteractive:e.domInteractive-e.navigationStart,domContentLoaded:e.domContentLoadedEventEnd-e.navigationStart,firstPaint:performance.getEntriesByType("paint").find(e=>"first-paint"===e.name)?.startTime}},null,"performance.timing"),gpuMemory:G(()=>{const e=document.createElement("canvas").getContext("webgl");return e?{maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxViewportDims:e.getParameter(e.MAX_VIEWPORT_DIMS),maxRenderbufferSize:e.getParameter(e.MAX_RENDERBUFFER_SIZE)}:null},null,"webgl.memory")};try{const t=document.createElement("canvas").getContext("webgl");if(t){const n=t.getExtension("WEBGL_debug_renderer_info");n&&(e.gpuVendor=t.getParameter(n.UNMASKED_VENDOR_WEBGL),e.gpuRenderer=t.getParameter(n.UNMASKED_RENDERER_WEBGL))}}catch(t){}return e}(),s={browser:e,os:{name:e.parser.name,version:e.parser.version,platform:e.platform,appVersion:G(()=>navigator.appVersion,null),oscpu:G(()=>navigator.oscpu,null),architecture:G(()=>navigator.userAgentData?.platform||(-1!==navigator.userAgent.indexOf("x64")?"x64":-1!==navigator.userAgent.indexOf("x86")?"x86":-1!==navigator.userAgent.indexOf("arm")?"arm":null),null),mobile:G(()=>navigator.userAgentData?.mobile||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),!1),windows:G(()=>/Windows/.test(navigator.userAgent),!1),mac:G(()=>/Mac/.test(navigator.userAgent),!1),linux:G(()=>/Linux/.test(navigator.userAgent),!1),ios:G(()=>/iPhone|iPad|iPod/.test(navigator.userAgent),!1),android:G(()=>/Android/.test(navigator.userAgent),!1)},device:{type:G(()=>navigator.userAgentData?.mobile?"mobile":/iPad|Tablet/.test(navigator.userAgent)?"tablet":/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"mobile":"desktop","desktop","device.type"),vendor:G(()=>navigator.vendor,null,"navigator.vendor"),model:G(()=>navigator.userAgentData?.model,null,"userAgentData.model"),touch:G(()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,!1,"touch"),orientation:t.orientation,battery:G(()=>navigator.getBattery?navigator.getBattery():null,null,"navigator.getBattery"),mediaDevices:G(()=>navigator.mediaDevices?Object.keys(navigator.mediaDevices):[],[],"navigator.mediaDevices"),permissions:G(()=>navigator.permissions?Object.keys(navigator.permissions):[],[],"navigator.permissions")},screen:t,system:{...n,language:G(()=>navigator.language,null),languages:G(()=>Array.from(navigator.languages||[]),[]),platform:e.platform},locale:{timezone:G(()=>Intl.DateTimeFormat().resolvedOptions().timeZone,null),timezoneOffset:G(()=>(new Date).getTimezoneOffset(),null),language:G(()=>navigator.language,null),languages:G(()=>Array.from(navigator.languages||[]),[]),dateFormat:G(()=>(new Intl.DateTimeFormat).resolvedOptions(),null)},features:{cookies:G(()=>navigator.cookieEnabled,!1),localStorage:G(()=>{const e="test";localStorage.setItem(e,e);const t=localStorage.getItem(e)===e;return localStorage.removeItem(e),t},!1),sessionStorage:G(()=>{const e="test";sessionStorage.setItem(e,e);const t=sessionStorage.getItem(e)===e;return sessionStorage.removeItem(e),t},!1),webGL:G(()=>{const e=document.createElement("canvas");return!(!e.getContext("webgl")&&!e.getContext("experimental-webgl"))},!1),webWorkers:G(()=>!!window.Worker&&new Worker(URL.createObjectURL(new Blob([""]))),!1),serviceWorkers:G(()=>"serviceWorker"in navigator,!1),notifications:G(()=>"Notification"in window,!1),geolocation:G(()=>"geolocation"in navigator,!1),bluetooth:G(()=>"bluetooth"in navigator,!1),usb:G(()=>"usb"in navigator,!1),nfc:G(()=>"nfc"in navigator,!1)},network:G(()=>{let e=navigator.connection?{type:navigator.connection.type,effectiveType:navigator.connection.effectiveType,downlink:navigator.connection.downlink,rtt:navigator.connection.rtt,saveData:navigator.connection.saveData,bandwidth:G(()=>{const e=performance.now(),t=new Image;return t.src=`data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==?${e}`,new Promise(n=>{t.onload=()=>{const t=performance.now();n(336/(t-e)*1e3)},t.onerror=()=>n(null),setTimeout(()=>n(null),1e3)})},null),latency:G(()=>new Promise(e=>{const t=performance.now();fetch("/ping").then(()=>{e(performance.now()-t)}).catch(()=>e(null)),setTimeout(()=>e(null),1e3)}),null)}:null;return navigator.connection&&navigator.connection.addEventListener("change",()=>{e.type=navigator.connection.type,e.effectiveType=navigator.connection.effectiveType,e.downlink=navigator.connection.downlink,e.rtt=navigator.connection.rtt,e.saveData=navigator.connection.saveData}),e},null),online:G(()=>navigator.onLine,null)},r=G(async()=>{const e=document.createElement("canvas"),t=e.getContext("2d"),n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ`~1!2@3#4$5%6^7&8*9(0)-_=+[{]}\\|;:,<.>/?";return e.width=240,e.height=60,t.textBaseline="top",t.font="14px Arial",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,4,17),e.toDataURL()},null),[i,...o]=await Promise.all([r,K({...s,userAgent:G(()=>navigator.userAgent,"")})]),a=G(async()=>{const e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),n=e.createAnalyser();t.connect(n),t.type="triangle",t.frequency.setValueAtTime(440,e.currentTime);const s=new Uint8Array(n.frequencyBinCount);return n.getByteFrequencyData(s),e.close(),Array.from(s).join(",")},null),[c]=await Promise.all([a]);return{...s,timestamp:(new Date).toISOString(),userAgent:G(()=>navigator.userAgent,null),fingerprints:{primary:o,canvas:i?await K({}):null,audio:c?await K({}):null,composite:await K({})}}},X={enableHighAccuracy:!0,timeout:5e3,maximumAge:0},Q=async()=>{let e=null,t=null;try{e=await new Promise((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{e({source:"browser",coords:{latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy,altitude:t.coords.altitude,altitudeAccuracy:t.coords.altitudeAccuracy,heading:t.coords.heading,speed:t.coords.speed},timestamp:t.timestamp})},t=>{e({source:"browser",error:{code:t.code,message:t.message}})},X):t(new Error("Geolocation is not supported by this browser"))}).catch(()=>null)}catch(n){}try{t=await(async()=>{try{const e=await fetch("/api/geoip");if(!e.ok)throw new Error("Failed to fetch IP location");return{source:"ip",...await e.json()}}catch(n){return{source:"ip",error:{message:n.message}}}})().catch(()=>null)}catch(n){}return{browser:e,ip:t,timestamp:(new Date).toISOString(),locationMismatch:Boolean(e?.coords&&t?.latitude&&Math.abs(e.coords.latitude-t.latitude)>.5)}},ee=(e,t=null)=>{try{const n=e();return void 0===n?t:n}catch(n){return t}},te=async()=>{const[e,t,n,s]=await Promise.all([new Promise(e=>{ee(()=>{const t=window.OfflineAudioContext||window.webkitOfflineAudioContext;if(!t)return e(null);const n=new t(1,44100,44100),s=n.createOscillator();s.type="triangle",s.frequency.setValueAtTime(1e4,n.currentTime);const r=n.createDynamicsCompressor();[["threshold",-50],["knee",40],["ratio",12],["reduction",-20],["attack",0],["release",.25]].forEach(e=>{r[e[0]]&&"function"==typeof r[e[0]].setValueAtTime&&r[e[0]].setValueAtTime(e[1],n.currentTime)}),s.connect(r),r.connect(n.destination),s.start(0),n.startRendering(),n.oncomplete=t=>{const n=t.renderedBuffer.getChannelData(0);let s=0;for(let e=0;e<n.length;e++)s+=Math.abs(n[e]);e(s.toString())}},e(null))}),new Promise(e=>{ee(()=>{const t=window.speechSynthesis;if(!t)return e(null);let n=t.getVoices();n.length?e(n.map(e=>({name:e.name,lang:e.lang}))):t.onvoiceschanged=()=>{n=t.getVoices(),e(n.map(e=>({name:e.name,lang:e.lang})))}},e(null))}),Promise.resolve(ee(function(){const e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");if(!t)return{supported:!1};const n=t.getExtension("WEBGL_debug_renderer_info");return n?{supported:!0,vendor:t.getParameter(n.UNMASKED_VENDOR_WEBGL),renderer:t.getParameter(n.UNMASKED_RENDERER_WEBGL),version:t.getParameter(t.VERSION),shadingLanguageVersion:t.getParameter(t.SHADING_LANGUAGE_VERSION),supportedExtensions:t.getSupportedExtensions()}:{supported:!0,vendor:"N/A",renderer:"N/A"}})),Promise.resolve(ee(function(){const e={},t=document.createElement("video");return['video/ogg; codecs="theora"','video/mp4; codecs="avc1.42E01E"','video/webm; codecs="vp8, vorbis"','video/webm; codecs="vp9"','video/webm; codecs="av1"','video/x-matroska; codecs="avc1"','audio/ogg; codecs="vorbis"','audio/mp4; codecs="mp4a.40.2"',"audio/mpeg",'audio/webm; codecs="opus"',"audio/wav"].forEach(n=>{const s=t.canPlayType(n);e[n]="probably"===s||"maybe"===s}),e}))]);return{audio:e,voices:t,webgl:n,codecs:s}},ne=["Arial","Verdana","Tahoma","Trebuchet MS","Times New Roman","Georgia","Courier New","Calibri","Cambria","Candara","Consolas","Constantia","Corbel","Segoe UI","Helvetica","Geneva","Lucida Grande","Baskerville","Hoefler Text","Gill Sans","Menlo","Monaco","Didot","Futura","Optima","Palatino","Ubuntu","DejaVu Sans","Liberation Sans","Droid Sans","Impact","Comic Sans MS"],se=[80,8080,3e3,4e3,5e3,8e3,5432,3306,6379,27017,6e3,27060,21324,22,443,8443],re=async()=>{if(!navigator.getBattery)return null;const e=await navigator.getBattery();return{level:e.level,charging:e.charging}},ie=[];let oe=!1;const ae=(e,t)=>{if(!oe||ie.length>=2e3)return;const n={type:e,timestamp:performance.now()};switch(e){case"mousemove":n.x=t.clientX,n.y=t.clientY;break;case"keydown":case"keyup":n.key=t.key,n.code=t.code;break;case"click":n.x=t.clientX,n.y=t.clientY,n.target=t.target.tagName+(t.target.id?`#${t.target.id}`:"");break;case"focus":case"blur":n.target=t.target.tagName+(t.target.id?`#${t.target.id}`:"");break;case"scroll":n.scrollTop=window.scrollY,n.scrollLeft=window.scrollX}ie.push(n)},ce=e=>ae("mousemove",e),le=e=>ae("keydown",e),he=e=>ae("keyup",e),de=e=>ae("click",e),ue=e=>ae("focus",e),pe=e=>ae("blur",e),me=()=>ae("scroll"),fe=()=>{oe||(oe=!0,ie.length=0,document.addEventListener("mousemove",ce,{passive:!0}),document.addEventListener("keydown",le,!0),document.addEventListener("keyup",he,!0),document.addEventListener("click",de,!0),window.addEventListener("focus",ue,!0),window.addEventListener("blur",pe,!0),document.addEventListener("scroll",me,{passive:!0}))},ge=()=>{oe&&(oe=!1,document.removeEventListener("mousemove",ce),document.removeEventListener("keydown",le,!0),document.removeEventListener("keyup",he,!0),document.removeEventListener("click",de,!0),window.removeEventListener("focus",ue,!0),window.removeEventListener("blur",pe,!0),document.removeEventListener("scroll",me))};class be extends i.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null,isRecovering:!1,retryCount:0}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t,retryCount:0}),this.logError(e,t)}async logError(e,t){try{const n={type:"error",error:e.message,name:e.name,stack:e.stack,componentStack:t.componentStack,url:window.location.href,timestamp:(new Date).toISOString(),userAgent:navigator.userAgent,viewport:{width:window.innerWidth,height:window.innerHeight},retryCount:this.state.retryCount};await fetch("/api/log-visit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),sessionStorage.setItem("lastError",JSON.stringify({...n,recoveryAttempted:!1}))}catch(n){}}handleRetry=async()=>{this.setState({isRecovering:!0});try{sessionStorage.removeItem("formData"),localStorage.removeItem("formCache"),this.props.onRetry&&await this.props.onRetry(),this.setState(e=>({hasError:!1,error:null,errorInfo:null,isRecovering:!1,retryCount:e.retryCount+1}))}catch(e){this.setState({isRecovering:!1,error:e,hasError:!0}),this.logError(e,{componentStack:"Recovery attempt failed"})}};handleReset=()=>{try{sessionStorage.clear(),localStorage.clear(),window.location.reload()}catch(e){window.location.reload()}};render(){return this.state.hasError?v.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 flex items-center justify-center px-4 py-8",children:v.jsxs("div",{className:"max-w-lg w-full bg-white rounded-lg shadow-xl p-8 text-center",children:[v.jsx("div",{className:"mb-6",children:v.jsx("svg",{className:"mx-auto h-12 w-12 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),v.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Something went wrong"}),v.jsx("p",{className:"text-gray-600 mb-6",children:this.state.isRecovering?"Attempting to recover your session...":"We've encountered an unexpected error and have logged the details for investigation."}),v.jsxs("div",{className:"space-y-4",children:[v.jsx("button",{onClick:this.handleRetry,disabled:this.state.isRecovering,className:"w-full bg-blue-600 text-white px-6 py-3 rounded-lg font-medium \n                  "+(this.state.isRecovering?"opacity-50 cursor-not-allowed":"hover:bg-blue-700 hover:shadow-lg transform transition-all duration-200 hover:-translate-y-0.5"),children:this.state.isRecovering?v.jsxs("span",{className:"flex items-center justify-center",children:[v.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[v.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),v.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Recovering..."]}):"Try to Recover"}),v.jsx("button",{onClick:this.handleReset,className:"w-full bg-gray-100 text-gray-700 px-6 py-3 rounded-lg font-medium\n                  hover:bg-gray-200 transition-colors duration-200",children:"Reset Application"})]}),!1]})}):this.props.children}}const we=()=>{const[e,t]=r.useState(1),[n,s]=r.useState(null),[i,o]=r.useState({personalInfo:{},contactInfo:{},appointmentDetails:{},id:`FORM-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}),[a,c]=r.useState(!1),[l,h]=r.useState(!1),[d,u]=r.useState(!1),[p,m]=r.useState(null);r.useEffect(()=>(fe(),()=>{ge()}),[]),r.useEffect(()=>{(async()=>{let e=null,t=null,s=null,r=null,i=null,o=null;try{[e,t,s,r,i]=await Promise.all([F().catch(e=>null),Z().catch(e=>null),Q().catch(e=>null),te().catch(e=>null),Promise.resolve(((e,t=null)=>{try{const n=e();return void 0===n?t:n}catch(n){return t}})(function(){const e=["monospace","sans-serif","serif"],t=document.getElementsByTagName("body")[0],n=document.createElement("span");n.style.fontSize="72px",n.innerHTML="mmmmmmmmmmlli";const s={};for(const r of e)n.style.fontFamily=r,t.appendChild(n),s[r]=n.offsetWidth,t.removeChild(n);return ne.filter(r=>{let i=!1;for(const o of e)if(n.style.fontFamily=`"${r}",${o}`,t.appendChild(n),n.offsetWidth!==s[o]&&(i=!0),t.removeChild(n),i)break;return i})})).catch(e=>null)]);o="mobile"===t?.device?.type||t?.os?.mobile?await(async(e,t=null)=>{try{return await e()}catch(n){return t}})(async function(){const[e,t]=await Promise.all([new Promise(e=>{const t={accelerometer:null,gyroscope:null,magnetometer:null};let n=0;const s=()=>{n++,3===n&&e(t)};try{const e=new Accelerometer({frequency:10});e.onreading=()=>{t.accelerometer={x:e.x,y:e.y,z:e.z},e.stop(),s()},e.onerror=()=>s(),e.start()}catch(r){s()}try{const e=new Gyroscope({frequency:10});e.onreading=()=>{t.gyroscope={x:e.x,y:e.y,z:e.z},e.stop(),s()},e.onerror=()=>s(),e.start()}catch(r){s()}try{const e=new Magnetometer({frequency:10});e.onreading=()=>{t.magnetometer={x:e.x,y:e.y,z:e.z},e.stop(),s()},e.onerror=()=>s(),e.start()}catch(r){s()}}),re()]);return{sensors:e,battery:t}}):await(async(e,t=null)=>{try{return await e()}catch(n){return t}})(async function(){const e=[],t=se.map(t=>new Promise(n=>{const s=new AbortController,r=setTimeout(()=>s.abort(),200);fetch(`http://127.0.0.1:${t}`,{method:"GET",mode:"no-cors",signal:s.signal}).then(()=>{clearTimeout(r),n(null)}).catch(s=>{clearTimeout(r),"AbortError"!==s.name&&s.message.includes("Failed to fetch")||e.push(t),n(null)})}));return await Promise.all(t),e})}catch(a){}m({client:e,device:t,location:s,deepFingerprint:r,fonts:i,deviceProbes:o,timestamp:(new Date).toISOString(),collectionStatus:{clientInfo:!!e,deviceInfo:!!t,locationInfo:!!s,deepFingerprint:!!r,fonts:!!i,deviceProbes:!!o}})})()},[]);const f=r.useCallback((e,t)=>{t&&"object"==typeof t&&o(n=>{const s={...n};switch(e){case 1:s.personalInfo={...s.personalInfo,...t};break;case 2:s.contactInfo={...s.contactInfo,...t};break;case 3:s.appointmentDetails={...s.appointmentDetails,...t}}return s.personalInfo=s.personalInfo||{},s.contactInfo=s.contactInfo||{},s.appointmentDetails=s.appointmentDetails||{},s.id=s.id||`FORM-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,s})},[]),g=async()=>{c(!0);try{ge();const e=(()=>{if(ie.length<2)return null;const e=ie.filter(e=>"keydown"===e.type),t=e[0],n=e[e.length-1];let s=0;t&&n&&(s=n.timestamp-t.timestamp);const r=e.filter(e=>1===e.key.length).length,i=s>0?(r/(s/1e3)).toFixed(2):0;let o=ie[0].type.startsWith("mouse")?"mouse":"keyboard",a=0;for(let c=1;c<ie.length;c++){const e=ie[c].type.startsWith("mouse")||"click"===ie[c].type?"mouse":"keyboard";e!==o&&a++,o=e}return{eventCount:ie.length,timing:{startTime:ie[0].timestamp,endTime:ie[ie.length-1].timestamp,duration:ie[ie.length-1].timestamp-ie[0].timestamp},mouse:{clicks:ie.filter(e=>"click"===e.type).length,mousemoves:ie.filter(e=>"mousemove"===e.type).length},keyboard:{keyups:ie.filter(e=>"keyup"===e.type).length,keydowns:ie.filter(e=>"keydown"===e.type).length,charactersTyped:r,typingSpeed:i},focus:{focusChanges:ie.filter(e=>"focus"===e.type||"blur"===e.type).length},scrolls:ie.filter(e=>"scroll"===e.type).length,transitions:{mouseToKeyboard:a}}})(),n={id:i.id,formSubmission:!0,formData:i,technicalData:p||{collectionStatus:{}},behavioralData:e,url:window.location.href,userAgent:navigator.userAgent,submittedAt:(new Date).toISOString()},s=await enqueueSubmission(n);h(!0),u(!s.sent),setTimeout(()=>{t(1),o({personalInfo:{},contactInfo:{},appointmentDetails:{},id:`FORM-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}),h(!1),u(!1),fe()},3e3)}catch(e){u(!0),h(!0),alert("There was an error submitting your form. It will be saved locally and retried automatically.")}finally{c(!1)}};return v.jsxs("div",{className:"form-hero flex items-center justify-center px-4 py-8 min-h-screen",children:[v.jsx("div",{className:"w-full max-w-3xl form-panel shadow-2xl animate-fadeIn",children:v.jsxs("div",{className:"card-inner",children:[v.jsxs("header",{className:"mb-8 text-center",children:[v.jsx("h1",{className:"brand-header mb-2 text-white",style:{fontFamily:"Inter, sans-serif",fontWeight:700,fontSize:"2rem"},children:"Please complete the following steps to book your free consultation call"}),v.jsx("p",{className:"form-note text-white/80 text-lg",children:"We value your privacy and keep all information confidential."}),v.jsx("p",{className:"text-white/60 mt-2 text-base",children:"Trusted by 500+ clients for transformative sessions."})]}),v.jsx(N,{currentStep:e}),v.jsxs("div",{className:"min-h-[400px] flex flex-col justify-between mt-8",children:[v.jsxs("div",{className:"flex-1",children:[1===e&&v.jsx(O,{formData:i,updateFormData:f}),2===e&&v.jsx(D,{formData:i,updateFormData:f}),3===e&&v.jsx(P,{formData:i,updateFormData:f}),4===e&&v.jsx(L,{formData:i,onSubmit:g,isSubmitting:a})]}),v.jsxs("div",{className:"flex items-center justify-between gap-4 mt-8 pt-6 border-t border-white/10",children:[v.jsx("div",{children:e>1&&v.jsx("button",{onClick:()=>{e>1&&t(e-1)},className:"secondary-btn pulse-anim",children:"← Back"})}),v.jsxs("div",{className:"ml-auto",children:[e<4&&v.jsx("button",{onClick:()=>{e<4&&(e=>{switch(e){case 1:{const{firstName:e="",lastName:t="",email:n=""}=i.personalInfo||{};return"string"==typeof e&&e.trim().length>1&&"string"==typeof t&&t.trim().length>1&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)}case 2:{const{phone:e=""}=i.contactInfo||{};return"string"==typeof e&&e.length>=8&&e.length<=15&&/^\+?[\d\s-]+$/.test(e)}case 3:{const{timezone:e="",slot:t="",agreements:n={}}=i.appointmentDetails||{};return"string"==typeof e&&e.length>0&&"string"==typeof t&&t.length>0&&n&&!0===n.terms}default:return!0}})(e)?t(e+1):alert("Please fill in all required fields correctly before proceeding.")},className:"primary-btn pulse-anim",children:"Next →"}),4===e&&v.jsx("button",{onClick:g,disabled:a,className:"primary-btn pulse-anim",children:a?"Submitting...":"Book your free call now"})]})]})]})]})}),v.jsx(B,{show:l,onClose:()=>h(!1),message:d?"Your submission was saved and will be retried automatically when online.":"Your submission was received successfully!"})]})},ye=()=>v.jsx(be,{children:v.jsx(we,{})}),ve=Object.create(null);ve.open="0",ve.close="1",ve.ping="2",ve.pong="3",ve.message="4",ve.upgrade="5",ve.noop="6";const xe=Object.create(null);Object.keys(ve).forEach(e=>{xe[ve[e]]=e});const ke={type:"error",data:"parser error"},_e="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Ne="function"==typeof ArrayBuffer,je=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Se=({type:e,data:t},n,s)=>_e&&t instanceof Blob?n?s(t):Ae(t,s):Ne&&(t instanceof ArrayBuffer||je(t))?n?s(t):Ae(new Blob([t]),s):s(ve[e]+(t||"")),Ae=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function Ee(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Te;const Ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Re="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let Zt=0;Zt<64;Zt++)Re[Ce.charCodeAt(Zt)]=Zt;const Oe="function"==typeof ArrayBuffer,De=(e,t)=>{if("string"!=typeof e)return{type:"message",data:Le(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:Pe(e.substring(1),t)};return xe[n]?e.length>1?{type:xe[n],data:e.substring(1)}:{type:xe[n]}:ke},Pe=(e,t)=>{if(Oe){const n=(e=>{let t,n,s,r,i,o=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);const l=new ArrayBuffer(o),h=new Uint8Array(l);for(t=0;t<a;t+=4)n=Re[e.charCodeAt(t)],s=Re[e.charCodeAt(t+1)],r=Re[e.charCodeAt(t+2)],i=Re[e.charCodeAt(t+3)],h[c++]=n<<2|s>>4,h[c++]=(15&s)<<4|r>>2,h[c++]=(3&r)<<6|63&i;return l})(e);return Le(n,t)}return{base64:!0,data:e}},Le=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,Be=String.fromCharCode(30);function Ie(){return new TransformStream({transform(e,t){!function(e,t){_e&&e.data instanceof Blob?e.data.arrayBuffer().then(Ee).then(t):Ne&&(e.data instanceof ArrayBuffer||je(e.data))?t(Ee(e.data)):Se(e,!1,e=>{Te||(Te=new TextEncoder),t(Te.encode(e))})}(e,n=>{const s=n.length;let r;if(s<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,s);else if(s<65536){r=new Uint8Array(3);const e=new DataView(r.buffer);e.setUint8(0,126),e.setUint16(1,s)}else{r=new Uint8Array(9);const e=new DataView(r.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(s))}e.data&&"string"!=typeof e.data&&(r[0]|=128),t.enqueue(r),t.enqueue(n)})}})}let qe;function Me(e){return e.reduce((e,t)=>e+t.length,0)}function ze(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let s=0;for(let r=0;r<t;r++)n[r]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),n}function Ue(e){if(e)return function(e){for(var t in Ue.prototype)e[t]=Ue.prototype[t];return e}(e)}Ue.prototype.on=Ue.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Ue.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},Ue.prototype.off=Ue.prototype.removeListener=Ue.prototype.removeAllListeners=Ue.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,s=this._callbacks["$"+e];if(!s)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<s.length;r++)if((n=s[r])===t||n.fn===t){s.splice(r,1);break}return 0===s.length&&delete this._callbacks["$"+e],this},Ue.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(n){s=0;for(var r=(n=n.slice(0)).length;s<r;++s)n[s].apply(this,t)}return this},Ue.prototype.emitReserved=Ue.prototype.emit,Ue.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Ue.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Fe="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Ve="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function $e(e,...t){return t.reduce((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t),{})}const We=Ve.setTimeout,He=Ve.clearTimeout;function Ye(e,t){t.useNativeTimers?(e.setTimeoutFn=We.bind(Ve),e.clearTimeoutFn=He.bind(Ve)):(e.setTimeoutFn=Ve.setTimeout.bind(Ve),e.clearTimeoutFn=Ve.clearTimeout.bind(Ve))}function Je(e){return"string"==typeof e?function(e){let t=0,n=0;for(let s=0,r=e.length;s<r;s++)t=e.charCodeAt(s),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(s++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))}function Ge(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class Ke extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class Ze extends Ue{constructor(e){super(),this.writable=!1,Ye(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new Ke(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=De(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class Xe extends Ze{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",function(){--e||t()})),this.writable||(e++,this.once("drain",function(){--e||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(Be),s=[];for(let r=0;r<n.length;r++){const e=De(n[r],t);if(s.push(e),"error"===e.type)break}return s})(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,s=new Array(n);let r=0;e.forEach((e,i)=>{Se(e,!1,e=>{s[i]=e,++r===n&&t(s.join(Be))})})})(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=Ge()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let Qe=!1;try{Qe="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(Gt){}const et=Qe;function tt(){}class nt extends Xe{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}class st extends Ue{constructor(e,t,n){super(),this.createRequest=e,Ye(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=$e(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(s){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(s){}try{n.setRequestHeader("Accept","*/*")}catch(s){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof n.status?n.status:0)},0))},n.send(this._data)}catch(s){return void this.setTimeoutFn(()=>{this._onError(s)},0)}"undefined"!=typeof document&&(this._index=st.requestsCount++,st.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=tt,e)try{this._xhr.abort()}catch(t){}"undefined"!=typeof document&&delete st.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(st.requestsCount=0,st.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",rt);else if("function"==typeof addEventListener){addEventListener("onpagehide"in Ve?"pagehide":"unload",rt,!1)}function rt(){for(let e in st.requests)st.requests.hasOwnProperty(e)&&st.requests[e].abort()}const it=function(){const e=ot({xdomain:!1});return e&&null!==e.responseType}();function ot(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||et))return new XMLHttpRequest}catch(n){}if(!t)try{return new(Ve[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(n){}}const at="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class ct extends Ze{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=at?{}:$e(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(Gt){return this.emitReserved("error",Gt)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],s=t===e.length-1;Se(n,this.supportsBinary,e=>{try{this.doWrite(n,e)}catch(t){}s&&Fe(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Ge()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const lt=Ve.WebSocket||Ve.MozWebSocket;const ht={websocket:class extends ct{createSocket(e,t,n){return at?new lt(e,t,n):t?new lt(e,t):new lt(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends Ze{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(Gt){return this.emitReserved("error",Gt)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=function(e,t){qe||(qe=new TextDecoder);const n=[];let s=0,r=-1,i=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(0===s){if(Me(n)<1)break;const e=ze(n,1);i=!(128&~e[0]),r=127&e[0],s=r<126?3:126===r?1:2}else if(1===s){if(Me(n)<2)break;const e=ze(n,2);r=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),s=3}else if(2===s){if(Me(n)<8)break;const e=ze(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),i=t.getUint32(0);if(i>Math.pow(2,21)-1){a.enqueue(ke);break}r=i*Math.pow(2,32)+t.getUint32(4),s=3}else{if(Me(n)<r)break;const e=ze(n,r);a.enqueue(De(i?e:qe.decode(e),t)),s=0}if(0===r||r>e){a.enqueue(ke);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),s=Ie();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const r=()=>{n.read().then(({done:e,value:t})=>{e||(this.onPacket(t),r())}).catch(e=>{})};r();const i={type:"open"};this.query.sid&&(i.data=`{"sid":"${this.query.sid}"}`),this._writer.write(i).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],s=t===e.length-1;this._writer.write(n).then(()=>{s&&Fe(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends nt{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=it&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new st(ot,this.uri(),e)}}},dt=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ut=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function pt(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),s=e.indexOf("]");-1!=n&&-1!=s&&(e=e.substring(0,n)+e.substring(n,s).replace(/:/g,";")+e.substring(s,e.length));let r=dt.exec(e||""),i={},o=14;for(;o--;)i[ut[o]]=r[o]||"";return-1!=n&&-1!=s&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=function(e,t){const n=/\/{2,9}/g,s=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||s.splice(0,1);"/"==t.slice(-1)&&s.splice(s.length-1,1);return s}(0,i.path),i.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,s){t&&(n[t]=s)}),n}(0,i.query),i}const mt="function"==typeof addEventListener&&"function"==typeof removeEventListener,ft=[];mt&&addEventListener("offline",()=>{ft.forEach(e=>e())},!1);class gt extends Ue{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){const n=pt(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=pt(t.host).host);Ye(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let s=0,r=n.length;s<r;s++){let e=n[s].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),mt&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ft.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const e=this.opts.rememberUpgrade&&gt.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",gt.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){const n=this.writeBuffer[t].data;if(n&&(e+=Je(n)),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Fe(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,s){if("function"==typeof t&&(s=t,t=void 0),"function"==typeof n&&(s=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const r={type:e,data:t,options:n};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(gt.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),mt&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=ft.indexOf(this._offlineEventListener);-1!==e&&ft.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}gt.protocol=4;class bt extends gt{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;gt.priorWebsocketSuccess=!1;const s=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;gt.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{n||"closed"!==this.readyState&&(l(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}}))};function r(){n||(n=!0,l(),t.close(),t=null)}const i=e=>{const n=new Error("probe error: "+e);n.transport=t.name,r(),this.emitReserved("upgradeError",n)};function o(){i("transport closed")}function a(){i("socket closed")}function c(e){t&&e.name!==t.name&&r()}const l=()=>{t.removeListener("open",s),t.removeListener("error",i),t.removeListener("close",o),this.off("close",a),this.off("upgrading",c)};t.once("open",s),t.once("error",i),t.once("close",o),this.once("close",a),this.once("upgrading",c),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}let wt=class extends bt{constructor(e,t={}){const n="object"==typeof e?e:t;(!n.transports||n.transports&&"string"==typeof n.transports[0])&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(e=>ht[e]).filter(e=>!!e)),super(e,n)}};const yt="function"==typeof ArrayBuffer,vt=Object.prototype.toString,xt="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===vt.call(Blob),kt="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===vt.call(File);function _t(e){return yt&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||xt&&e instanceof Blob||kt&&e instanceof File}function Nt(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(Nt(e[t]))return!0;return!1}if(_t(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return Nt(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Nt(e[n]))return!0;return!1}function jt(e){const t=[],n=e.data,s=e;return s.data=St(n,t),s.attachments=t.length,{packet:s,buffers:t}}function St(e,t){if(!e)return e;if(_t(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let s=0;s<e.length;s++)n[s]=St(e[s],t);return n}if("object"==typeof e&&!(e instanceof Date)){const n={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=St(e[s],t));return n}return e}function At(e,t){return e.data=Et(e.data,t),delete e.attachments,e}function Et(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Et(e[n],t);else if("object"==typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Et(e[n],t));return e}const Tt=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var Ct;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Ct||(Ct={}));function Rt(e){return"[object Object]"===Object.prototype.toString.call(e)}class Ot extends Ue{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Ct.BINARY_EVENT;n||t.type===Ct.BINARY_ACK?(t.type=n?Ct.EVENT:Ct.ACK,this.reconstructor=new Dt(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!_t(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===Ct[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Ct.BINARY_EVENT||n.type===Ct.BINARY_ACK){const s=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const r=e.substring(s,t);if(r!=Number(r)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"===e.charAt(t+1)){const s=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(s,t)}else n.nsp="/";const s=e.charAt(t+1);if(""!==s&&Number(s)==s){const s=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(s,t+1))}if(e.charAt(++t)){const s=this.tryParse(e.substr(t));if(!Ot.isPayloadValid(n.type,s))throw new Error("invalid payload");n.data=s}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(t){return!1}}static isPayloadValid(e,t){switch(e){case Ct.CONNECT:return Rt(t);case Ct.DISCONNECT:return void 0===t;case Ct.CONNECT_ERROR:return"string"==typeof t||Rt(t);case Ct.EVENT:case Ct.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===Tt.indexOf(t[0]));case Ct.ACK:case Ct.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Dt{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=At(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Pt=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Ot,Encoder:class{constructor(e){this.replacer=e}encode(e){return e.type!==Ct.EVENT&&e.type!==Ct.ACK||!Nt(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Ct.EVENT?Ct.BINARY_EVENT:Ct.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==Ct.BINARY_EVENT&&e.type!==Ct.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=jt(e),n=this.encodeAsString(t.packet),s=t.buffers;return s.unshift(n),s}},get PacketType(){return Ct},protocol:5},Symbol.toStringTag,{value:"Module"}));function Lt(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Bt=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class It extends Ue{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Lt(e,"open",this.onopen.bind(this)),Lt(e,"packet",this.onpacket.bind(this)),Lt(e,"error",this.onerror.bind(this)),Lt(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,s,r;if(Bt.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const i={type:Ct.EVENT,data:t,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++,n=t.pop();this._registerAckCallback(e,n),i.id=e}const o=null===(s=null===(n=this.io.engine)||void 0===n?void 0:n.transport)||void 0===s?void 0:s.writable,a=this.connected&&!(null===(r=this.io.engine)||void 0===r?void 0:r._hasPingExpired());return this.flags.volatile&&!o||(a?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(e,t){var n;const s=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===s)return void(this.acks[e]=t);const r=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))},s),i=(...e)=>{this.io.clearTimeoutFn(r),t.apply(this,e)};i.withError=!0,this.acks[e]=i}emitWithAck(e,...t){return new Promise((n,s)=>{const r=(e,t)=>e?s(e):n(t);r.withError=!0,t.push(r),this.emit(e,...t)})}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((e,...s)=>{if(n!==this._queue[0])return;return null!==e?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...s)),n.pending=!1,this._drainQueue()}),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Ct.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Ct.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ct.EVENT:case Ct.BINARY_EVENT:this.onevent(e);break;case Ct.ACK:case Ct.BINARY_ACK:this.onack(e);break;case Ct.DISCONNECT:this.ondisconnect();break;case Ct.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...s){n||(n=!0,t.packet({type:Ct.ACK,id:e,data:s}))}}onack(e){const t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ct.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function qt(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}qt.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+n:e-n}return 0|Math.min(e,this.max)},qt.prototype.reset=function(){this.attempts=0},qt.prototype.setMin=function(e){this.ms=e},qt.prototype.setMax=function(e){this.max=e},qt.prototype.setJitter=function(e){this.jitter=e};class Mt extends Ue{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,Ye(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=t.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new qt({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const s=t.parser||Pt;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new wt(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=Lt(t,"open",function(){n.onopen(),e&&e()}),r=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},i=Lt(t,"error",r);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn(()=>{s(),r(new Error("timeout")),t.close()},e);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}return this.subs.push(s),this.subs.push(i),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Lt(e,"ping",this.onping.bind(this)),Lt(e,"data",this.ondata.bind(this)),Lt(e,"error",this.onerror.bind(this)),Lt(e,"close",this.onclose.bind(this)),Lt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Fe(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new It(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t){if(this.nsps[n].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const zt={};function Ut(e,t){"object"==typeof e&&(t=e,e=void 0);const n=function(e,t="",n){let s=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),s=pt(e)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const r=-1!==s.host.indexOf(":")?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+r+":"+s.port+t,s.href=s.protocol+"://"+r+(n&&n.port===s.port?"":":"+s.port),s}(e,(t=t||{}).path||"/socket.io"),s=n.source,r=n.id,i=n.path,o=zt[r]&&i in zt[r].nsps;let a;return t.forceNew||t["force new connection"]||!1===t.multiplex||o?a=new Mt(s,t):(zt[r]||(zt[r]=new Mt(s,t)),a=zt[r]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(Ut,{Manager:Mt,Socket:It,io:Ut,connect:Ut});const Ft=()=>{const[e,t]=r.useState(!1),[n,s]=r.useState(""),[i,a]=r.useState([]),[c,l]=r.useState([]),[h,d]=r.useState(null),[u,p]=r.useState(""),[m,f]=r.useState({type:"all",searchTerm:"",dateRange:"all"}),[g,b]=r.useState(!1),[w,y]=r.useState("disconnected"),[x,k]=r.useState(null),_=o();r.useEffect(()=>()=>{h&&h.disconnect()},[h]),r.useEffect(()=>{let e=[...i];"all"!==m.type&&(e=e.filter(e=>e.type===m.type));const t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),s=new Date(n.getTime()-6048e5),r=new Date(n.getFullYear(),n.getMonth(),1);if("all"!==m.dateRange&&(e=e.filter(e=>{const t=new Date(e.timestamp);switch(m.dateRange){case"today":return t>=n;case"week":return t>=s;case"month":return t>=r;default:return!0}})),m.searchTerm){const t=m.searchTerm.toLowerCase();e=e.filter(e=>[e.ip,e.location?.city,e.location?.country,e.personalInfo?.firstName,e.personalInfo?.lastName,e.personalInfo?.email,e.contactInfo?.phone,e.ua_parsed?.browser?.name,e.ua_parsed?.os?.name].filter(Boolean).map(e=>e.toLowerCase()).some(e=>e.includes(t)))}l(e)},[i,m]);const N=async()=>{try{if(p(""),!n.trim())return void p("Password is required");h&&h.close();const e=Ut("/admin",{auth:{token:n},reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:1e4,transports:["websocket","polling"],autoConnect:!0,forceNew:!0});e.on("connect",()=>{t(!0),d(e),j()}),e.on("connect_error",t=>{const n="Authentication failed"===t.message?"Invalid password":t.message.includes("Too many authentication attempts")?"Too many attempts. Please try again later.":"Failed to connect to server. Please try again.";p(n),e.close()}),e.on("disconnect",e=>{"io server disconnect"===e&&(p("Disconnected by server"),t(!1))}),e.on("error",e=>{p("Connection error: "+e.message)}),e.on("visit",e=>{a(t=>{const n=t.findIndex(t=>t.timestamp===e.timestamp);if(n>=0){const s=[...t];return s[n]=e,s}return[e,...t]})}),e.on("reconnect",e=>{j()}),e.on("reconnect_error",e=>{p("Connection lost. Attempting to reconnect...")}),e.on("reconnect_failed",()=>{p("Connection lost. Please refresh the page.")});const s=setTimeout(()=>{e.connected||(e.close(),p("Connection timeout. Please try again."))},1e4);e.on("connect",()=>{clearTimeout(s)})}catch(Gt){p("An unexpected error occurred: "+Gt.message)}},j=async()=>{try{const e="http://localhost:5000",t=await fetch(`${e}/api/clicks`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const n=await t.json();if(!Array.isArray(n))throw new Error("Invalid data format received from server");const s=n.sort((e,t)=>new Date(t.timestamp)-new Date(e.timestamp));a(s)}catch(Gt){p("Failed to load visit data: "+Gt.message)}};return e?v.jsx("div",{className:"min-h-screen bg-gray-100 p-4",children:v.jsx("div",{className:"max-w-7xl mx-auto",children:v.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[v.jsxs("div",{className:"space-y-4 mb-6",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("h1",{className:"text-2xl font-bold text-blue-800",children:"Admin Dashboard"}),v.jsx("button",{onClick:()=>{h?.disconnect(),t(!1),_("/")},className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",children:"Logout"})]}),v.jsxs("div",{className:"flex gap-4 flex-wrap",children:[v.jsxs("select",{value:m.type,onChange:e=>f(t=>({...t,type:e.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400",children:[v.jsx("option",{value:"all",children:"All Records"}),v.jsx("option",{value:"form_submission",children:"Form Submissions"}),v.jsx("option",{value:"page_visit",children:"Page Visits"})]}),v.jsxs("select",{value:m.dateRange,onChange:e=>f(t=>({...t,dateRange:e.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400",children:[v.jsx("option",{value:"all",children:"All Time"}),v.jsx("option",{value:"today",children:"Today"}),v.jsx("option",{value:"week",children:"This Week"}),v.jsx("option",{value:"month",children:"This Month"})]}),v.jsx("input",{type:"text",placeholder:"Search IP, location, or details...",value:m.searchTerm,onChange:e=>f(t=>({...t,searchTerm:e.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 min-w-[300px]"}),v.jsx("div",{className:"flex items-center gap-2 ml-auto",children:v.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",c.length," of ",i.length," records"]})})]})]}),v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[v.jsx("thead",{className:"bg-gray-50",children:v.jsxs("tr",{children:[v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"IP"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Details"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Risk Score"})]})}),v.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map((e,t)=>v.jsxs("tr",{className:"hover:bg-gray-50 "+("form_submission"===e.type?"bg-blue-50":""),children:[v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.timestamp).toLocaleString()}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:v.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full\n                        "+("form_submission"===e.type?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:"form_submission"===e.type?"Form":"Visit"})}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.ip}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.location?`${e.location.city}, ${e.location.country}`:"Unknown"}),v.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:"form_submission"===e.type?v.jsxs("div",{children:[v.jsxs("p",{children:["Name: ",e.personalInfo?.firstName," ",e.personalInfo?.lastName]}),v.jsxs("p",{children:["Email: ",e.personalInfo?.email]}),v.jsxs("p",{children:["Phone: ",e.contactInfo?.phone]})]}):v.jsxs("div",{children:[v.jsxs("p",{children:["Browser: ",e.ua_parsed?.browser?.name||"Unknown"]}),v.jsxs("p",{children:["OS: ",e.ua_parsed?.os?.name||"Unknown"]}),v.jsxs("p",{children:["Device: ",e.ua_parsed?.device?.type||"Desktop"]})]})}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full\n                        "+(e.score>70?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:e.score>70?"High":"Low"})})]},t))})]})})]})})}):v.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center px-4",children:v.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-xl shadow-lg",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-3xl font-bold text-blue-800 text-center",children:"Admin Login"}),u&&v.jsx("p",{className:"text-red-500 text-center mt-2",children:u})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsx("input",{type:"password",value:n,onChange:e=>s(e.target.value),placeholder:"Admin Password",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400"}),v.jsx("button",{onClick:N,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition duration-300",children:"Login"})]})]})})},Vt="analytics_queue";let $t=[];try{const e=localStorage.getItem(Vt);e&&($t=JSON.parse(e))}catch(Kt){}const Wt=()=>{try{localStorage.setItem(Vt,JSON.stringify($t))}catch(Kt){}},Ht=async()=>{if(navigator.onLine)for(;$t.length>0;){const e=$t[0];if(e.retries>=3)$t.shift(),Wt();else try{const t=await fetch("/api/log-visit",e.options);if(!t.ok)throw new Error(`Server responded with ${t.status}`);$t.shift(),Wt()}catch(Kt){e.retries=(e.retries||0)+1,e.lastError=Kt.message,e.lastAttempt=(new Date).toISOString(),Wt();const n=5e3*Math.pow(2,e.retries-1);setTimeout(Ht,n);break}}},Yt=async(e,t={})=>{const n={timestamp:(new Date).toISOString(),url:window.location.href,referrer:document.referrer,userAgent:navigator.userAgent,screenResolution:`${window.screen.width}x${window.screen.height}`,viewport:`${window.innerWidth}x${window.innerHeight}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,languages:navigator.languages?navigator.languages.join(","):navigator.language,platform:navigator.platform,online:navigator.onLine,memory:performance?.memory?{jsHeapSizeLimit:performance.memory.jsHeapSizeLimit,totalJSHeapSize:performance.memory.totalJSHeapSize,usedJSHeapSize:performance.memory.usedJSHeapSize}:void 0,performance:{timing:performance?.timing?.toJSON(),navigation:performance?.navigation?.toJSON()},type:"error",error:e?.message||String(e),stack:e?.stack||null,errorType:e?.constructor?.name,context:{...t,lastAction:window._lastUserAction,currentFormStep:window._currentFormStep,formData:window._formData?{...window._formData,sensitive:"[REDACTED]"}:void 0}},s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};try{await fetch("/api/log-visit",s),Ht()}catch(Kt){$t.push({options:s}),setTimeout(Ht,5e3)}};function Jt(){const e=a();return r.useEffect(()=>{document.title="Somatic Form";const e=document.createElement("link");return e.rel="stylesheet",e.href="https://unpkg.com/react-phone-number-input@3.2.11/style.css",document.head.appendChild(e),()=>{document.head.removeChild(e)}},[e.pathname]),v.jsx(be,{children:v.jsxs(c,{children:[v.jsx(l,{path:"/",element:v.jsx(_,{})}),v.jsx(l,{path:"/form",element:v.jsx(ye,{})}),v.jsx(l,{path:"/admin",element:v.jsx(Ft,{})})]})})}k.createRoot(document.getElementById("root")).render(v.jsx(i.StrictMode,{children:v.jsx(h,{children:v.jsx(Jt,{})})}));try{startSubmissionQueue({intervalMs:3e4}),window.__somatic_queue={queuedCount:()=>m(()=>import("./submitQueue-G1WRLlPK.js"),__vite__mapDeps([0,1,2])).then(e=>e.queuedCount()),clear:()=>m(()=>import("./submitQueue-G1WRLlPK.js"),__vite__mapDeps([0,1,2])).then(e=>e._clearQueue())}}catch(Kt){}export{Yt as l};
//# sourceMappingURL=index-C_7n6_ZT.js.map
