{"version":3,"mappings":"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","names":["jsxRuntimeModule","exports","f","require$$0","k","Symbol","for","l","m","Object","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","ref","__self","__source","q","c","a","g","b","d","e","h","call","defaultProps","$$typeof","type","props","_owner","current","reactJsxRuntime_production_min","jsx","jsxs","client","createRoot","hydrateRoot","LandingPage","className","children","Link","to","ProgressBar","currentStep","style","width","map","step","EMAIL_REGEX","PHONE_REGEX","DISPOSABLE_DOMAINS","validatePhone","phone","digits","replace","length","test","startsWith","validateRequired","value","fieldName","options","minLength","maxLength","pattern","customValidation","trim","strValue","String","customError","getFieldError","email","includes","local","domain","split","toLowerCase","validateEmail","LoadingSpinner","animation","fill","viewBox","cx","cy","r","stroke","strokeWidth","Step1","formData","updateFormData","formState","setFormState","useState","firstName","personalInfo","lastName","errors","setErrors","touched","setTouched","isValidating","setIsValidating","useEffect","handleChange","async","name","target","prev","setTimeout","handleBlur","onChange","onBlur","placeholder","Step2","setLocal","contactInfo","message","isVip","PhoneInput","international","defaultCountry","rows","id","checked","htmlFor","Step3","timezone","appointmentDetails","slot","agreements","terms","handleSelectChange","handleSelectBlur","newAgreements","Step4","onSubmit","isSubmitting","onClick","disabled","SuccessNotification","show","onClose","duration","progress","setProgress","interval","steps","timer","setInterval","clearInterval","role","strokeLinecap","strokeLinejoin","fillRule","clipRule","propTypes","PropTypes","bool","isRequired","func","string","number","PersonalInfo","shape","ContactInfo","AppointmentDetails","FormData","detectWebRTC","ips","Promise","resolve","Set","pc","window","RTCPeerConnection","iceServers","createDataChannel","onicecandidate","event","candidate","close","Array","from","ip","has","add","createOffer","then","offer","setLocalDescription","catch","getLocalIPs","publicIPs","filter","endsWith","hasIPMismatch","error","object","device","location","timestamp","collectionStatus","clientInfo","deviceInfo","locationInfo","getClientInfo","vpnFingerprints","fingerprints","webRTC","screen","userAgent","canvas","plugins","webRTCResult","tz","Intl","DateTimeFormat","resolvedOptions","timeZone","height","ua","navigator","document","createElement","ctx","getContext","textBaseline","font","fillStyle","fillRect","fillText","dataURL","toDataURL","score","values","Boolean","isSuspicious","checkVPNFingerprints","platform","vendor","language","languages","doNotTrack","cookieEnabled","colorDepth","pixelRatio","devicePixelRatio","browser","product","appName","appVersion","hardwareConcurrency","maxTouchPoints","pdfViewerEnabled","network","connectionType","connection","effectiveType","downlink","rtt","saveData","vpn","webrtc","Date","toISOString","undefined","FUNC_TYPE","UNDEF_TYPE","OBJ_TYPE","STR_TYPE","MAJOR","MODEL","NAME","TYPE","VENDOR","VERSION","ARCHITECTURE","CONSOLE","MOBILE","TABLET","SMARTTV","WEARABLE","EMBEDDED","AMAZON","APPLE","ASUS","BLACKBERRY","BROWSER","CHROME","FIREFOX","GOOGLE","HUAWEI","LG","MICROSOFT","MOTOROLA","OPERA","SAMSUNG","SHARP","SONY","XIAOMI","ZEBRA","FACEBOOK","CHROMIUM_OS","MAC_OS","enumerize","arr","enums","i","toUpperCase","str1","str2","lowerize","indexOf","str","len","substring","rgxMapper","arrays","j","matches","match","regex","exec","this","strMapper","windowsVersionMap","ME","XP","Vista","RT","regexes","cpu","engine","EDGE","os","UAParser","extensions","getResult","_navigator","_ua","_uach","userAgentData","_rgxmap","mergedRegexes","concat","extend","_isSelfNav","getBrowser","version","_browser","brave","isBrave","getCPU","_cpu","getDevice","_device","mobile","standalone","getEngine","_engine","getOS","_os","getUA","setUA","CPU","DEVICE","ENGINE","OS","module","$","jQuery","Zepto","parser","get","set","result","prop","safe","fn","fallback","context","generateFingerprints","data","system","locale","features","webGL","join","subtle","base64","hash","crypto","TextEncoder","buf","encode","digest","Uint8Array","toString","padStart","substr","btoa","unescape","encodeURIComponent","charCodeAt","Math","abs","now","random","slice","getDeviceFingerprint","browserInfo","clientHints","brands","brand","engineVersion","getBrowserInfo","screenInfo","getOrientation","orientation","angle","availWidth","availHeight","addEventListener","getScreenInfo","memoryInfo","memory","deviceMemory","jsHeapSizeLimit","performance","totalJSHeapSize","usedJSHeapSize","timing","loadEventEnd","navigationStart","domInteractive","domContentLoaded","domContentLoadedEventEnd","firstPaint","getEntriesByType","find","entry","startTime","gpuMemory","gl","maxTextureSize","getParameter","MAX_TEXTURE_SIZE","maxViewportDims","MAX_VIEWPORT_DIMS","maxRenderbufferSize","MAX_RENDERBUFFER_SIZE","ext","getExtension","gpuVendor","UNMASKED_VENDOR_WEBGL","gpuRenderer","UNMASKED_RENDERER_WEBGL","getDeviceMemory","deviceData","oscpu","architecture","windows","mac","linux","ios","android","model","touch","msMaxTouchPoints","battery","getBattery","mediaDevices","keys","permissions","timezoneOffset","getTimezoneOffset","dateFormat","cookies","localStorage","setItem","getItem","removeItem","sessionStorage","webWorkers","Worker","URL","createObjectURL","Blob","serviceWorkers","notifications","geolocation","bluetooth","usb","nfc","info","bandwidth","start","img","Image","src","onload","end","onerror","latency","fetch","online","onLine","canvasFingerprint","txt","canvasHash","otherFingerprints","all","audioFingerprint","audioCtx","AudioContext","webkitAudioContext","oscillator","createOscillator","analyser","createAnalyser","connect","frequency","setValueAtTime","currentTime","dataArray","frequencyBinCount","getByteFrequencyData","audioHash","primary","audio","composite","GEOLOCATION_OPTIONS","enableHighAccuracy","timeout","maximumAge","getLocation","browserLocation","ipLocation","reject","getCurrentPosition","position","source","coords","latitude","longitude","accuracy","altitude","altitudeAccuracy","heading","speed","code","Error","response","ok","json","getIpLocation","locationMismatch","safeExecute","defaultValue","getDeepFingerprint","voices","webgl","codecs","OfflineAudioContext","webkitOfflineAudioContext","compressor","createDynamicsCompressor","forEach","item","destination","startRendering","oncomplete","buffer","renderedBuffer","getChannelData","fingerprint","synth","speechSynthesis","getVoices","v","lang","onvoiceschanged","supported","debugInfo","renderer","shadingLanguageVersion","SHADING_LANGUAGE_VERSION","supportedExtensions","getSupportedExtensions","mediaSupport","media","codec","support","canPlayType","fontList","portsToScan","getBatteryStatus","level","charging","events","isTracking","recordEvent","record","x","clientX","y","clientY","tagName","scrollTop","scrollY","scrollLeft","scrollX","push","handleMouseMove","handleKeyDown","handleKeyUp","handleClick","handleFocus","handleScroll","startTracking","passive","stopTracking","removeEventListener","ErrorBoundary","React","Component","constructor","super","state","hasError","errorInfo","isRecovering","retryCount","getDerivedStateFromError","componentDidCatch","setState","logError","errorData","stack","componentStack","url","href","viewport","innerWidth","innerHeight","method","headers","body","JSON","stringify","recoveryAttempted","handleRetry","onRetry","handleReset","clear","reload","render","xmlns","MultiStepForm","setCurrentStep","setError","setFormData","setIsSubmitting","showSuccess","setShowSuccess","wasQueued","setWasQueued","technicalData","setTechnicalData","deepFingerprint","fonts","deviceProbes","baseFonts","getElementsByTagName","s","fontSize","innerHTML","defaultWidths","fontFamily","appendChild","offsetWidth","removeChild","detected","baseFont","sensors","sensorData","accelerometer","gyroscope","magnetometer","sensorsChecked","onComplete","Accelerometer","onreading","z","stop","Gyroscope","Magnetometer","openPorts","promises","port","controller","AbortController","timeoutId","abort","mode","signal","clearTimeout","err","collectTechnicalData","useCallback","newData","handleSubmit","behavioralData","keydownEvents","firstKeydown","lastKeydown","typingDuration","charactersTyped","typingSpeed","toFixed","lastEventType","transitions","currentEventType","eventCount","endTime","mouse","clicks","mousemoves","keyboard","keyups","keydowns","focus","focusChanges","scrolls","mouseToKeyboard","getBehavioralData","payload","formSubmission","submittedAt","enqueueSubmission","sent","alert","fontWeight","validateStep","WrappedMultiStepForm","PACKET_TYPES","create","PACKET_TYPES_REVERSE","ERROR_PACKET","withNativeBlob","withNativeArrayBuffer","ArrayBuffer","isView","obj","encodePacket","supportsBinary","callback","encodeBlobAsBase64","fileReader","FileReader","content","readAsDataURL","toArray","byteOffset","byteLength","TEXT_ENCODER","chars","lookup","decodePacket","encodedPacket","binaryType","mapBinary","charAt","decodeBase64Packet","decoded","encoded1","encoded2","encoded3","encoded4","bufferLength","arraybuffer","bytes","decode","SEPARATOR","fromCharCode","createPacketEncoderStream","TransformStream","transform","packet","arrayBuffer","encoded","encodePacketToBinary","payloadLength","header","DataView","setUint8","view","setUint16","setBigUint64","BigInt","enqueue","TEXT_DECODER","totalLength","chunks","reduce","acc","chunk","concatChunks","size","shift","Emitter","mixin","on","_callbacks","once","off","apply","arguments","removeListener","removeAllListeners","cb","callbacks","splice","emit","args","emitReserved","listeners","hasListeners","nextTick","setTimeoutFn","globalThisShim","self","Function","pick","attr","NATIVE_SET_TIMEOUT","globalThis","NATIVE_CLEAR_TIMEOUT","installTimerFunctions","opts","useNativeTimers","bind","clearTimeoutFn","utf8Length","ceil","randomString","TransportError","reason","description","Transport","writable","query","socket","forceBase64","onError","open","readyState","doOpen","doClose","send","packets","write","onOpen","onData","onPacket","details","pause","onPause","createUri","schema","_hostname","_port","path","_query","hostname","secure","Number","encodedQuery","Polling","_polling","_poll","total","doPoll","encodedPayload","encodedPackets","decodedPacket","decodePayload","count","encodePayload","doWrite","uri","timestampRequests","timestampParam","sid","b64","XMLHttpRequest","hasCORS","empty","BaseXHR","isSSL","protocol","xd","req","request","xhrStatus","pollXhr","Request","createRequest","_opts","_method","_uri","_data","_create","_a","xdomain","xhr","_xhr","extraHeaders","setDisableHeaderCheck","setRequestHeader","cookieJar","addCookies","withCredentials","requestTimeout","onreadystatechange","parseCookies","getResponseHeader","status","_onLoad","_onError","_index","requestsCount","requests","_cleanup","fromError","responseText","attachEvent","unloadHandler","hasXHR2","newRequest","responseType","isReactNative","BaseWS","protocols","ws","createSocket","addEventListeners","onopen","autoUnref","_socket","unref","onclose","closeEvent","onmessage","ev","lastPacket","WebSocketCtor","WebSocket","MozWebSocket","transports","websocket","_packet","webtransport","_transport","WebTransport","transportOptions","closed","ready","createBidirectionalStream","stream","decoderStream","maxPayload","TextDecoder","expectedLength","isBinary","headerArray","getUint16","getUint32","pow","createPacketDecoderStream","MAX_SAFE_INTEGER","reader","readable","pipeThrough","getReader","encoderStream","pipeTo","_writer","getWriter","read","done","polling","assign","re","parts","parse","host","authority","ipv6uri","pathNames","regx","names","queryKey","$0","$1","$2","withEventListeners","OFFLINE_EVENT_LISTENERS","listener","SocketWithoutUpgrade","writeBuffer","_prevBufferLen","_pingInterval","_pingTimeout","_maxPayload","_pingTimeoutTime","Infinity","parsedUri","_transportsByName","t","transportName","agent","upgrade","rememberUpgrade","addTrailingSlash","rejectUnauthorized","perMessageDeflate","threshold","closeOnBeforeunload","qs","qry","pairs","pair","decodeURIComponent","_beforeunloadEventListener","transport","_offlineEventListener","_onClose","_cookieJar","createCookieJar","_open","createTransport","EIO","priorWebsocketSuccess","setTransport","_onDrain","_onPacket","flush","onHandshake","_sendPacket","_resetPingTimeout","pingInterval","pingTimeout","_pingTimeoutTimer","delay","upgrading","_getWritablePackets","payloadSize","_hasPingExpired","hasExpired","msg","compress","cleanupAndClose","waitForUpgrade","tryAllTransports","SocketWithUpgrade","_upgrades","_probe","failed","onTransportOpen","cleanup","freezeTransport","onTransportClose","onupgrade","_filterUpgrades","upgrades","filteredUpgrades","o","DEFAULT_TRANSPORTS","withNativeFile","File","hasBinary","toJSON","isArray","deconstructPacket","buffers","packetData","pack","_deconstructPacket","attachments","_placeholder","num","reconstructPacket","_reconstructPacket","RESERVED_EVENTS","PacketType","isObject","Decoder","reviver","reconstructor","decodeString","isBinaryEvent","BINARY_EVENT","BINARY_ACK","EVENT","ACK","BinaryReconstructor","takeBinaryData","nsp","next","tryParse","isPayloadValid","CONNECT","DISCONNECT","CONNECT_ERROR","destroy","finishedReconstruction","reconPack","binData","replacer","encodeAsString","encodeAsBinary","deconstruction","unshift","freeze","connect_error","disconnect","disconnecting","newListener","Socket","io","connected","recovered","receiveBuffer","sendBuffer","_queue","_queueSeq","ids","acks","flags","auth","_autoConnect","disconnected","subEvents","subs","onpacket","active","_readyState","_b","_c","retries","fromQueue","volatile","_addToQueue","ack","pop","_registerAckCallback","isTransportWritable","isConnected","notifyOutgoingListeners","ackTimeout","withError","emitWithAck","arg1","arg2","tryCount","pending","responseArgs","_drainQueue","force","_sendConnectPacket","_pid","pid","offset","_lastOffset","_clearAcks","some","onconnect","onevent","onack","ondisconnect","emitEvent","_anyListeners","emitBuffered","subDestroy","onAny","prependAny","offAny","listenersAny","onAnyOutgoing","_anyOutgoingListeners","prependAnyOutgoing","offAnyOutgoing","listenersAnyOutgoing","Backoff","ms","min","max","factor","jitter","attempts","rand","deviation","floor","reset","setMin","setMax","setJitter","Manager","nsps","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","_parser","encoder","Encoder","decoder","autoConnect","_reconnection","skipReconnect","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","_reconnecting","reconnect","Engine","openSubDestroy","errorSub","onping","ondata","ondecoded","_destroy","_close","onreconnect","attempt","cache","parsed","loc","sameNamespace","forceNew","multiplex","AdminPanel","isAuthenticated","setIsAuthenticated","password","setPassword","visits","setVisits","filteredVisits","setFilteredVisits","setSocket","filters","setFilters","searchTerm","dateRange","loading","setLoading","connectionStatus","setConnectionStatus","lastUpdate","setLastUpdate","navigate","useNavigate","filtered","visit","today","getFullYear","getMonth","getDate","week","getTime","month","visitDate","searchLower","city","country","ua_parsed","field","handleLogin","socketInstance","token","fetchVisits","errorMessage","newVisit","existingIndex","findIndex","updated","apiBase","sortedVisits","sort","index","toLocaleString","QUEUE_STORAGE_KEY","logQueue","savedQueue","saveQueue","flushLogQueue","lastError","lastAttempt","referrer","screenResolution","navigation","errorType","lastAction","_lastUserAction","currentFormStep","_currentFormStep","_formData","sensitive","App","useLocation","title","link","rel","head","pathname","Routes","Route","element","ReactDOM","getElementById","StrictMode","Router","startSubmissionQueue","intervalMs","__somatic_queue","queuedCount","import","__VITE_PRELOAD__","_clearQueue"],"ignoreList":[0,1,2,16,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52],"sources":["../../node_modules/react/jsx-runtime.js","../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react-dom/client.js","../../src/pages/LandingPage.jsx","../../src/components/ProgressBar.jsx","../../src/utils/validation.js","../../src/utils/animations.jsx","../../src/components/Step1.jsx","../../src/components/Step2.jsx","../../src/components/Step3.jsx","../../src/components/Step4.jsx","../../src/components/SuccessNotification.jsx","../../src/types/formTypes.js","../../src/utils/webrtcDetect.js","../../src/types/componentProps.js","../../src/utils/vpnDetection.js","../../node_modules/ua-parser-js/src/ua-parser.js","../../src/utils/deviceData.js","../../src/utils/geolocation.js","../../src/utils/deepFingerprint.js","../../src/utils/fontFingerprint.js","../../src/utils/networkProbes.js","../../src/utils/mobileProbes.js","../../src/utils/behavioralMetrics.js","../../src/components/ErrorBoundary.jsx","../../src/pages/MultiStepForm.jsx","../../node_modules/engine.io-parser/build/esm/commons.js","../../node_modules/engine.io-parser/build/esm/encodePacket.browser.js","../../node_modules/engine.io-parser/build/esm/contrib/base64-arraybuffer.js","../../node_modules/engine.io-parser/build/esm/decodePacket.browser.js","../../node_modules/engine.io-parser/build/esm/index.js","../../node_modules/@socket.io/component-emitter/lib/esm/index.js","../../node_modules/engine.io-client/build/esm/globals.js","../../node_modules/engine.io-client/build/esm/util.js","../../node_modules/engine.io-client/build/esm/transport.js","../../node_modules/engine.io-client/build/esm/contrib/parseqs.js","../../node_modules/engine.io-client/build/esm/transports/polling.js","../../node_modules/engine.io-client/build/esm/contrib/has-cors.js","../../node_modules/engine.io-client/build/esm/transports/polling-xhr.js","../../node_modules/engine.io-client/build/esm/transports/websocket.js","../../node_modules/engine.io-client/build/esm/transports/index.js","../../node_modules/engine.io-client/build/esm/transports/webtransport.js","../../node_modules/engine.io-client/build/esm/contrib/parseuri.js","../../node_modules/engine.io-client/build/esm/socket.js","../../node_modules/socket.io-parser/build/esm/is-binary.js","../../node_modules/socket.io-parser/build/esm/binary.js","../../node_modules/socket.io-parser/build/esm/index.js","../../node_modules/socket.io-client/build/esm/on.js","../../node_modules/socket.io-client/build/esm/socket.js","../../node_modules/socket.io-client/build/esm/contrib/backo2.js","../../node_modules/socket.io-client/build/esm/manager.js","../../node_modules/socket.io-client/build/esm/index.js","../../node_modules/socket.io-client/build/esm/url.js","../../src/pages/AdminPanel.jsx","../../src/utils/analytics.js","../../src/App.jsx","../../src/main.jsx"],"sourcesContent":["'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","import { Link } from 'react-router-dom';\n\nconst LandingPage = () => {\n  return (\n    <div className=\"form-hero flex flex-col justify-center items-center px-4\">\n  <div className=\"form-panel max-w-4xl w-full rounded-lg p-8 text-center fade-in\">\n    <h1 className=\"text-4xl sm:text-5xl font-bold mb-4 font-inter\">Somatic Client Form</h1>\n    <p className=\"text-lg sm:text-xl mb-6 italic\">Please complete the following steps to book your free consultation call.</p>\n    <p className=\"text-sm mb-8\">Trusted by 500+ clients for transformative sessions.</p>\n    <Link to=\"/form\">\n      <button className=\"primary-btn text-lg mt-8\">\n        Book your free call now\n      </button>\n    </Link>\n  </div>\n</div>\n\n  );\n};\n\nexport default LandingPage;","const ProgressBar = ({ currentStep }) => {\n  return (\n    <div className=\"flex justify-between mb-12 relative\">\n      {/* Connecting line */}\n      <div className=\"absolute top-5 left-0 right-0 h-0.5 bg-gray-200\" />\n      <div\n        className=\"absolute top-5 left-0 h-0.5 bg-blue-500 transition-all duration-500 ease-in-out\"\n        style={{ width: `${((currentStep - 1) / 3) * 100}%` }}\n      />\n      \n      {[1, 2, 3, 4].map((step) => (\n        <div key={step} className=\"flex-1 text-center relative z-10\">\n          <div\n            className={`w-12 h-12 mx-auto rounded-full text-lg flex items-center justify-center transition-all duration-300 transform\n              ${step < currentStep \n                ? 'bg-blue-600 text-white scale-110 shadow-lg' \n                : step === currentStep \n                  ? 'bg-blue-400 text-white scale-110 shadow-lg ring-4 ring-blue-100' \n                  : 'bg-gray-300 text-gray-600'\n              }\n              ${step <= currentStep ? 'hover:scale-125' : 'hover:scale-105'}\n            `}\n          >\n            {step < currentStep ? '✔' : step}\n          </div>\n          <p className={`text-sm mt-3 font-inter transition-colors duration-300 \n            ${step <= currentStep ? 'text-blue-800 font-semibold' : 'text-gray-500'}`}>\n            Step {step}\n          </p>\n          {step === currentStep && (\n            <div className=\"absolute -bottom-6 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-blue-400 rounded-full animate-bounce\" />\n          )}\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default ProgressBar;","// Form validation utilities with enhanced patterns\nconst EMAIL_REGEX = /^(?!.*\\.{2})[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\nconst PHONE_REGEX = /^\\+?[1-9]\\d{1,14}$/; // E.164 format\nconst NAME_REGEX = /^[a-zA-Z\\u00C0-\\u024F\\u1E00-\\u1EFF\\s'-]+$/; // Unicode letters, spaces, hyphens, apostrophes\nconst MESSAGE_MAX_LENGTH = 1000;\n\n// Common disposable email domains\nconst DISPOSABLE_DOMAINS = [\n  'tempmail.com',\n  'throwawaymail.com',\n  // Add more as needed\n];\n\n// Profanity/spam check - basic implementation\nconst containsProfanity = (text) => {\n  const profanityList = ['spam', 'test', 'fuck', 'shit'];\n  return profanityList.some(word => \n    text.toLowerCase().includes(word.toLowerCase())\n  );\n};\n\nexport const validateEmail = (email) => {\n  if (!email) return 'Email is required';\n  if (email.length > 254) return 'Email address is too long';\n  if (!EMAIL_REGEX.test(email)) {\n    if (!email.includes('@')) return 'Email address must contain an @ symbol';\n    if (!email.includes('.')) return 'Email address must contain a domain';\n    return 'Please enter a valid email address';\n  }\n  \n  const [local, domain] = email.split('@');\n  if (local.length > 64) return 'The part before @ is too long';\n  if (domain.length > 255) return 'The domain name is too long';\n  \n  if (DISPOSABLE_DOMAINS.includes(domain.toLowerCase())) {\n    return 'Please use a non-disposable email address';\n  }\n\n  return '';\n};\n\nexport const validatePhone = (phone) => {\n  if (!phone) return 'Phone number is required';\n  \n  // Remove all non-digit characters for validation\n  const digits = phone.replace(/\\D/g, '');\n  \n  if (digits.length < 8) return 'Phone number must have at least 8 digits';\n  if (digits.length > 15) return 'Phone number must have at most 15 digits';\n  \n  if (!PHONE_REGEX.test(digits)) {\n    if (digits.startsWith('0')) return 'Phone number should not start with 0';\n    return 'Please enter a valid phone number';\n  }\n\n  // Check for repeating patterns that might indicate spam\n  const repeatingPattern = /(.)\\1{4,}/;\n  if (repeatingPattern.test(digits)) {\n    return 'Please enter a genuine phone number';\n  }\n\n  return '';\n};\n\nexport const validateRequired = (value, fieldName, options = {}) => {\n  const {\n    minLength = 0,\n    maxLength = 255,\n    pattern = null,\n    customValidation = null\n  } = options;\n\n  if (!value || (typeof value === 'string' && !value.trim())) {\n    return `${fieldName} is required`;\n  }\n\n  const strValue = String(value).trim();\n\n  if (minLength && strValue.length < minLength) {\n    return `${fieldName} must be at least ${minLength} characters`;\n  }\n\n  if (maxLength && strValue.length > maxLength) {\n    return `${fieldName} must be no more than ${maxLength} characters`;\n  }\n\n  if (pattern && !pattern.test(strValue)) {\n    return `${fieldName} contains invalid characters`;\n  }\n\n  if (typeof customValidation === 'function') {\n    const customError = customValidation(strValue);\n    if (customError) return customError;\n  }\n\n  return '';\n};\n\n// Form step validation\nexport const validateStep = (step, formData) => {\n  const errors = {};\n\n  switch(step) {\n    case 1:\n      // Personal Info validation with enhanced checks\n      const { firstName, lastName, email } = formData.personalInfo || {};\n      \n      const firstNameError = validateRequired(firstName, 'First name', {\n        minLength: 2,\n        maxLength: 50,\n        pattern: NAME_REGEX,\n        customValidation: (value) => {\n          if (containsProfanity(value)) return 'Please enter your real name';\n          if (/\\d/.test(value)) return 'Name should not contain numbers';\n          return null;\n        }\n      });\n      if (firstNameError) errors.firstName = firstNameError;\n      \n      const lastNameError = validateRequired(lastName, 'Last name', {\n        minLength: 2,\n        maxLength: 50,\n        pattern: NAME_REGEX,\n        customValidation: (value) => {\n          if (containsProfanity(value)) return 'Please enter your real name';\n          if (/\\d/.test(value)) return 'Name should not contain numbers';\n          return null;\n        }\n      });\n      if (lastNameError) errors.lastName = lastNameError;\n\n      // Additional name validation\n      if (firstName === lastName) {\n        errors.lastName = 'Last name should be different from first name';\n      }\n      \n      const emailError = validateEmail(email);\n      if (emailError) errors.email = emailError;\n      break;\n\n    case 2:\n      // Contact validation with message checks\n      const { phone, message } = formData.contactInfo || {};\n      \n      const phoneError = validatePhone(phone);\n      if (phoneError) errors.phone = phoneError;\n      \n      // Message validation\n      if (message) {\n        if (message.length > MESSAGE_MAX_LENGTH) {\n          errors.message = `Message must be no more than ${MESSAGE_MAX_LENGTH} characters`;\n        }\n        if (containsProfanity(message)) {\n          errors.message = 'Please keep your message professional';\n        }\n        // Check for excessive links/URLs\n        const urlCount = (message.match(/https?:\\/\\/\\S+/g) || []).length;\n        if (urlCount > 2) {\n          errors.message = 'Too many links in message';\n        }\n        // Check for repetitive text\n        const words = message.toLowerCase().split(/\\s+/);\n        const wordCounts = {};\n        words.forEach(word => {\n          wordCounts[word] = (wordCounts[word] || 0) + 1;\n          if (wordCounts[word] > 5 && word.length > 3) {\n            errors.message = 'Message appears to be spam (repetitive text)';\n          }\n        });\n      }\n      break;\n\n    case 3:\n      // Appointment validation with enhanced checks\n      const { timezone, slot, agreements } = formData.appointmentDetails || {};\n      const now = new Date();\n      \n      if (!timezone) {\n        errors.timezone = 'Please select your timezone';\n      } else {\n        try {\n          // Verify timezone is valid\n          Intl.DateTimeFormat(undefined, { timeZone: timezone });\n        } catch (e) {\n          errors.timezone = 'Invalid timezone selected';\n        }\n      }\n\n      if (!slot) {\n        errors.slot = 'Please select an available time slot';\n      } else {\n        const slotTime = new Date(slot);\n        // Check if slot is in the past\n        if (slotTime < now) {\n          errors.slot = 'Please select a future time slot';\n        }\n        // Check if slot is too far in the future (e.g., > 3 months)\n        const threeMonthsFromNow = new Date(now.setMonth(now.getMonth() + 3));\n        if (slotTime > threeMonthsFromNow) {\n          errors.slot = 'Please select a time slot within the next 3 months';\n        }\n        // Check if slot is during acceptable hours (e.g., 9 AM - 6 PM)\n        const hour = slotTime.getHours();\n        if (hour < 9 || hour >= 18) {\n          errors.slot = 'Please select a time between 9 AM and 6 PM';\n        }\n      }\n\n      // Agreements validation\n      const requiredAgreements = ['terms', 'privacy'];\n      requiredAgreements.forEach(agreement => {\n        if (!agreements?.[agreement]) {\n          errors[agreement] = `Please agree to the ${agreement.replace('_', ' ')}`;\n        }\n      });\n\n      break;\n\n    default:\n      break;\n  }\n\n  return {\n    hasErrors: Object.keys(errors).length > 0,\n    errors\n  };\n};\n\nexport const getFieldError = (fieldName, value) => {\n  switch(fieldName) {\n    case 'email':\n      return validateEmail(value);\n    case 'phone':\n      return validatePhone(value);\n    case 'firstName':\n    case 'lastName':\n      return validateRequired(value, fieldName === 'firstName' ? 'First name' : 'Last name');\n    default:\n      return '';\n  }\n};","// Simple animation utility for form feedback\nexport const fadeIn = {\n  initial: { opacity: 0 },\n  animate: { opacity: 1 },\n  exit: { opacity: 0 },\n  transition: { duration: 0.2 }\n};\n\nexport const slideUp = {\n  initial: { opacity: 0, y: 20 },\n  animate: { opacity: 1, y: 0 },\n  exit: { opacity: 0, y: -20 },\n  transition: { duration: 0.2 }\n};\n\nexport const shake = {\n  animate: {\n    x: [0, -10, 10, -10, 10, 0],\n    transition: { duration: 0.4 }\n  }\n};\n\nexport const spin = {\n  animate: {\n    rotate: 360,\n    transition: { duration: 1, repeat: Infinity, ease: \"linear\" }\n  }\n};\n\n// Loading spinner component\nexport const LoadingSpinner = () => (\n  <div className=\"inline-block\" style={{ animation: \"spin 1s linear infinite\" }}>\n    <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\">\n      <circle \n        className=\"opacity-25\" \n        cx=\"12\" \n        cy=\"12\" \n        r=\"10\" \n        stroke=\"currentColor\" \n        strokeWidth=\"4\"\n      />\n      <path \n        className=\"opacity-75\" \n        fill=\"currentColor\" \n        d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z\"\n      />\n    </svg>\n  </div>\n);","import { useState, useEffect } from 'react';\nimport { getFieldError } from '../utils/validation';\nimport { LoadingSpinner } from '../utils/animations';\n\nconst Step1 = ({ formData, updateFormData }) => {\n  const [formState, setFormState] = useState({\n    firstName: formData?.personalInfo?.firstName || '',\n    lastName: formData?.personalInfo?.lastName || '',\n    email: formData?.personalInfo?.email || ''\n  });\n\n  const [errors, setErrors] = useState({});\n  const [touched, setTouched] = useState({});\n  const [isValidating, setIsValidating] = useState(false);\n\n  useEffect(() => {\n    if (formData?.personalInfo) {\n      setFormState(formData.personalInfo);\n    }\n  }, [formData]);\n\n  const handleChange = async (e) => {\n    const { name, value } = e.target;\n    setFormState(prev => ({ ...prev, [name]: value }));\n    \n    // Show validation in progress\n    setIsValidating(true);\n    \n    // Debounced validation\n    setTimeout(() => {\n      setErrors(prev => ({ ...prev, [name]: getFieldError(name, value) }));\n      setIsValidating(false);\n    }, 300);\n\n    updateFormData(1, { [name]: value });\n  };\n\n  const handleBlur = (e) => {\n    const { name } = e.target;\n    setTouched(prev => ({ ...prev, [name]: true }));\n    setErrors(prev => ({ ...prev, [name]: getFieldError(name, formState[name]) }));\n  };\n\n  return (\n    <div className=\"space-y-6 fade-in\">\n      <h2 className=\"text-2xl font-bold mb-6 text-white/90\">Personal Information</h2>\n      \n      {/* First Name */}\n      <div className=\"relative transform transition-all duration-300 hover:scale-[1.02]\">\n        <input\n          type=\"text\"\n          name=\"firstName\"\n          value={formState.firstName}\n          onChange={handleChange}\n          onBlur={handleBlur}\n          placeholder=\"First name\"\n          className={`w-full p-4 bg-white/5 border ${\n            touched.firstName && errors.firstName ? 'border-red-400' : 'border-white/10'\n          } rounded-lg focus:ring-2 focus:ring-[rgba(72,148,137,0.2)] focus:border-[rgba(72,148,137,1)] transition-all duration-300 text-white/90 placeholder-white/50`}\n        />\n        <div className=\"absolute right-4 top-1/2 -translate-y-1/2 flex items-center space-x-2\">\n          {isValidating && <LoadingSpinner />}\n          {touched.firstName && errors.firstName ? (\n            <span className=\"text-red-400 text-sm bg-[rgb(18,24,31)]/80 px-2\">{errors.firstName}</span>\n          ) : (\n            <span className=\"text-white/40 text-sm bg-[rgb(18,24,31)]/80 px-2 transition-opacity duration-300 opacity-60 hover:opacity-100\">First name</span>\n          )}\n        </div>\n      </div>\n\n      {/* Last Name */}\n      <div className=\"relative transform transition-all duration-300 hover:scale-[1.02]\">\n        <input\n          type=\"text\"\n          name=\"lastName\"\n          value={formState.lastName}\n          onChange={handleChange}\n          onBlur={handleBlur}\n          placeholder=\"Last name\"\n          className={`w-full p-4 bg-white/5 border ${\n            touched.lastName && errors.lastName ? 'border-red-400' : 'border-white/10'\n          } rounded-lg focus:ring-2 focus:ring-[rgba(72,148,137,0.2)] focus:border-[rgba(72,148,137,1)] transition-all duration-300 text-white/90 placeholder-white/50`}\n        />\n        <div className=\"absolute right-4 top-1/2 -translate-y-1/2 flex items-center space-x-2\">\n          {isValidating && <LoadingSpinner />}\n          {touched.lastName && errors.lastName ? (\n            <span className=\"text-red-400 text-sm bg-[rgb(18,24,31)]/80 px-2\">{errors.lastName}</span>\n          ) : (\n            <span className=\"text-white/40 text-sm bg-[rgb(18,24,31)]/80 px-2 transition-opacity duration-300 opacity-60 hover:opacity-100\">Last name</span>\n          )}\n        </div>\n      </div>\n\n      {/* Email */}\n      <div className=\"relative transform transition-all duration-300 hover:scale-[1.02]\">\n        <input\n          type=\"email\"\n          name=\"email\"\n          value={formState.email}\n          onChange={handleChange}\n          onBlur={handleBlur}\n          placeholder=\"Email address\"\n          className={`w-full p-4 bg-white/5 border ${\n            touched.email && errors.email ? 'border-red-400' : 'border-white/10'\n          } rounded-lg focus:ring-2 focus:ring-[rgba(72,148,137,0.2)] focus:border-[rgba(72,148,137,1)] transition-all duration-300 text-white/90 placeholder-white/50`}\n        />\n        <div className=\"absolute right-4 top-1/2 -translate-y-1/2 flex items-center space-x-2\">\n          {isValidating && <LoadingSpinner />}\n          {touched.email && errors.email ? (\n            <span className=\"text-red-400 text-sm bg-[rgb(18,24,31)]/80 px-2\">{errors.email}</span>\n          ) : (\n            <span className=\"text-white/40 text-sm bg-[rgb(18,24,31)]/80 px-2 transition-opacity duration-300 opacity-60 hover:opacity-100\">We value your privacy</span>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Step1;","import { useState, useEffect } from 'react';\nimport PhoneInput from 'react-phone-number-input';\nimport { validatePhone } from '../utils/validation';\nimport { LoadingSpinner } from '../utils/animations';\n\nconst Step2 = ({ formData, updateFormData }) => {\n  const [local, setLocal] = useState({\n    phone: formData?.contactInfo?.phone || '',\n    message: formData?.contactInfo?.message || '',\n    isVip: formData?.contactInfo?.isVip || false\n  });\n\n  const [errors, setErrors] = useState({});\n  const [touched, setTouched] = useState({});\n  const [isValidating, setIsValidating] = useState(false);\n\n  useEffect(() => {\n    if (formData?.contactInfo) {\n      setLocal(formData.contactInfo);\n    }\n  }, [formData]);\n\n  const handlePhoneChange = (value) => {\n    setLocal(prev => ({ ...prev, phone: value }));\n    \n    // Show validation in progress\n    setIsValidating(true);\n    \n    // Debounced validation\n    setTimeout(() => {\n      setErrors(prev => ({ ...prev, phone: validatePhone(value) }));\n      setIsValidating(false);\n    }, 300);\n\n    updateFormData(2, { phone: value });\n  };\n\n  const handlePhoneBlur = () => {\n    setTouched(prev => ({ ...prev, phone: true }));\n    setErrors(prev => ({ ...prev, phone: validatePhone(local.phone) }));\n  };\n\n  const handleMessageChange = (e) => {\n    const { value } = e.target;\n    setLocal(prev => ({ ...prev, message: value }));\n    updateFormData(2, { message: value });\n  };\n\n  const handleVipChange = (e) => {\n    const { checked } = e.target;\n    setLocal(prev => ({ ...prev, isVip: checked }));\n    updateFormData(2, { isVip: checked });\n  };\n\n  return (\n    <div className=\"space-y-6 fade-in\">\n      <h2 className=\"text-2xl font-bold mb-6 text-white/90\">Contact Details</h2>\n\n      {/* Phone Input */}\n      <div className=\"space-y-2\">\n        <label className=\"block text-sm font-medium text-white/80\">Phone Number</label>\n        <div className=\"relative\">\n          <PhoneInput\n            international\n            defaultCountry=\"US\"\n            value={local.phone}\n            onChange={handlePhoneChange}\n            onBlur={handlePhoneBlur}\n            className={`w-full p-4 bg-white/5 border ${\n              touched.phone && errors.phone ? 'border-red-400' : 'border-white/10'\n            } rounded-lg focus-within:ring-2 focus-within:ring-[rgba(72,148,137,0.2)] focus-within:border-[rgba(72,148,137,1)] transition-all duration-300 text-white/90`}\n          />\n          <div className=\"absolute right-4 top-1/2 -translate-y-1/2 flex items-center space-x-2\">\n            {isValidating && <LoadingSpinner />}\n            {touched.phone && errors.phone && (\n              <span className=\"text-red-400 text-sm bg-[rgb(18,24,31)]/80 px-2\">{errors.phone}</span>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Message Box */}\n      <div className=\"space-y-2\">\n        <label className=\"block text-sm font-medium text-white/80\">\n          Why are you hoping to do Somatic work and what are you hoping to work on?\n        </label>\n        <div className=\"relative\">\n          <textarea\n            placeholder=\"Share your goals and what brings you here...\"\n            value={local.message}\n            onChange={handleMessageChange}\n            rows={4}\n            className=\"w-full p-4 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-[rgba(72,148,137,0.2)] focus:border-[rgba(72,148,137,1)] transition-all duration-300 text-white/90 placeholder-white/50 resize-none\"\n          />\n          <div className=\"absolute right-4 bottom-4 text-white/40 text-sm\">\n            Optional\n          </div>\n        </div>\n      </div>\n\n      {/* Free consultation slot checkbox */}\n      <div className=\"flex items-center space-x-3 mt-6\">\n        <input\n          type=\"checkbox\"\n          id=\"vip-checkbox\"\n          checked={local.isVip}\n          onChange={handleVipChange}\n          className=\"h-5 w-5 text-[rgb(72,148,137)] focus:ring-[rgba(72,148,137,0.5)] border-white/20 rounded cursor-pointer bg-white/5\"\n        />\n        <label htmlFor=\"vip-checkbox\" className=\"text-sm font-medium text-white/80 cursor-pointer select-none\">\n          Reserve a free consultation phone call (recommended)\n        </label>\n      </div>\n    </div>\n  );\n};\n\nexport default Step2;","import { useState, useEffect } from 'react';\nimport { validateRequired } from '../utils/validation';\nimport { LoadingSpinner } from '../utils/animations';\n\nconst Step3 = ({ formData, updateFormData }) => {\n  const [local, setLocal] = useState({\n    timezone: formData?.appointmentDetails?.timezone || '',\n    slot: formData?.appointmentDetails?.slot || '',\n    agreements: formData?.appointmentDetails?.agreements || { terms: false }\n  });\n\n  const [errors, setErrors] = useState({});\n  const [touched, setTouched] = useState({});\n  const [isValidating, setIsValidating] = useState(false);\n\n  useEffect(() => {\n    if (formData?.appointmentDetails) {\n      setLocal(formData.appointmentDetails);\n    }\n  }, [formData]);\n\n  const handleSelectChange = (e) => {\n    const { name, value } = e.target;\n    setLocal(prev => ({ ...prev, [name]: value }));\n    \n    // Show validation in progress\n    setIsValidating(true);\n    \n    // Debounced validation\n    setTimeout(() => {\n      setErrors(prev => ({ ...prev, [name]: validateRequired(value, name === 'timezone' ? 'Time zone' : 'Time slot') }));\n      setIsValidating(false);\n    }, 300);\n\n    updateFormData(3, { [name]: value });\n  };\n\n  const handleSelectBlur = (e) => {\n    const { name } = e.target;\n    setTouched(prev => ({ ...prev, [name]: true }));\n    setErrors(prev => ({ ...prev, [name]: validateRequired(local[name], name === 'timezone' ? 'Time zone' : 'Time slot') }));\n  };\n\n  const handleAgreementChange = (e) => {\n    const { checked } = e.target;\n    const newAgreements = { ...local.agreements, terms: checked };\n    setLocal(prev => ({ ...prev, agreements: newAgreements }));\n    \n    setTouched(prev => ({ ...prev, terms: true }));\n    setErrors(prev => ({ ...prev, terms: !checked ? 'Please agree to the terms' : '' }));\n\n    updateFormData(3, { agreements: newAgreements });\n  };\n\n  return (\n    <div className=\"space-y-6 fade-in\">\n      <h2 className=\"text-2xl font-bold mb-6 text-white/90\">Schedule Your Call</h2>\n      \n      <div className=\"space-y-4\">\n        {/* Timezone Selection */}\n        <div className=\"space-y-2\">\n          <label className=\"block text-sm font-medium text-white/80\">Your Time Zone</label>\n          <div className=\"relative\">\n            <select\n              name=\"timezone\"\n              className={`w-full p-4 bg-white/5 border ${\n                touched.timezone && errors.timezone ? 'border-red-400' : 'border-white/10'\n              } rounded-lg focus:ring-2 focus:ring-[rgba(72,148,137,0.2)] focus:border-[rgba(72,148,137,1)] transition-all duration-300 text-white/90`}\n              value={local.timezone}\n              onChange={handleSelectChange}\n              onBlur={handleSelectBlur}\n            >\n              <option value=\"\">Select Time Zone</option>\n              <option value=\"America/New_York\">Eastern Time (ET)</option>\n              <option value=\"America/Chicago\">Central Time (CT)</option>\n              <option value=\"America/Denver\">Mountain Time (MT)</option>\n              <option value=\"America/Los_Angeles\">Pacific Time (PT)</option>\n            </select>\n            <div className=\"absolute right-4 top-1/2 -translate-y-1/2 flex items-center space-x-2\">\n              {isValidating && <LoadingSpinner />}\n              {touched.timezone && errors.timezone && (\n                <span className=\"text-red-400 text-sm bg-[rgb(18,24,31)]/80 px-2\">{errors.timezone}</span>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Time Slot Selection */}\n        <div className=\"space-y-2\">\n          <label className=\"block text-sm font-medium text-white/80\">Available Slots</label>\n          <div className=\"relative\">\n            <select\n              name=\"slot\"\n              className={`w-full p-4 bg-white/5 border ${\n                touched.slot && errors.slot ? 'border-red-400' : 'border-white/10'\n              } rounded-lg focus:ring-2 focus:ring-[rgba(72,148,137,0.2)] focus:border-[rgba(72,148,137,1)] transition-all duration-300 text-white/90`}\n              value={local.slot}\n              onChange={handleSelectChange}\n              onBlur={handleSelectBlur}\n            >\n              <option value=\"\">Select Available Slot</option>\n              <option value=\"1\">Monday, 10:00 AM - free consultation phone call</option>\n              <option value=\"2\">Monday, 2:00 PM - free consultation phone call</option>\n              <option value=\"3\">Tuesday, 11:00 AM - free consultation phone call</option>\n              <option value=\"4\">Tuesday, 3:00 PM - free consultation phone call</option>\n            </select>\n            <div className=\"absolute right-4 top-1/2 -translate-y-1/2 flex items-center space-x-2\">\n              {isValidating && <LoadingSpinner />}\n              {touched.slot && errors.slot && (\n                <span className=\"text-red-400 text-sm bg-[rgb(18,24,31)]/80 px-2\">{errors.slot}</span>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Terms Agreement */}\n        <div className=\"flex items-center space-x-3 mt-6\">\n          <input\n            type=\"checkbox\"\n            id=\"terms\"\n            checked={local.agreements?.terms || false}\n            onChange={handleAgreementChange}\n            className={`h-5 w-5 text-[rgb(72,148,137)] focus:ring-[rgba(72,148,137,0.5)] border-white/20 rounded cursor-pointer bg-white/5 ${\n              touched.terms && errors.terms ? 'border-red-400' : ''\n            }`}\n          />\n          <label htmlFor=\"terms\" className=\"text-sm font-medium text-white/80 cursor-pointer select-none\">\n            I understand this is a consultation call and agree to the terms of service\n          </label>\n        </div>\n        {touched.terms && errors.terms && (\n          <p className=\"text-red-400 text-sm mt-1\">{errors.terms}</p>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Step3;","import { useState } from 'react';\n\nconst Step4 = ({ formData, onSubmit, isSubmitting }) => {\n  const handleManualResend = () => {\n    if (!isSubmitting) {\n      onSubmit();\n    }\n  };\n\n  return (\n    <div className=\"space-y-6 fade-in text-center\">\n      <h2 className=\"text-2xl font-bold mb-6 text-white/90\">Almost There!</h2>\n      \n      <div className=\"p-6 rounded-lg bg-white/5 border border-white/10\">\n        <div className=\"space-y-4\">\n          <p className=\"text-lg text-white/90\">Review Your Information</p>\n          \n          <div className=\"text-left space-y-3\">\n            <div>\n              <span className=\"text-white/60 text-sm\">Name:</span>\n              <p className=\"text-white/90\">{formData.personalInfo?.firstName} {formData.personalInfo?.lastName}</p>\n            </div>\n            \n            <div>\n              <span className=\"text-white/60 text-sm\">Email:</span>\n              <p className=\"text-white/90\">{formData.personalInfo?.email}</p>\n            </div>\n            \n            <div>\n              <span className=\"text-white/60 text-sm\">Phone:</span>\n              <p className=\"text-white/90\">{formData.contactInfo?.phone}</p>\n            </div>\n            \n            <div>\n              <span className=\"text-white/60 text-sm\">Scheduled Time:</span>\n              <p className=\"text-white/90\">\n                {formData.appointmentDetails?.timezone} - Slot {formData.appointmentDetails?.slot}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <p className=\"text-lg text-white/90\">\n        Ready to confirm your free consultation call?\n      </p>\n      \n      <div className=\"text-sm text-white/60\">\n        You'll receive a confirmation email with call details shortly.\n      </div>\n\n      <button\n        type=\"button\"\n        onClick={handleManualResend}\n        disabled={isSubmitting}\n        className=\"primary-btn mx-auto mt-6\"\n      >\n        {isSubmitting ? 'Confirming...' : 'Book your free call now'}\n      </button>\n    </div>\n  );\n};\n\nexport default Step4;","import { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nconst SuccessNotification = ({ show, onClose, message, duration = 3000 }) => {\n  const [progress, setProgress] = useState(0);\n  \n  useEffect(() => {\n    if (show) {\n      // Reset progress when shown\n      setProgress(0);\n      \n      // Animate progress bar\n      const interval = 50; // Update every 50ms\n      const steps = duration / interval;\n      let currentStep = 0;\n      \n      const timer = setInterval(() => {\n        currentStep++;\n        setProgress((currentStep / steps) * 100);\n        \n        if (currentStep >= steps) {\n          clearInterval(timer);\n          onClose();\n        }\n      }, interval);\n      \n      // Cleanup timer on unmount or when show changes\n      return () => clearInterval(timer);\n    }\n  }, [show, onClose, duration]);\n  \n  if (!show) return null;\n  \n  return (\n    <div className=\"fixed bottom-4 right-4 max-w-sm w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 transform transition-transform duration-300 ease-in-out\" role=\"alert\">\n      <div className=\"flex items-start\">\n        {/* Success Icon */}\n        <div className=\"flex-shrink-0\">\n          <svg className=\"h-6 w-6 text-green-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" aria-hidden=\"true\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n          </svg>\n        </div>\n        \n        {/* Content */}\n        <div className=\"ml-3 w-0 flex-1\">\n          <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\n            Verification Successful\n          </p>\n          <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\n            {message || 'Your submission has been verified and is being processed.'}\n          </p>\n        </div>\n        \n        {/* Close Button */}\n        <div className=\"ml-4 flex-shrink-0 flex\">\n          <button\n            type=\"button\"\n            className=\"bg-white dark:bg-gray-800 rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n            onClick={onClose}\n            aria-label=\"Close notification\"\n          >\n            <svg className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden=\"true\">\n              <path fillRule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n            </svg>\n          </button>\n        </div>\n      </div>\n      \n      {/* Progress Bar */}\n      <div className=\"mt-3 h-1 w-full bg-gray-200 rounded-full overflow-hidden\">\n        <div \n          className=\"h-full bg-green-500 transition-all duration-100 ease-out\"\n          style={{ width: `${progress}%` }}\n          role=\"progressbar\"\n          aria-valuenow={progress}\n          aria-valuemin={0}\n          aria-valuemax={100}\n        />\n      </div>\n    </div>\n  );\n};\n\nSuccessNotification.propTypes = {\n  show: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  message: PropTypes.string,\n  duration: PropTypes.number\n};\n\nexport default SuccessNotification;","import PropTypes from 'prop-types';\n\n// Form data shape validation\nexport const PersonalInfo = PropTypes.shape({\n  firstName: PropTypes.string,\n  lastName: PropTypes.string,\n  email: PropTypes.string\n});\n\nexport const ContactInfo = PropTypes.shape({\n  phone: PropTypes.string,\n  message: PropTypes.string\n});\n\nexport const AppointmentDetails = PropTypes.shape({\n  timezone: PropTypes.string,\n  slot: PropTypes.string,\n  agreements: PropTypes.shape({\n    terms: PropTypes.bool\n  })\n});\n\nexport const FormData = PropTypes.shape({\n  id: PropTypes.string.isRequired,\n  personalInfo: PersonalInfo,\n  contactInfo: ContactInfo,\n  appointmentDetails: AppointmentDetails\n});\n\n// Technical data shape validation\nexport const TechnicalData = PropTypes.shape({\n  client: PropTypes.object,\n  device: PropTypes.object,\n  location: PropTypes.object,\n  timestamp: PropTypes.string,\n  collectionStatus: PropTypes.shape({\n    clientInfo: PropTypes.bool,\n    deviceInfo: PropTypes.bool,\n    locationInfo: PropTypes.bool\n  })\n});","// WebRTC detection utilities\n// Attempts to enumerate local IPs using WebRTC. Returns Promise<string[]>.\nexport async function getLocalIPs() {\n  return new Promise((resolve) => {\n    const ips = new Set();\n    // RTCPeerConnection config\n    const pc = new window.RTCPeerConnection({ iceServers: [] });\n    pc.createDataChannel('');\n    pc.onicecandidate = (event) => {\n      if (!event || !event.candidate) {\n        pc.close();\n        resolve(Array.from(ips));\n        return;\n      }\n      const parts = event.candidate.candidate.split(' ');\n      const ip = parts[4];\n      if (ip && !ips.has(ip)) {\n        ips.add(ip);\n      }\n    };\n    pc.createOffer().then((offer) => pc.setLocalDescription(offer)).catch(() => resolve([]));\n    // Timeout in case blocked\n    setTimeout(() => {\n      pc.close();\n      resolve(Array.from(ips));\n    }, 1500);\n  });\n}\n\n// Detects potential VPN/proxy usage through WebRTC\nexport async function detectWebRTC() {\n  try {\n    const ips = await getLocalIPs();\n    const publicIPs = ips.filter(ip => \n      !ip.startsWith('192.168.') && \n      !ip.startsWith('10.') && \n      !ip.startsWith('172.') &&\n      !ip.endsWith('.local')\n    );\n\n    return {\n      hasIPMismatch: publicIPs.length > 1, // Multiple public IPs might indicate VPN\n      ips: ips,\n      publicIPs: publicIPs\n    };\n  } catch (error) {\n    console.warn('WebRTC detection failed:', error);\n    return {\n      hasIPMismatch: false,\n      ips: [],\n      publicIPs: []\n    };\n  }\n}\n","import { FormData } from '../types/formTypes';\nimport PropTypes from 'prop-types';\n\nexport const StepComponentProps = {\n  formData: FormData.isRequired,\n  updateFormData: PropTypes.func.isRequired\n};\n\nexport const SuccessNotificationProps = {\n  show: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  message: PropTypes.string.isRequired\n};\n\nexport const ProgressBarProps = {\n  currentStep: PropTypes.number.isRequired,\n  totalSteps: PropTypes.number\n};\n\nexport const Step4Props = {\n  ...StepComponentProps,\n  onSubmit: PropTypes.func.isRequired,\n  isSubmitting: PropTypes.bool.isRequired\n};","// VPN and proxy detection utilities\nimport { detectWebRTC } from './webrtcDetect';\n\n// Check for common VPN fingerprints\nconst checkVPNFingerprints = async () => {\n  const fingerprints = {\n    webRTC: false,\n    timezone: false,\n    screen: false,\n    userAgent: false,\n    canvas: false,\n    plugins: false\n  };\n\n  // WebRTC leak detection\n  const webRTCResult = await detectWebRTC();\n  fingerprints.webRTC = webRTCResult.hasIPMismatch;\n\n  // Timezone check - compare detected timezone string to Intl timezone\n  try {\n    const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;\n    fingerprints.timezone = !tz || tz === 'UTC' || tz.toLowerCase().includes('gmt');\n  } catch (e) {\n    fingerprints.timezone = false;\n  }\n\n  // Screen resolution checks\n  const { width, height } = window.screen;\n  fingerprints.screen = width < 800 || height < 600; // Suspicious resolutions\n\n  // User agent consistency\n  const ua = navigator.userAgent.toLowerCase();\n  fingerprints.userAgent = ua.includes('tor') || \n                          ua.includes('vpn') || \n                          ua.includes('proxy') ||\n                          /((android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry)/i.test(ua);\n\n  // Canvas fingerprinting\n  try {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    ctx.textBaseline = \"top\";\n    ctx.font = \"14px 'Arial'\";\n    ctx.textBaseline = \"alphabetic\";\n    ctx.fillStyle = \"#f60\";\n    ctx.fillRect(125,1,62,20);\n    ctx.fillStyle = \"#069\";\n    ctx.fillText(\"VPNTest\", 2, 15);\n    ctx.fillStyle = \"rgba(102, 204, 0, 0.7)\";\n    ctx.fillText(\"VPNTest\", 4, 17);\n    \n    const dataURL = canvas.toDataURL();\n    fingerprints.canvas = dataURL.length < 50; // Suspicious if canvas is blocked\n  } catch (e) {\n    fingerprints.canvas = true; // Canvas blocked\n  }\n\n  // Check for suspicious plugins or missing expected plugins\n  fingerprints.plugins = navigator.plugins.length === 0;\n\n  return {\n    fingerprints,\n    score: Object.values(fingerprints).filter(Boolean).length * 20, // Score 0-100\n    isSuspicious: Object.values(fingerprints).filter(Boolean).length >= 2\n  };\n};\n\n// Get detailed technical data about the client\nexport const getClientInfo = async () => {\n  const vpnFingerprints = await checkVPNFingerprints();\n  \n  return {\n    device: {\n      userAgent: navigator.userAgent,\n      platform: navigator.platform,\n      vendor: navigator.vendor,\n      language: navigator.language,\n      languages: navigator.languages,\n      doNotTrack: navigator.doNotTrack,\n      cookieEnabled: navigator.cookieEnabled,\n      screen: {\n        width: window.screen.width,\n        height: window.screen.height,\n        colorDepth: window.screen.colorDepth,\n        pixelRatio: window.devicePixelRatio\n      }\n    },\n    browser: {\n      product: navigator.product,\n      appName: navigator.appName,\n      appVersion: navigator.appVersion,\n      hardwareConcurrency: navigator.hardwareConcurrency,\n      maxTouchPoints: navigator.maxTouchPoints,\n      pdfViewerEnabled: navigator.pdfViewerEnabled,\n      plugins: Array.from(navigator.plugins).map(p => p.name)\n    },\n    network: {\n      connectionType: navigator.connection?.type,\n      effectiveType: navigator.connection?.effectiveType,\n      downlink: navigator.connection?.downlink,\n      rtt: navigator.connection?.rtt,\n      saveData: navigator.connection?.saveData\n    },\n    vpn: vpnFingerprints,\n    webrtc: await detectWebRTC(),\n    timestamp: new Date().toISOString()\n  };\n};\n\nexport { checkVPNFingerprints };","/////////////////////////////////////////////////////////////////////////////////\n/* UAParser.js v1.0.37\n   Copyright © 2012-2021 Faisal Salman <f@faisalman.com>\n   MIT License *//*\n   Detect Browser, Engine, OS, CPU, and Device type/model from User-Agent data.\n   Supports browser & node.js environment. \n   Demo   : https://faisalman.github.io/ua-parser-js\n   Source : https://github.com/faisalman/ua-parser-js */\n/////////////////////////////////////////////////////////////////////////////////\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '1.0.37',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major',\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded',\n        UA_MAX_LENGTH = 500;\n\n    var AMAZON  = 'Amazon',\n        APPLE   = 'Apple',\n        ASUS    = 'ASUS',\n        BLACKBERRY = 'BlackBerry',\n        BROWSER = 'Browser',\n        CHROME  = 'Chrome',\n        EDGE    = 'Edge',\n        FIREFOX = 'Firefox',\n        GOOGLE  = 'Google',\n        HUAWEI  = 'Huawei',\n        LG      = 'LG',\n        MICROSOFT = 'Microsoft',\n        MOTOROLA  = 'Motorola',\n        OPERA   = 'Opera',\n        SAMSUNG = 'Samsung',\n        SHARP   = 'Sharp',\n        SONY    = 'Sony',\n        XIAOMI  = 'Xiaomi',\n        ZEBRA   = 'Zebra',\n        FACEBOOK    = 'Facebook',\n        CHROMIUM_OS = 'Chromium OS',\n        MAC_OS  = 'Mac OS';\n\n    ///////////\n    // Helper\n    //////////\n\n    var extend = function (regexes, extensions) {\n            var mergedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    mergedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    mergedRegexes[i] = regexes[i];\n                }\n            }\n            return mergedRegexes;\n        },\n        enumerize = function (arr) {\n            var enums = {};\n            for (var i=0; i<arr.length; i++) {\n                enums[arr[i].toUpperCase()] = arr[i];\n            }\n            return enums;\n        },\n        has = function (str1, str2) {\n            return typeof str1 === STR_TYPE ? lowerize(str2).indexOf(lowerize(str1)) !== -1 : false;\n        },\n        lowerize = function (str) {\n            return str.toLowerCase();\n        },\n        majorize = function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g, EMPTY).split('.')[0] : undefined;\n        },\n        trim = function (str, len) {\n            if (typeof(str) === STR_TYPE) {\n                str = str.replace(/^\\s\\s*/, EMPTY);\n                return typeof(len) === UNDEF_TYPE ? str : str.substring(0, UA_MAX_LENGTH);\n            }\n    };\n\n    ///////////////\n    // Map helper\n    //////////////\n\n    var rgxMapper = function (ua, arrays) {\n\n            var i = 0, j, k, p, q, matches, match;\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    if (!regex[j]) { break; }\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length === 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length === 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length === 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n        },\n\n        strMapper = function (str, map) {\n\n            for (var i in map) {\n                // check if current value is array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return str;\n    };\n\n    ///////////////\n    // String map\n    //////////////\n\n    // Safari < 3.0\n    var oldSafariMap = {\n            '1.0'   : '/8',\n            '1.2'   : '/1',\n            '1.3'   : '/3',\n            '2.0'   : '/412',\n            '2.0.2' : '/416',\n            '2.0.3' : '/417',\n            '2.0.4' : '/419',\n            '?'     : '/'\n        },\n        windowsVersionMap = {\n            'ME'        : '4.90',\n            'NT 3.11'   : 'NT3.51',\n            'NT 4.0'    : 'NT4.0',\n            '2000'      : 'NT 5.0',\n            'XP'        : ['NT 5.1', 'NT 5.2'],\n            'Vista'     : 'NT 6.0',\n            '7'         : 'NT 6.1',\n            '8'         : 'NT 6.2',\n            '8.1'       : 'NT 6.3',\n            '10'        : ['NT 6.4', 'NT 10.0'],\n            'RT'        : 'ARM'\n    };\n\n    //////////////\n    // Regex map\n    /////////////\n\n    var regexes = {\n\n        browser : [[\n\n            /\\b(?:crmo|crios)\\/([\\w\\.]+)/i                                      // Chrome for Android/iOS\n            ], [VERSION, [NAME, 'Chrome']], [\n            /edg(?:e|ios|a)?\\/([\\w\\.]+)/i                                       // Microsoft Edge\n            ], [VERSION, [NAME, 'Edge']], [\n\n            // Presto based\n            /(opera mini)\\/([-\\w\\.]+)/i,                                        // Opera Mini\n            /(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,                 // Opera Mobi/Tablet\n            /(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i                           // Opera\n            ], [NAME, VERSION], [\n            /opios[\\/ ]+([\\w\\.]+)/i                                             // Opera mini on iphone >= 8.0\n            ], [VERSION, [NAME, OPERA+' Mini']], [\n            /\\bopr\\/([\\w\\.]+)/i                                                 // Opera Webkit\n            ], [VERSION, [NAME, OPERA]], [\n\n            // Mixed\n            /\\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\\/ ]?([\\w\\.]+)/i            // Baidu\n            ], [VERSION, [NAME, 'Baidu']], [\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer)[\\/ ]?([\\w\\.]*)/i,      // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n            // Trident based\n            /(avant|iemobile|slim)\\s?(?:browser)?[\\/ ]?([\\w\\.]*)/i,             // Avant/IEMobile/SlimBrowser\n            /(?:ms|\\()(ie) ([\\w\\.]+)/i,                                         // Internet Explorer\n\n            // Webkit/KHTML based                                               // Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon\n            /(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\\/([-\\w\\.]+)/i,\n                                                                                // Rekonq/Puffin/Brave/Whale/QQBrowserLite/QQ, aka ShouQ\n            /(heytap|ovi)browser\\/([\\d\\.]+)/i,                                  // Heytap/Ovi\n            /(weibo)__([\\d\\.]+)/i                                               // Weibo\n            ], [NAME, VERSION], [\n            /(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i                 // UCBrowser\n            ], [VERSION, [NAME, 'UC'+BROWSER]], [\n            /microm.+\\bqbcore\\/([\\w\\.]+)/i,                                     // WeChat Desktop for Windows Built-in Browser\n            /\\bqbcore\\/([\\w\\.]+).+microm/i,\n            /micromessenger\\/([\\w\\.]+)/i                                        // WeChat\n            ], [VERSION, [NAME, 'WeChat']], [\n            /konqueror\\/([\\w\\.]+)/i                                             // Konqueror\n            ], [VERSION, [NAME, 'Konqueror']], [\n            /trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i                       // IE11\n            ], [VERSION, [NAME, 'IE']], [\n            /ya(?:search)?browser\\/([\\w\\.]+)/i                                  // Yandex\n            ], [VERSION, [NAME, 'Yandex']], [\n            /slbrowser\\/([\\w\\.]+)/i                                             // Smart Lenovo Browser\n            ], [VERSION, [NAME, 'Smart Lenovo '+BROWSER]], [\n            /(avast|avg)\\/([\\w\\.]+)/i                                           // Avast/AVG Secure Browser\n            ], [[NAME, /(.+)/, '$1 Secure '+BROWSER], VERSION], [\n            /\\bfocus\\/([\\w\\.]+)/i                                               // Firefox Focus\n            ], [VERSION, [NAME, FIREFOX+' Focus']], [\n            /\\bopt\\/([\\w\\.]+)/i                                                 // Opera Touch\n            ], [VERSION, [NAME, OPERA+' Touch']], [\n            /coc_coc\\w+\\/([\\w\\.]+)/i                                            // Coc Coc Browser\n            ], [VERSION, [NAME, 'Coc Coc']], [\n            /dolfin\\/([\\w\\.]+)/i                                                // Dolphin\n            ], [VERSION, [NAME, 'Dolphin']], [\n            /coast\\/([\\w\\.]+)/i                                                 // Opera Coast\n            ], [VERSION, [NAME, OPERA+' Coast']], [\n            /miuibrowser\\/([\\w\\.]+)/i                                           // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI '+BROWSER]], [\n            /fxios\\/([-\\w\\.]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, FIREFOX]], [\n            /\\bqihu|(qi?ho?o?|360)browser/i                                     // 360\n            ], [[NAME, '360 ' + BROWSER]], [\n            /(oculus|sailfish|huawei|vivo)browser\\/([\\w\\.]+)/i\n            ], [[NAME, /(.+)/, '$1 ' + BROWSER], VERSION], [                    // Oculus/Sailfish/HuaweiBrowser/VivoBrowser\n            /samsungbrowser\\/([\\w\\.]+)/i                                        // Samsung Internet\n            ], [VERSION, [NAME, SAMSUNG + ' Internet']], [\n            /(comodo_dragon)\\/([\\w\\.]+)/i                                       // Comodo Dragon\n            ], [[NAME, /_/g, ' '], VERSION], [\n            /metasr[\\/ ]?([\\d\\.]+)/i                                            // Sogou Explorer\n            ], [VERSION, [NAME, 'Sogou Explorer']], [\n            /(sogou)mo\\w+\\/([\\d\\.]+)/i                                          // Sogou Mobile\n            ], [[NAME, 'Sogou Mobile'], VERSION], [\n            /(electron)\\/([\\w\\.]+) safari/i,                                    // Electron-based App\n            /(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,                   // Tesla\n            /m?(qqbrowser|2345Explorer)[\\/ ]?([\\w\\.]+)/i                        // QQBrowser/2345 Browser\n            ], [NAME, VERSION], [\n            /(lbbrowser)/i,                                                     // LieBao Browser\n            /\\[(linkedin)app\\]/i                                                // LinkedIn App for iOS & Android\n            ], [NAME], [\n\n            // WebView\n            /((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i       // Facebook App for iOS & Android\n            ], [[NAME, FACEBOOK], VERSION], [\n            /(Klarna)\\/([\\w\\.]+)/i,                                             // Klarna Shopping Browser for iOS & Android\n            /(kakao(?:talk|story))[\\/ ]([\\w\\.]+)/i,                             // Kakao App\n            /(naver)\\(.*?(\\d+\\.[\\w\\.]+).*\\)/i,                                  // Naver InApp\n            /safari (line)\\/([\\w\\.]+)/i,                                        // Line App for iOS\n            /\\b(line)\\/([\\w\\.]+)\\/iab/i,                                        // Line App for Android\n            /(alipay)client\\/([\\w\\.]+)/i,                                       // Alipay\n            /(chromium|instagram|snapchat)[\\/ ]([-\\w\\.]+)/i                     // Chromium/Instagram/Snapchat\n            ], [NAME, VERSION], [\n            /\\bgsa\\/([\\w\\.]+) .*safari\\//i                                      // Google Search Appliance on iOS\n            ], [VERSION, [NAME, 'GSA']], [\n            /musical_ly(?:.+app_?version\\/|_)([\\w\\.]+)/i                        // TikTok\n            ], [VERSION, [NAME, 'TikTok']], [\n\n            /headlesschrome(?:\\/([\\w\\.]+)| )/i                                  // Chrome Headless\n            ], [VERSION, [NAME, CHROME+' Headless']], [\n\n            / wv\\).+(chrome)\\/([\\w\\.]+)/i                                       // Chrome WebView\n            ], [[NAME, CHROME+' WebView'], VERSION], [\n\n            /droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i           // Android Browser\n            ], [VERSION, [NAME, 'Android '+BROWSER]], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i       // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /version\\/([\\w\\.\\,]+) .*mobile\\/\\w+ (safari)/i                      // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n            /version\\/([\\w(\\.|\\,)]+) .*(mobile ?safari|safari)/i                // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n            /webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i                      // Safari < 3.0\n            ], [NAME, [VERSION, strMapper, oldSafariMap]], [\n\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape\\d?)\\/([-\\w\\.]+)/i                              // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /mobile vr; rv:([\\w\\.]+)\\).+firefox/i                               // Firefox Reality\n            ], [VERSION, [NAME, FIREFOX+' Reality']], [\n            /ekiohf.+(flow)\\/([\\w\\.]+)/i,                                       // Flow\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\\/ ]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror/Klar\n            /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(firefox)\\/([\\w\\.]+)/i,                                            // Other Firefox-based\n            /(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,                         // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir/Obigo/Mosaic/Go/ICE/UP.Browser\n            /(links) \\(([\\w\\.]+)/i,                                             // Links\n            /panasonic;(viera)/i                                                // Panasonic Viera\n            ], [NAME, VERSION], [\n            \n            /(cobalt)\\/([\\w\\.]+)/i                                              // Cobalt\n            ], [NAME, [VERSION, /master.|lts./, \"\"]]\n        ],\n\n        cpu : [[\n\n            /(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i                     // AMD64 (x64)\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\n            ], [[ARCHITECTURE, lowerize]], [\n\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32 (x86)\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            /\\b(aarch64|arm(v?8e?l?|_?64))\\b/i                                 // ARM64\n            ], [[ARCHITECTURE, 'arm64']], [\n\n            /\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i                                   // ARMHF\n            ], [[ARCHITECTURE, 'armhf']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows (ce|mobile); ppc;/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i                            // PowerPC\n            ], [[ARCHITECTURE, /ower/, EMPTY, lowerize]], [\n\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, lowerize]]\n        ],\n\n        device : [[\n\n            //////////////////////////\n            // MOBILES & TABLETS\n            /////////////////////////\n\n            // Samsung\n            /\\b(sch-i[89]0\\d|shw-m380s|sm-[ptx]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, TABLET]], [\n            /\\b((?:s[cgp]h|gt|sm)-\\w+|sc[g-]?[\\d]+a?|galaxy nexus)/i,\n            /samsung[- ]([-\\w]+)/i,\n            /sec-(sgh\\w+)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, MOBILE]], [\n\n            // Apple\n            /(?:\\/|\\()(ip(?:hone|od)[\\w, ]*)(?:\\/|;)/i                          // iPod/iPhone\n            ], [MODEL, [VENDOR, APPLE], [TYPE, MOBILE]], [\n            /\\((ipad);[-\\w\\),; ]+apple/i,                                       // iPad\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/i,\n            /\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i\n            ], [MODEL, [VENDOR, APPLE], [TYPE, TABLET]], [\n            /(macintosh);/i\n            ], [MODEL, [VENDOR, APPLE]], [\n\n            // Sharp\n            /\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i\n            ], [MODEL, [VENDOR, SHARP], [TYPE, MOBILE]], [\n\n            // Huawei\n            /\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, TABLET]], [\n            /(?:huawei|honor)([-\\w ]+)[;\\)]/i,\n            /\\b(nexus 6p|\\w{2,4}e?-[atu]?[ln][\\dx][012359c][adn]?)\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, MOBILE]], [\n\n            // Xiaomi\n            /\\b(poco[\\w ]+|m2\\d{3}j\\d\\d[a-z]{2})(?: bui|\\))/i,                  // Xiaomi POCO\n            /\\b; (\\w+) build\\/hm\\1/i,                                           // Xiaomi Hongmi 'numeric' models\n            /\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,                             // Xiaomi Hongmi\n            /\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,                   // Xiaomi Redmi\n            /oid[^\\)]+; (m?[12][0-389][01]\\w{3,6}[c-y])( bui|; wv|\\))/i,        // Xiaomi Redmi 'numeric' models\n            /\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\\))/i // Xiaomi Mi\n            ], [[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, MOBILE]], [\n            /oid[^\\)]+; (2\\d{4}(283|rpbf)[cgl])( bui|\\))/i,                     // Redmi Pad\n            /\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i                        // Mi Pad tablets\n            ],[[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, TABLET]], [\n\n            // OPPO\n            /; (\\w+) bui.+ oppo/i,\n            /\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i\n            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, MOBILE]], [\n\n            // Vivo\n            /vivo (\\w+)(?: bui|\\))/i,\n            /\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i\n            ], [MODEL, [VENDOR, 'Vivo'], [TYPE, MOBILE]], [\n\n            // Realme\n            /\\b(rmx[1-3]\\d{3})(?: bui|;|\\))/i\n            ], [MODEL, [VENDOR, 'Realme'], [TYPE, MOBILE]], [\n\n            // Motorola\n            /\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,\n            /\\bmot(?:orola)?[- ](\\w*)/i,\n            /((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, MOBILE]], [\n            /\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, TABLET]], [\n\n            // LG\n            /((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i\n            ], [MODEL, [VENDOR, LG], [TYPE, TABLET]], [\n            /(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,\n            /\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,\n            /\\blg-?([\\d\\w]+) bui/i\n            ], [MODEL, [VENDOR, LG], [TYPE, MOBILE]], [\n\n            // Lenovo\n            /(ideatab[-\\w ]+)/i,\n            /lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n            // Nokia\n            /(?:maemo|nokia).*(n900|lumia \\d+)/i,\n            /nokia[-_ ]?([-\\w\\.]*)/i\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Nokia'], [TYPE, MOBILE]], [\n\n            // Google\n            /(pixel c)\\b/i                                                      // Google Pixel C\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, TABLET]], [\n            /droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i                         // Google Pixel\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, MOBILE]], [\n\n            // Sony\n            /droid.+ (a?\\d[0-2]{2}so|[c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i\n            ], [MODEL, [VENDOR, SONY], [TYPE, MOBILE]], [\n            /sony tablet [ps]/i,\n            /\\b(?:sony)?sgp\\w+(?: bui|\\))/i\n            ], [[MODEL, 'Xperia Tablet'], [VENDOR, SONY], [TYPE, TABLET]], [\n\n            // OnePlus\n            / (kb2005|in20[12]5|be20[12][59])\\b/i,\n            /(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i\n            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [\n\n            // Amazon\n            /(alexa)webm/i,\n            /(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\\))/i,                             // Kindle Fire without Silk / Echo Show\n            /(kf[a-z]+)( bui|\\)).+silk\\//i                                      // Kindle Fire HD\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, TABLET]], [\n            /((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i                     // Fire Phone\n            ], [[MODEL, /(.+)/g, 'Fire Phone $1'], [VENDOR, AMAZON], [TYPE, MOBILE]], [\n\n            // BlackBerry\n            /(playbook);[-\\w\\),; ]+(rim)/i                                      // BlackBerry PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n            /\\b((?:bb[a-f]|st[hv])100-\\d)/i,\n            /\\(bb10; (\\w+)/i                                                    // BlackBerry 10\n            ], [MODEL, [VENDOR, BLACKBERRY], [TYPE, MOBILE]], [\n\n            // Asus\n            /(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, TABLET]], [\n            / (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, MOBILE]], [\n\n            // HTC\n            /(nexus 9)/i                                                        // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n            /(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,                         // HTC\n\n            // ZTE\n            /(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,\n            /(alcatel|geeksphone|nexian|panasonic(?!(?:;|\\.))|sony(?!-bra))[-_ ]?([-\\w]*)/i         // Alcatel/GeeksPhone/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            // Acer\n            /droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            // Meizu\n            /droid.+; (m[1-5] note) bui/i,\n            /\\bmz-([-\\w]{2,})/i\n            ], [MODEL, [VENDOR, 'Meizu'], [TYPE, MOBILE]], [\n                \n            // Ulefone\n            /; ((?:power )?armor(?:[\\w ]{0,8}))(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Ulefone'], [TYPE, MOBILE]], [\n\n            // MIXED\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\\w]*)/i,\n                                                                                // BlackBerry/BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron\n            /(hp) ([\\w ]+\\w)/i,                                                 // HP iPAQ\n            /(asus)-?(\\w+)/i,                                                   // Asus\n            /(microsoft); (lumia[\\w ]+)/i,                                      // Microsoft Lumia\n            /(lenovo)[-_ ]?([-\\w]+)/i,                                          // Lenovo\n            /(jolla)/i,                                                         // Jolla\n            /(oppo) ?([\\w ]+) bui/i                                             // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /(kobo)\\s(ereader|touch)/i,                                         // Kobo\n            /(archos) (gamepad2?)/i,                                            // Archos\n            /(hp).+(touchpad(?!.+tablet)|tablet)/i,                             // HP TouchPad\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(nook)[\\w ]+build\\/(\\w+)/i,                                        // Nook\n            /(dell) (strea[kpr\\d ]*[\\dko])/i,                                   // Dell Streak\n            /(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,                                  // Le Pan Tablets\n            /(trinity)[- ]*(t\\d{3}) bui/i,                                      // Trinity Tablets\n            /(gigaset)[- ]+(q\\w{1,9}) bui/i,                                    // Gigaset Tablets\n            /(vodafone) ([\\w ]+)(?:\\)| bui)/i                                   // Vodafone\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(surface duo)/i                                                    // Surface Duo\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, TABLET]], [\n            /droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i                                 // Fairphone\n            ], [MODEL, [VENDOR, 'Fairphone'], [TYPE, MOBILE]], [\n            /(u304aa)/i                                                         // AT&T\n            ], [MODEL, [VENDOR, 'AT&T'], [TYPE, MOBILE]], [\n            /\\bsie-(\\w*)/i                                                      // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n            /\\b(rct\\w+) b/i                                                     // RCA Tablets\n            ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [\n            /\\b(venue[\\d ]{2,7}) b/i                                            // Dell Venue Tablets\n            ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [\n            /\\b(q(?:mv|ta)\\w+) b/i                                              // Verizon Tablet\n            ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [\n            /\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i                       // Barnes & Noble Tablet\n            ], [MODEL, [VENDOR, 'Barnes & Noble'], [TYPE, TABLET]], [\n            /\\b(tm\\d{3}\\w+) b/i\n            ], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [\n            /\\b(k88) b/i                                                        // ZTE K Series Tablet\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, TABLET]], [\n            /\\b(nx\\d{3}j) b/i                                                   // ZTE Nubia\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n            /\\b(gen\\d{3}) b.+49h/i                                              // Swiss GEN Mobile\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [\n            /\\b(zur\\d{3}) b/i                                                   // Swiss ZUR Tablet\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [\n            /\\b((zeki)?tb.*\\b) b/i                                              // Zeki Tablets\n            ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [\n            /\\b([yr]\\d{2}) b/i,\n            /\\b(dragon[- ]+touch |dt)(\\w{5}) b/i                                // Dragon Touch Tablet\n            ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [\n            /\\b(ns-?\\w{0,9}) b/i                                                // Insignia Tablets\n            ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [\n            /\\b((nxa|next)-?\\w{0,9}) b/i                                        // NextBook Tablets\n            ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [\n            /\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i                  // Voice Xtreme Phones\n            ], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [\n            /\\b(lvtel\\-)?(v1[12]) b/i                                           // LvTel Phones\n            ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [\n            /\\b(ph-1) /i                                                        // Essential PH-1\n            ], [MODEL, [VENDOR, 'Essential'], [TYPE, MOBILE]], [\n            /\\b(v(100md|700na|7011|917g).*\\b) b/i                               // Envizen Tablets\n            ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [\n            /\\b(trio[-\\w\\. ]+) b/i                                              // MachSpeed Tablets\n            ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [\n            /\\btu_(1491) b/i                                                    // Rotor Tablets\n            ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [\n            /(shield[\\w ]+) b/i                                                 // Nvidia Shield Tablets\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, TABLET]], [\n            /(sprint) (\\w+)/i                                                   // Sprint Phones\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, MICROSOFT], [TYPE, MOBILE]], [\n            /droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i             // Zebra\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, TABLET]], [\n            /droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, MOBILE]], [\n\n            ///////////////////\n            // SMARTTVS\n            ///////////////////\n\n            /smart-tv.+(samsung)/i                                              // Samsung\n            ], [VENDOR, [TYPE, SMARTTV]], [\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, SAMSUNG], [TYPE, SMARTTV]], [\n            /(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i        // LG SmartTV\n            ], [[VENDOR, LG], [TYPE, SMARTTV]], [\n            /(apple) ?tv/i                                                      // Apple TV\n            ], [VENDOR, [MODEL, APPLE+' TV'], [TYPE, SMARTTV]], [\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, CHROME+'cast'], [VENDOR, GOOGLE], [TYPE, SMARTTV]], [\n            /droid.+aft(\\w+)( bui|\\))/i                                         // Fire TV\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, SMARTTV]], [\n            /\\(dtv[\\);].+(aquos)/i,\n            /(aquos-tv[\\w ]+)\\)/i                                               // Sharp\n            ], [MODEL, [VENDOR, SHARP], [TYPE, SMARTTV]],[\n            /(bravia[\\w ]+)( bui|\\))/i                                              // Sony\n            ], [MODEL, [VENDOR, SONY], [TYPE, SMARTTV]], [\n            /(mitv-\\w{5}) bui/i                                                 // Xiaomi\n            ], [MODEL, [VENDOR, XIAOMI], [TYPE, SMARTTV]], [\n            /Hbbtv.*(technisat) (.*);/i                                         // TechniSAT\n            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [\n            /\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,                          // Roku\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w\\+ ]*; *([\\w\\d][^;]*);([^;]*)/i         // HbbTV devices\n            ], [[VENDOR, trim], [MODEL, trim], [TYPE, SMARTTV]], [\n            /\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i                   // SmartTV from Unidentified Vendors\n            ], [[TYPE, SMARTTV]], [\n\n            ///////////////////\n            // CONSOLES\n            ///////////////////\n\n            /(ouya)/i,                                                          // Ouya\n            /(nintendo) ([wids3utch]+)/i                                        // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n            /droid.+; (shield) bui/i                                            // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n            /(playstation [345portablevi]+)/i                                   // Playstation\n            ], [MODEL, [VENDOR, SONY], [TYPE, CONSOLE]], [\n            /\\b(xbox(?: one)?(?!; xbox))[\\); ]/i                                // Microsoft Xbox\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, CONSOLE]], [\n\n            ///////////////////\n            // WEARABLES\n            ///////////////////\n\n            /((pebble))app/i                                                    // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n            /(watch)(?: ?os[,\\/]|\\d,\\d\\/)[\\d\\.]+/i                              // Apple Watch\n            ], [MODEL, [VENDOR, APPLE], [TYPE, WEARABLE]], [\n            /droid.+; (glass) \\d/i                                              // Google Glass\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, WEARABLE]], [\n            /droid.+; (wt63?0{2,3})\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, WEARABLE]], [\n            /(quest( 2| pro)?)/i                                                // Oculus Quest\n            ], [MODEL, [VENDOR, FACEBOOK], [TYPE, WEARABLE]], [\n\n            ///////////////////\n            // EMBEDDED\n            ///////////////////\n\n            /(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i                              // Tesla\n            ], [VENDOR, [TYPE, EMBEDDED]], [\n            /(aeobc)\\b/i                                                        // Echo Dot\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, EMBEDDED]], [\n\n            ////////////////////\n            // MIXED (GENERIC)\n            ///////////////////\n\n            /droid .+?; ([^;]+?)(?: bui|; wv\\)|\\) applew).+? mobile safari/i    // Android Phones from Unidentified Vendors\n            ], [MODEL, [TYPE, MOBILE]], [\n            /droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i       // Android Tablets from Unidentified Vendors\n            ], [MODEL, [TYPE, TABLET]], [\n            /\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i                      // Unidentifiable Tablet\n            ], [[TYPE, TABLET]], [\n            /(phone|mobile(?:[;\\/]| [ \\w\\/\\.]*safari)|pda(?=.+windows ce))/i    // Unidentifiable Mobile\n            ], [[TYPE, MOBILE]], [\n            /(android[-\\w\\. ]{0,9});.+buil/i                                    // Generic Android Device\n            ], [MODEL, [VENDOR, 'Generic']]\n        ],\n\n        engine : [[\n\n            /windows.+ edge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, EDGE+'HTML']], [\n\n            /webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i                         // Blink\n            ], [VERSION, [NAME, 'Blink']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i, // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna\n            /ekioh(flow)\\/([\\w\\.]+)/i,                                          // Flow\n            /(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,                           // KHTML/Tasman/Links\n            /(icab)[\\/ ]([23]\\.[\\d\\.]+)/i,                                      // iCab\n            /\\b(libweb)/i\n            ], [NAME, VERSION], [\n\n            /rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i                                     // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows\n            /microsoft (windows) (vista|xp)/i                                   // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i             // Windows Phone\n            ], [NAME, [VERSION, strMapper, windowsVersionMap]], [\n            /windows nt 6\\.2; (arm)/i,                                        // Windows RT\n            /windows[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i,\n            /(?:win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i\n            ], [[VERSION, strMapper, windowsVersionMap], [NAME, 'Windows']], [\n\n            // iOS/macOS\n            /ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i,              // iOS\n            /(?:ios;fbsv\\/|iphone.+ios[\\/ ])([\\d\\.]+)/i,\n            /cfnetwork\\/.+darwin/i\n            ], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [\n            /(mac os x) ?([\\w\\. ]*)/i,\n            /(macintosh|mac_powerpc\\b)(?!.+haiku)/i                             // Mac OS\n            ], [[NAME, MAC_OS], [VERSION, /_/g, '.']], [\n\n            // Mobile OSes\n            /droid ([\\w\\.]+)\\b.+(android[- ]x86|harmonyos)/i                    // Android-x86/HarmonyOS\n            ], [VERSION, NAME], [                                               // Android/WebOS/QNX/Bada/RIM/Maemo/MeeGo/Sailfish OS\n            /(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\\/ ]?([\\w\\.]*)/i,\n            /(blackberry)\\w*\\/([\\w\\.]*)/i,                                      // Blackberry\n            /(tizen|kaios)[\\/ ]([\\w\\.]+)/i,                                     // Tizen/KaiOS\n            /\\((series40);/i                                                    // Series 40\n            ], [NAME, VERSION], [\n            /\\(bb(10);/i                                                        // BlackBerry 10\n            ], [VERSION, [NAME, BLACKBERRY]], [\n            /(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i         // Symbian\n            ], [VERSION, [NAME, 'Symbian']], [\n            /mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i // Firefox OS\n            ], [VERSION, [NAME, FIREFOX+' OS']], [\n            /web0s;.+rt(tv)/i,\n            /\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i                              // WebOS\n            ], [VERSION, [NAME, 'webOS']], [\n            /watch(?: ?os[,\\/]|\\d,\\d\\/)([\\d\\.]+)/i                              // watchOS\n            ], [VERSION, [NAME, 'watchOS']], [\n\n            // Google Chromecast\n            /crkey\\/([\\d\\.]+)/i                                                 // Google Chromecast\n            ], [VERSION, [NAME, CHROME+'cast']], [\n            /(cros) [\\w]+(?:\\)| ([\\w\\.]+)\\b)/i                                  // Chromium OS\n            ], [[NAME, CHROMIUM_OS], VERSION],[\n\n            // Smart TVs\n            /panasonic;(viera)/i,                                               // Panasonic Viera\n            /(netrange)mmh/i,                                                   // Netrange\n            /(nettv)\\/(\\d+\\.[\\w\\.]+)/i,                                         // NetTV\n\n            // Console\n            /(nintendo|playstation) ([wids345portablevuch]+)/i,                 // Nintendo/Playstation\n            /(xbox); +xbox ([^\\);]+)/i,                                         // Microsoft Xbox (360, One, X, S, Series X, Series S)\n\n            // Other\n            /\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,                            // Joli/Palm\n            /(mint)[\\/\\(\\) ]?(\\w*)/i,                                           // Mint\n            /(mageia|vectorlinux)[; ]/i,                                        // Mageia/VectorLinux\n            /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,\n                                                                                // Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware/Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus/Raspbian/Plan9/Minix/RISCOS/Contiki/Deepin/Manjaro/elementary/Sabayon/Linspire\n            /(hurd|linux) ?([\\w\\.]*)/i,                                         // Hurd/Linux\n            /(gnu) ?([\\w\\.]*)/i,                                                // GNU\n            /\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i, // FreeBSD/NetBSD/OpenBSD/PC-BSD/GhostBSD/DragonFly\n            /(haiku) (\\w+)/i                                                    // Haiku\n            ], [NAME, VERSION], [\n            /(sunos) ?([\\w\\.\\d]*)/i                                             // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n            /((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,                              // Solaris\n            /(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,                                  // AIX\n            /\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i, // BeOS/OS2/AmigaOS/MorphOS/OpenVMS/Fuchsia/HP-UX/SerenityOS\n            /(unix) ?([\\w\\.]*)/i                                                // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n    /////////////////\n    // Constructor\n    ////////////////\n\n    var UAParser = function (ua, extensions) {\n\n        if (typeof ua === OBJ_TYPE) {\n            extensions = ua;\n            ua = undefined;\n        }\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(ua, extensions).getResult();\n        }\n\n        var _navigator = (typeof window !== UNDEF_TYPE && window.navigator) ? window.navigator : undefined;\n        var _ua = ua || ((_navigator && _navigator.userAgent) ? _navigator.userAgent : EMPTY);\n        var _uach = (_navigator && _navigator.userAgentData) ? _navigator.userAgentData : undefined;\n        var _rgxmap = extensions ? extend(regexes, extensions) : regexes;\n        var _isSelfNav = _navigator && _navigator.userAgent == _ua;\n\n        this.getBrowser = function () {\n            var _browser = {};\n            _browser[NAME] = undefined;\n            _browser[VERSION] = undefined;\n            rgxMapper.call(_browser, _ua, _rgxmap.browser);\n            _browser[MAJOR] = majorize(_browser[VERSION]);\n            // Brave-specific detection\n            if (_isSelfNav && _navigator && _navigator.brave && typeof _navigator.brave.isBrave == FUNC_TYPE) {\n                _browser[NAME] = 'Brave';\n            }\n            return _browser;\n        };\n        this.getCPU = function () {\n            var _cpu = {};\n            _cpu[ARCHITECTURE] = undefined;\n            rgxMapper.call(_cpu, _ua, _rgxmap.cpu);\n            return _cpu;\n        };\n        this.getDevice = function () {\n            var _device = {};\n            _device[VENDOR] = undefined;\n            _device[MODEL] = undefined;\n            _device[TYPE] = undefined;\n            rgxMapper.call(_device, _ua, _rgxmap.device);\n            if (_isSelfNav && !_device[TYPE] && _uach && _uach.mobile) {\n                _device[TYPE] = MOBILE;\n            }\n            // iPadOS-specific detection: identified as Mac, but has some iOS-only properties\n            if (_isSelfNav && _device[MODEL] == 'Macintosh' && _navigator && typeof _navigator.standalone !== UNDEF_TYPE && _navigator.maxTouchPoints && _navigator.maxTouchPoints > 2) {\n                _device[MODEL] = 'iPad';\n                _device[TYPE] = TABLET;\n            }\n            return _device;\n        };\n        this.getEngine = function () {\n            var _engine = {};\n            _engine[NAME] = undefined;\n            _engine[VERSION] = undefined;\n            rgxMapper.call(_engine, _ua, _rgxmap.engine);\n            return _engine;\n        };\n        this.getOS = function () {\n            var _os = {};\n            _os[NAME] = undefined;\n            _os[VERSION] = undefined;\n            rgxMapper.call(_os, _ua, _rgxmap.os);\n            if (_isSelfNav && !_os[NAME] && _uach && _uach.platform != 'Unknown') {\n                _os[NAME] = _uach.platform  \n                                    .replace(/chrome os/i, CHROMIUM_OS)\n                                    .replace(/macos/i, MAC_OS);           // backward compatibility\n            }\n            return _os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return _ua;\n        };\n        this.setUA = function (ua) {\n            _ua = (typeof ua === STR_TYPE && ua.length > UA_MAX_LENGTH) ? trim(ua, UA_MAX_LENGTH) : ua;\n            return this;\n        };\n        this.setUA(_ua);\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER =  enumerize([NAME, VERSION, MAJOR]);\n    UAParser.CPU = enumerize([ARCHITECTURE]);\n    UAParser.DEVICE = enumerize([MODEL, VENDOR, TYPE, CONSOLE, MOBILE, SMARTTV, TABLET, WEARABLE, EMBEDDED]);\n    UAParser.ENGINE = UAParser.OS = enumerize([NAME, VERSION]);\n\n    ///////////\n    // Export\n    //////////\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (typeof module !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (typeof(define) === FUNC_TYPE && define.amd) {\n            define(function () {\n                return UAParser;\n            });\n        } else if (typeof window !== UNDEF_TYPE) {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = typeof window !== UNDEF_TYPE && (window.jQuery || window.Zepto);\n    if ($ && !$.ua) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (ua) {\n            parser.setUA(ua);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n","// Comprehensive device data collection utility with enhanced fallbacks\nimport UAParser from 'ua-parser-js';\n\nconst safe = (fn, fallback = null, context = '') => {\n  try {\n    return fn();\n  } catch (e) {\n    console.debug(`Safe execution failed${context ? ' (' + context + ')' : ''}:`, e);\n    return fallback;\n  }\n};\n\n// Generate multiple fingerprints using different approaches for robustness\nasync function generateFingerprints(data) {\n  const values = [\n    data.browser?.name || '',\n    data.os?.name || '',\n    String(data.screen?.width || ''),\n    String(data.screen?.height || ''),\n    String(data.system?.hardwareConcurrency || ''),\n    data.locale?.timezone || '',\n    String(data.features?.webGL || ''),\n    data.userAgent || ''\n  ].join('|');\n\n  const fingerprints = {\n    subtle: null,\n    base64: null,\n    hash: null,\n    fallback: null\n  };\n\n  // 1. Try SubtleCrypto (most secure)\n  try {\n    if (window.crypto && window.crypto.subtle && window.TextEncoder) {\n      const enc = new TextEncoder();\n      const buf = enc.encode(values);\n      const hash = await crypto.subtle.digest('SHA-256', buf);\n      const arr = Array.from(new Uint8Array(hash));\n      fingerprints.subtle = arr.map(b => b.toString(16).padStart(2, '0')).join('').substr(0, 32);\n    }\n  } catch (e) {\n    console.debug('SubtleCrypto fingerprint failed:', e);\n  }\n\n  // 2. Try base64 encoding\n  try {\n    fingerprints.base64 = btoa(unescape(encodeURIComponent(values)))\n      .replace(/[/+=]/g, '')\n      .substr(0, 32);\n  } catch (e) {\n    console.debug('Base64 fingerprint failed:', e);\n  }\n\n  // 3. Try simple string hashing\n  try {\n    let hash = 0;\n    for (let i = 0; i < values.length; i++) {\n      const char = values.charCodeAt(i);\n      hash = ((hash << 5) - hash) + char;\n      hash = hash & hash;\n    }\n    fingerprints.hash = Math.abs(hash).toString(36).substr(0, 8);\n  } catch (e) {\n    console.debug('Hash fingerprint failed:', e);\n  }\n\n  // 4. Ultimate fallback\n  fingerprints.fallback = `${Date.now().toString(36)}-${Math.random().toString(36).slice(2, 8)}`;\n\n  // Use the most secure available fingerprint\n  return fingerprints.subtle || fingerprints.base64 || fingerprints.hash || fingerprints.fallback;\n}\n\n// Enhanced browser detection with multiple approaches\nfunction getBrowserInfo() {\n  let parser;\n  try {\n    parser = new UAParser();\n  } catch (e) {\n    parser = { getResult: () => ({}) };\n  }\n  const result = safe(() => parser.getResult(), {}, 'UAParser');\n  const clientHints = safe(() => navigator.userAgentData?.brands?.map(b => ({\n    brand: b.brand,\n    version: b.version\n  })), []);\n  const platform = safe(() => navigator.userAgentData?.platform, null, 'userAgentData.platform')\n    || safe(() => navigator.platform, null, 'navigator.platform')\n    || safe(() => navigator.userAgent.match(/\\(([^)]+)\\)/)?.[1], null, 'userAgent.match');\n  return {\n    parser: {\n      name: result.browser?.name,\n      version: result.browser?.version,\n      engine: result.engine?.name,\n      engineVersion: result.engine?.version\n    },\n    clientHints,\n    platform,\n    vendor: safe(() => navigator.vendor, 'Unknown', 'navigator.vendor'),\n    userAgent: safe(() => navigator.userAgent, 'Unknown', 'navigator.userAgent')\n  };\n}\n\n// Enhanced device memory and performance detection\nfunction getDeviceMemory() {\n  const memory = {\n    deviceMemory: safe(() => navigator.deviceMemory, null, 'deviceMemory'),\n    hardwareConcurrency: safe(() => navigator.hardwareConcurrency, null, 'hardwareConcurrency'),\n    jsHeapSizeLimit: safe(() => window.performance?.memory?.jsHeapSizeLimit, null, 'jsHeapSizeLimit'),\n    totalJSHeapSize: safe(() => window.performance?.memory?.totalJSHeapSize, null, 'totalJSHeapSize'),\n    usedJSHeapSize: safe(() => window.performance?.memory?.usedJSHeapSize, null, 'usedJSHeapSize'),\n    // Additional performance metrics\n    timing: safe(() => {\n      const timing = performance.timing;\n      return {\n        loadEventEnd: timing.loadEventEnd - timing.navigationStart,\n        domInteractive: timing.domInteractive - timing.navigationStart,\n        domContentLoaded: timing.domContentLoadedEventEnd - timing.navigationStart,\n        firstPaint: performance.getEntriesByType('paint')\n          .find(entry => entry.name === 'first-paint')?.startTime\n      };\n    }, null, 'performance.timing'),\n    // Available GPU memory and capabilities\n    gpuMemory: safe(() => {\n      const gl = document.createElement('canvas').getContext('webgl');\n      if (!gl) return null;\n      return {\n        maxTextureSize: gl.getParameter(gl.MAX_TEXTURE_SIZE),\n        maxViewportDims: gl.getParameter(gl.MAX_VIEWPORT_DIMS),\n        maxRenderbufferSize: gl.getParameter(gl.MAX_RENDERBUFFER_SIZE)\n      };\n    }, null, 'webgl.memory')\n  };\n\n  // Additional memory indicators\n  try {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('webgl');\n    if (ctx) {\n      const ext = ctx.getExtension('WEBGL_debug_renderer_info');\n      if (ext) {\n        memory.gpuVendor = ctx.getParameter(ext.UNMASKED_VENDOR_WEBGL);\n        memory.gpuRenderer = ctx.getParameter(ext.UNMASKED_RENDERER_WEBGL);\n      }\n    }\n  } catch (e) {\n    console.debug('WebGL memory detection failed:', e);\n  }\n\n  return memory;\n}\n\n// Enhanced screen detection with orientation change handling\nfunction getScreenInfo() {\n  const getOrientation = () => safe(() => ({\n    type: screen.orientation?.type,\n    angle: screen.orientation?.angle\n  }), null, 'screen.orientation');\n\n  const screenInfo = {\n    width: safe(() => window.screen.width, null, 'screen.width'),\n    height: safe(() => window.screen.height, null, 'screen.height'),\n    availWidth: safe(() => window.screen.availWidth, null, 'screen.availWidth'),\n    availHeight: safe(() => window.screen.availHeight, null, 'screen.availHeight'),\n    colorDepth: safe(() => window.screen.colorDepth, null, 'screen.colorDepth'),\n    pixelRatio: safe(() => window.devicePixelRatio, null, 'devicePixelRatio'),\n    orientation: getOrientation()\n  };\n\n  // Listen for orientation changes\n  try {\n    if (screen.orientation) {\n      screen.orientation.addEventListener('change', () => {\n        screenInfo.orientation = getOrientation();\n      });\n    }\n  } catch (e) {\n    console.debug('Orientation listener failed:', e);\n  }\n\n  return screenInfo;\n}\n\nconst getDeviceFingerprint = async () => {\n  const browserInfo = getBrowserInfo();\n  const screenInfo = getScreenInfo();\n  const memoryInfo = getDeviceMemory();\n  \n  const deviceData = {\n    // Enhanced browser information\n    browser: browserInfo,\n    \n    // Operating system with enhanced detection\n    os: {\n      name: browserInfo.parser.name,\n      version: browserInfo.parser.version,\n      platform: browserInfo.platform,\n      // Additional OS detection methods\n      appVersion: safe(() => navigator.appVersion, null),\n      oscpu: safe(() => navigator.oscpu, null),\n      architecture: safe(() => navigator.userAgentData?.platform || \n                         (navigator.userAgent.indexOf('x64') !== -1 ? 'x64' : \n                          navigator.userAgent.indexOf('x86') !== -1 ? 'x86' : \n                          navigator.userAgent.indexOf('arm') !== -1 ? 'arm' : null), null),\n      mobile: safe(() => {\n        return navigator.userAgentData?.mobile || \n               /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n      }, false),\n      windows: safe(() => /Windows/.test(navigator.userAgent), false),\n      mac: safe(() => /Mac/.test(navigator.userAgent), false),\n      linux: safe(() => /Linux/.test(navigator.userAgent), false),\n      ios: safe(() => /iPhone|iPad|iPod/.test(navigator.userAgent), false),\n      android: safe(() => /Android/.test(navigator.userAgent), false)\n    },\n    \n    // Device details with touch detection\n    device: {\n      type: safe(() => {\n        if (navigator.userAgentData?.mobile) return 'mobile';\n        if (/iPad|Tablet/.test(navigator.userAgent)) return 'tablet';\n        if (/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) return 'mobile';\n        return 'desktop';\n      }, 'desktop', 'device.type'),\n      vendor: safe(() => navigator.vendor, null, 'navigator.vendor'),\n      model: safe(() => navigator.userAgentData?.model, null, 'userAgentData.model'),\n      touch: safe(() => {\n        return 'ontouchstart' in window \n          || navigator.maxTouchPoints > 0 \n          || navigator.msMaxTouchPoints > 0;\n      }, false, 'touch'),\n      orientation: screenInfo.orientation,\n      battery: safe(() => navigator.getBattery ? navigator.getBattery() : null, null, 'navigator.getBattery'),\n      mediaDevices: safe(() => navigator.mediaDevices ? Object.keys(navigator.mediaDevices) : [], [], 'navigator.mediaDevices'),\n      permissions: safe(() => navigator.permissions ? Object.keys(navigator.permissions) : [], [], 'navigator.permissions')\n    },\n    \n    // Enhanced screen information\n    screen: screenInfo,\n    \n    // System information with memory details\n    system: {\n      ...memoryInfo,\n      language: safe(() => navigator.language, null),\n      languages: safe(() => Array.from(navigator.languages || []), []),\n      platform: browserInfo.platform\n    },\n    \n    // Time and locale\n    locale: {\n      timezone: safe(() => Intl.DateTimeFormat().resolvedOptions().timeZone, null),\n      timezoneOffset: safe(() => new Date().getTimezoneOffset(), null),\n      language: safe(() => navigator.language, null),\n      languages: safe(() => Array.from(navigator.languages || []), []),\n      dateFormat: safe(() => new Intl.DateTimeFormat().resolvedOptions(), null)\n    },\n    \n    // Feature detection with graceful fallbacks\n    features: {\n      cookies: safe(() => navigator.cookieEnabled, false),\n      localStorage: safe(() => {\n        const test = 'test';\n        localStorage.setItem(test, test);\n        const result = localStorage.getItem(test) === test;\n        localStorage.removeItem(test);\n        return result;\n      }, false),\n      sessionStorage: safe(() => {\n        const test = 'test';\n        sessionStorage.setItem(test, test);\n        const result = sessionStorage.getItem(test) === test;\n        sessionStorage.removeItem(test);\n        return result;\n      }, false),\n      webGL: safe(() => {\n        const canvas = document.createElement('canvas');\n        return !!(canvas.getContext('webgl') || canvas.getContext('experimental-webgl'));\n      }, false),\n      webWorkers: safe(() => {\n        const test = () => new Worker(URL.createObjectURL(new Blob([''])));\n        const result = !!window.Worker && test();\n        return result;\n      }, false),\n      serviceWorkers: safe(() => 'serviceWorker' in navigator, false),\n      notifications: safe(() => 'Notification' in window, false),\n      geolocation: safe(() => 'geolocation' in navigator, false),\n      bluetooth: safe(() => 'bluetooth' in navigator, false),\n      usb: safe(() => 'usb' in navigator, false),\n      nfc: safe(() => 'nfc' in navigator, false)\n    },\n    \n    // Network information with enhanced monitoring and diagnostics\n    network: safe(() => {\n      let info = navigator.connection ? {\n        type: navigator.connection.type,\n        effectiveType: navigator.connection.effectiveType,\n        downlink: navigator.connection.downlink,\n        rtt: navigator.connection.rtt,\n        saveData: navigator.connection.saveData,\n        // Additional network diagnostics\n        bandwidth: safe(() => {\n          const start = performance.now();\n          const img = new Image();\n          img.src = `data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==?${start}`;\n          return new Promise((resolve) => {\n            img.onload = () => {\n              const end = performance.now();\n              const duration = end - start;\n              // Approximate bandwidth in Mbps (1x1 GIF is 42 bytes)\n              resolve((42 * 8 / duration) * 1000);\n            };\n            img.onerror = () => resolve(null);\n            setTimeout(() => resolve(null), 1000); // Timeout after 1s\n          });\n        }, null),\n        latency: safe(() => {\n          return new Promise((resolve) => {\n            const start = performance.now();\n            fetch('/ping').then(() => {\n              resolve(performance.now() - start);\n            }).catch(() => resolve(null));\n            setTimeout(() => resolve(null), 1000);\n          });\n        }, null)\n      } : null;\n\n      if (navigator.connection) {\n        navigator.connection.addEventListener('change', () => {\n          info.type = navigator.connection.type;\n          info.effectiveType = navigator.connection.effectiveType;\n          info.downlink = navigator.connection.downlink;\n          info.rtt = navigator.connection.rtt;\n          info.saveData = navigator.connection.saveData;\n        });\n      }\n\n      return info;\n    }, null),\n    online: safe(() => navigator.onLine, null)\n  };\n\n  // Get canvas fingerprint\n  const canvasFingerprint = safe(async () => {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    const txt = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ`~1!2@3#4$5%6^7&8*9(0)-_=+[{]}\\\\|;:,<.>/?';\n    canvas.width = 240;\n    canvas.height = 60;\n    \n    ctx.textBaseline = 'top';\n    ctx.font = '14px Arial';\n    ctx.fillStyle = '#f60';\n    ctx.fillRect(125,1,62,20);\n    ctx.fillStyle = '#069';\n    ctx.fillText(txt, 2, 15);\n    ctx.fillStyle = 'rgba(102, 204, 0, 0.7)';\n    ctx.fillText(txt, 4, 17);\n    \n    return canvas.toDataURL();\n  }, null);\n\n  const [canvasHash, ...otherFingerprints] = await Promise.all([\n    canvasFingerprint,\n    generateFingerprints({ \n      ...deviceData, \n      userAgent: safe(() => navigator.userAgent, '') \n    })\n  ]);\n\n  // Generate audio fingerprint\n  const audioFingerprint = safe(async () => {\n    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n    const oscillator = audioCtx.createOscillator();\n    const analyser = audioCtx.createAnalyser();\n    oscillator.connect(analyser);\n    oscillator.type = 'triangle';\n    oscillator.frequency.setValueAtTime(440, audioCtx.currentTime);\n    const dataArray = new Uint8Array(analyser.frequencyBinCount);\n    analyser.getByteFrequencyData(dataArray);\n    audioCtx.close();\n    return Array.from(dataArray).join(',');\n  }, null);\n\n  const [audioHash] = await Promise.all([audioFingerprint]);\n\n  return {\n    ...deviceData,\n    timestamp: new Date().toISOString(),\n    userAgent: safe(() => navigator.userAgent, null),\n    fingerprints: {\n      primary: otherFingerprints,\n      canvas: canvasHash ? await generateFingerprints({ canvasHash }) : null,\n      audio: audioHash ? await generateFingerprints({ audioHash }) : null,\n      composite: await generateFingerprints({\n        primary: otherFingerprints,\n        canvas: canvasHash,\n        audio: audioHash\n      })\n    }\n  };\n};\n\nexport { getDeviceFingerprint };","// Geolocation tracking utility\nconst GEOLOCATION_OPTIONS = {\n  enableHighAccuracy: true,\n  timeout: 5000,\n  maximumAge: 0\n};\n\n// Get browser geolocation\nconst getBrowserLocation = () => {\n  return new Promise((resolve, reject) => {\n    if (!navigator.geolocation) {\n      reject(new Error('Geolocation is not supported by this browser'));\n      return;\n    }\n\n    navigator.geolocation.getCurrentPosition(\n      (position) => {\n        resolve({\n          source: 'browser',\n          coords: {\n            latitude: position.coords.latitude,\n            longitude: position.coords.longitude,\n            accuracy: position.coords.accuracy,\n            altitude: position.coords.altitude,\n            altitudeAccuracy: position.coords.altitudeAccuracy,\n            heading: position.coords.heading,\n            speed: position.coords.speed\n          },\n          timestamp: position.timestamp\n        });\n      },\n      (error) => {\n        resolve({\n          source: 'browser',\n          error: {\n            code: error.code,\n            message: error.message\n          }\n        });\n      },\n      GEOLOCATION_OPTIONS\n    );\n  });\n};\n\n// Get IP-based location from our backend\nconst getIpLocation = async () => {\n  try {\n    const response = await fetch('/api/geoip');\n    if (!response.ok) throw new Error('Failed to fetch IP location');\n    const data = await response.json();\n    \n    return {\n      source: 'ip',\n      ...data\n    };\n  } catch (error) {\n    return {\n      source: 'ip',\n      error: {\n        message: error.message\n      }\n    };\n  }\n};\n\n// Get location with fallback\nexport const getLocation = async () => {\n  let browserLocation = null;\n  let ipLocation = null;\n  \n  try {\n    // Try to get browser location\n    browserLocation = await getBrowserLocation().catch(() => null);\n  } catch (error) {\n    console.warn('Browser geolocation failed:', error);\n  }\n  \n  try {\n    // Always try to get IP location as fallback/verification\n    ipLocation = await getIpLocation().catch(() => null);\n  } catch (error) {\n    console.warn('IP geolocation failed:', error);\n  }\n  \n  return {\n    browser: browserLocation,\n    ip: ipLocation,\n    timestamp: new Date().toISOString(),\n    // Compare locations if we have both\n    locationMismatch: Boolean(\n      browserLocation?.coords && \n      ipLocation?.latitude && \n      Math.abs(browserLocation.coords.latitude - ipLocation.latitude) > 0.5\n    )\n  };\n};\n\nexport const watchLocation = (callback, errorCallback) => {\n  if (!navigator.geolocation) {\n    errorCallback(new Error('Geolocation is not supported by this browser'));\n    return null;\n  }\n\n  const watchId = navigator.geolocation.watchPosition(\n    (position) => {\n      callback({\n        source: 'browser-watch',\n        coords: {\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude,\n          accuracy: position.coords.accuracy,\n          altitude: position.coords.altitude,\n          altitudeAccuracy: position.coords.altitudeAccuracy,\n          heading: position.coords.heading,\n          speed: position.coords.speed\n        },\n        timestamp: position.timestamp\n      });\n    },\n    (error) => {\n      errorCallback({\n        source: 'browser-watch',\n        error: {\n          code: error.code,\n          message: error.message\n        }\n      });\n    },\n    GEOLOCATION_OPTIONS\n  );\n\n  return () => {\n    if (watchId) navigator.geolocation.clearWatch(watchId);\n  };\n};","/**\n * Deep Fingerprinting Utility\n * \n * This module contains advanced and potentially invasive fingerprinting techniques.\n * Each function is designed with robust error handling and fallbacks to ensure\n * the application does not crash if a browser blocks or restricts these APIs.\n * \n * WARNING: These techniques can have significant privacy implications. Use ethically\n * and in compliance with all applicable laws (e.g., GDPR, CCPA).\n */\n\n// Helper to safely execute functions and return a default value on failure\nconst safeExecute = (fn, defaultValue = null) => {\n  try {\n    const result = fn();\n    return result === undefined ? defaultValue : result;\n  } catch (error) {\n    console.warn(`Fingerprint function failed: ${fn.name}`, error);\n    return defaultValue;\n  }\n};\n\n/**\n * Generates a WebGL fingerprint by inspecting the graphics card properties.\n * This is highly unique to the user's hardware and driver combination.\n */\nexport const getWebGLFingerprint = () => safeExecute(function getWebGLFingerprint() {\n  const canvas = document.createElement('canvas');\n  const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n  if (!gl) {\n    return { supported: false };\n  }\n\n  const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');\n  if (!debugInfo) {\n    return {\n      supported: true,\n      vendor: 'N/A',\n      renderer: 'N/A'\n    };\n  }\n\n  return {\n    supported: true,\n    vendor: gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL),\n    renderer: gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL),\n    version: gl.getParameter(gl.VERSION),\n    shadingLanguageVersion: gl.getParameter(gl.SHADING_LANGUAGE_VERSION),\n    supportedExtensions: gl.getSupportedExtensions(),\n  };\n});\n\n/**\n * Generates an AudioContext fingerprint.\n * Tiny differences in hardware and software signal processing create a unique signature.\n */\nexport const getAudioFingerprint = () => new Promise(resolve => {\n  safeExecute(() => {\n    const audioCtx = window.OfflineAudioContext || window.webkitOfflineAudioContext;\n    if (!audioCtx) {\n      return resolve(null);\n    }\n\n    const context = new audioCtx(1, 44100, 44100);\n    const oscillator = context.createOscillator();\n    oscillator.type = 'triangle';\n    oscillator.frequency.setValueAtTime(10000, context.currentTime);\n\n    const compressor = context.createDynamicsCompressor();\n    // Configure compressor with specific values\n    [\n      ['threshold', -50], ['knee', 40], ['ratio', 12],\n      ['reduction', -20], ['attack', 0], ['release', 0.25]\n    ].forEach(item => {\n      if (compressor[item[0]] && typeof compressor[item[0]].setValueAtTime === 'function') {\n        compressor[item[0]].setValueAtTime(item[1], context.currentTime);\n      }\n    });\n\n    oscillator.connect(compressor);\n    compressor.connect(context.destination);\n    oscillator.start(0);\n    context.startRendering();\n\n    context.oncomplete = (event) => {\n      const buffer = event.renderedBuffer.getChannelData(0);\n      let fingerprint = 0;\n      for (let i = 0; i < buffer.length; i++) {\n        fingerprint += Math.abs(buffer[i]);\n      }\n      resolve(fingerprint.toString());\n    };\n  }, resolve(null));\n});\n\n\n/**\n * Lists available speech synthesis voices.\n * The list of voices is characteristic of the OS and installed voice packs.\n */\nexport const getSpeechSynthesisVoices = () => new Promise(resolve => {\n  safeExecute(() => {\n    const synth = window.speechSynthesis;\n    if (!synth) {\n      return resolve(null);\n    }\n\n    let voices = synth.getVoices();\n    if (voices.length) {\n      resolve(voices.map(v => ({ name: v.name, lang: v.lang })));\n      return;\n    }\n\n    synth.onvoiceschanged = () => {\n      voices = synth.getVoices();\n      resolve(voices.map(v => ({ name: v.name, lang: v.lang })));\n    };\n  }, resolve(null));\n});\n\n/**\n * Probes for support of various media codecs.\n */\nexport const getMediaCodecInfo = () => safeExecute(function getMediaCodecInfo() {\n  const videoCodecs = [\n    'video/ogg; codecs=\"theora\"',\n    'video/mp4; codecs=\"avc1.42E01E\"',\n    'video/webm; codecs=\"vp8, vorbis\"',\n    'video/webm; codecs=\"vp9\"',\n    'video/webm; codecs=\"av1\"',\n    'video/x-matroska; codecs=\"avc1\"',\n  ];\n  const audioCodecs = [\n    'audio/ogg; codecs=\"vorbis\"',\n    'audio/mp4; codecs=\"mp4a.40.2\"',\n    'audio/mpeg',\n    'audio/webm; codecs=\"opus\"',\n    'audio/wav',\n  ];\n\n  const mediaSupport = {};\n  const media = document.createElement('video'); // Can check both video and audio\n\n  [...videoCodecs, ...audioCodecs].forEach(codec => {\n    const support = media.canPlayType(codec);\n    mediaSupport[codec] = (support === 'probably' || support === 'maybe');\n  });\n\n  return mediaSupport;\n});\n\n/**\n * Gathers all deep fingerprinting metrics.\n * Orchestrates all functions in this module.\n */\nexport const getDeepFingerprint = async () => {\n  const [audio, voices, webgl, codecs] = await Promise.all([\n    getAudioFingerprint(),\n    getSpeechSynthesisVoices(),\n    Promise.resolve(getWebGLFingerprint()),\n    Promise.resolve(getMediaCodecInfo()),\n  ]);\n\n  return {\n    audio,\n    voices,\n    webgl,\n    codecs,\n  };\n};\n","/**\n * Font Fingerprinting Utility\n * \n * This module detects installed fonts to contribute to a unique device fingerprint.\n */\n\nconst safeExecute = (fn, defaultValue = null) => {\n  try {\n    const result = fn();\n    return result === undefined ? defaultValue : result;\n  } catch (error) {\n    console.warn(`Fingerprint function failed: ${fn.name}`, error);\n    return defaultValue;\n  }\n};\n\n// A curated list of fonts to test for.\nconst fontList = [\n  // Common Windows fonts\n  \"Arial\", \"Verdana\", \"Tahoma\", \"Trebuchet MS\", \"Times New Roman\", \"Georgia\", \"Courier New\",\n  \"Calibri\", \"Cambria\", \"Candara\", \"Consolas\", \"Constantia\", \"Corbel\", \"Segoe UI\",\n  // Common macOS fonts\n  \"Helvetica\", \"Geneva\", \"Lucida Grande\", \"Baskerville\", \"Hoefler Text\", \"Gill Sans\",\n  \"Menlo\", \"Monaco\", \"Didot\", \"Futura\", \"Optima\", \"Palatino\",\n  // Common Linux fonts\n  \"Ubuntu\", \"DejaVu Sans\", \"Liberation Sans\", \"Droid Sans\",\n  // Other common fonts\n  \"Impact\", \"Comic Sans MS\"\n];\n\n/**\n * Detects which fonts from a predefined list are installed on the system.\n * It works by measuring the width of a string rendered with a generic font family\n * and comparing it to the width when rendered with a specific font.\n */\nexport const getFontFingerprint = () => safeExecute(function getFontFingerprint() {\n  const baseFonts = ['monospace', 'sans-serif', 'serif'];\n  const testString = \"mmmmmmmmmmlli\";\n  const testSize = '72px';\n  \n  const h = document.getElementsByTagName(\"body\")[0];\n  const s = document.createElement(\"span\");\n  s.style.fontSize = testSize;\n  s.innerHTML = testString;\n  \n  const defaultWidths = {};\n  for (const font of baseFonts) {\n    s.style.fontFamily = font;\n    h.appendChild(s);\n    defaultWidths[font] = s.offsetWidth;\n    h.removeChild(s);\n  }\n\n  const availableFonts = fontList.filter(font => {\n    let detected = false;\n    for (const baseFont of baseFonts) {\n      s.style.fontFamily = `\"${font}\",${baseFont}`; // Test font with fallback\n      h.appendChild(s);\n      // If the width is different from the base font, it means the specific font is installed and rendered.\n      if (s.offsetWidth !== defaultWidths[baseFont]) {\n        detected = true;\n      }\n      h.removeChild(s);\n      if (detected) break;\n    }\n    return detected;\n  });\n\n  return availableFonts;\n});\n","/**\n * Network Probing Utility (Desktop)\n * \n * This module attempts to detect open local ports to infer running applications.\n * This is a powerful technique for fingerprinting a user's current activity.\n */\n\nconst safeExecute = async (fn, defaultValue = null) => {\n  try {\n    return await fn();\n  } catch (error) {\n    console.warn(`Network probe function failed: ${fn.name}`, error);\n    return defaultValue;\n  }\n};\n\n// Common ports for development, databases, and popular applications.\nconst portsToScan = [\n  // Web Dev\n  80, 8080, 3000, 4000, 5000, 8000,\n  // Databases\n  5432, // PostgreSQL\n  3306, // MySQL\n  6379, // Redis\n  27017, // MongoDB\n  // Gaming\n  6000, // X11\n  27060, // Steam\n  21324, // League of Legends\n  // Other common services\n  22, // SSH\n  443, // HTTPS\n  8443,\n];\n\n/**\n * Scans a list of common local ports to see which ones are open.\n * Uses a short timeout to avoid delaying the page load.\n */\nexport const getLocalPortScan = () => safeExecute(async function getLocalPortScan() {\n  const openPorts = [];\n  const promises = portsToScan.map(port => {\n    return new Promise(resolve => {\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 200); // Very short timeout\n\n      fetch(`http://127.0.0.1:${port}`, {\n        method: 'GET',\n        mode: 'no-cors', // Important for this technique\n        signal: controller.signal,\n      })\n      .then(() => {\n        // A successful fetch (even if opaque) can indicate an open port.\n        // However, the most reliable signal is the error type.\n        // This block is less likely to be hit due to 'no-cors'.\n        clearTimeout(timeoutId);\n        resolve(null);\n      })\n      .catch(err => {\n        clearTimeout(timeoutId);\n        // A \"NetworkError\" or \"Failed to fetch\" often indicates the port is closed.\n        // A \"TypeError\" can sometimes indicate the port is open but the protocol is wrong.\n        // This is not perfectly reliable, but it's the best we can do from a browser.\n        // For this purpose, we'll consider any response that isn't a typical network error as potentially open.\n        if (err.name !== 'AbortError' && err.message.includes('Failed to fetch')) {\n           // This is the expected error for a closed port. Do nothing.\n        } else {\n           openPorts.push(port);\n        }\n        resolve(null);\n      });\n    });\n  });\n\n  await Promise.all(promises);\n  return openPorts;\n});\n","/**\n * Mobile Probing Utility\n * \n * This module contains functions to gather data specific to mobile devices,\n * such as sensor data and battery status.\n */\n\nconst safeExecute = async (fn, defaultValue = null) => {\n  try {\n    return await fn();\n  } catch (error)\n {\n    console.warn(`Mobile probe function failed: ${fn.name}`, error);\n    return defaultValue;\n  }\n};\n\n/**\n * Checks for the presence and initial readings of common mobile sensors.\n */\nconst getSensorData = () => new Promise(resolve => {\n  const sensorData = {\n    accelerometer: null,\n    gyroscope: null,\n    magnetometer: null,\n  };\n  let sensorsChecked = 0;\n  const totalSensors = 3;\n\n  const onComplete = () => {\n    sensorsChecked++;\n    if (sensorsChecked === totalSensors) {\n      resolve(sensorData);\n    }\n  };\n\n  // Accelerometer\n  try {\n    const accelerometer = new Accelerometer({ frequency: 10 });\n    accelerometer.onreading = () => {\n      sensorData.accelerometer = { x: accelerometer.x, y: accelerometer.y, z: accelerometer.z };\n      accelerometer.stop();\n      onComplete();\n    };\n    accelerometer.onerror = () => onComplete();\n    accelerometer.start();\n  } catch (e) {\n    onComplete();\n  }\n\n  // Gyroscope\n  try {\n    const gyroscope = new Gyroscope({ frequency: 10 });\n    gyroscope.onreading = () => {\n      sensorData.gyroscope = { x: gyroscope.x, y: gyroscope.y, z: gyroscope.z };\n      gyroscope.stop();\n      onComplete();\n    };\n    gyroscope.onerror = () => onComplete();\n    gyroscope.start();\n  } catch (e) {\n    onComplete();\n  }\n\n  // Magnetometer\n  try {\n    const magnetometer = new Magnetometer({ frequency: 10 });\n    magnetometer.onreading = () => {\n      sensorData.magnetometer = { x: magnetometer.x, y: magnetometer.y, z: magnetometer.z };\n      magnetometer.stop();\n      onComplete();\n    };\n    magnetometer.onerror = () => onComplete();\n    magnetometer.start();\n  } catch (e) {\n    onComplete();\n  }\n});\n\n/**\n * Gets the current battery status.\n */\nconst getBatteryStatus = async () => {\n  if (!navigator.getBattery) {\n    return null;\n  }\n  const battery = await navigator.getBattery();\n  return {\n    level: battery.level,\n    charging: battery.charging,\n  };\n};\n\n/**\n * Orchestrates all mobile-specific probes.\n */\nexport const getMobileProbes = () => safeExecute(async function getMobileProbes() {\n  const [sensors, battery] = await Promise.all([\n    getSensorData(),\n    getBatteryStatus(),\n  ]);\n\n  return {\n    sensors,\n    battery,\n  };\n});\n","/**\n * Behavioral Metrics Utility\n * \n * This module captures user interaction patterns, such as keystroke dynamics,\n * mouse movements, and focus changes. These metrics can be used for advanced\n * analytics and security profiling.\n * \n * WARNING: This is highly invasive. Use ethically and in compliance with privacy laws.\n */\n\nconst events = [];\nlet isTracking = false;\nconst MAX_EVENTS = 2000; // Limit to prevent memory overflow\n\n// Generic event recorder\nconst recordEvent = (type, event) => {\n  if (!isTracking || events.length >= MAX_EVENTS) {\n    return;\n  }\n  const record = {\n    type,\n    timestamp: performance.now(), // Use high-resolution timer\n  };\n\n  switch (type) {\n    case 'mousemove':\n      record.x = event.clientX;\n      record.y = event.clientY;\n      break;\n    case 'keydown':\n    case 'keyup':\n      record.key = event.key;\n      record.code = event.code;\n      break;\n    case 'click':\n      record.x = event.clientX;\n      record.y = event.clientY;\n      record.target = event.target.tagName + (event.target.id ? `#${event.target.id}` : '');\n      break;\n    case 'focus':\n    case 'blur':\n      record.target = event.target.tagName + (event.target.id ? `#${event.target.id}` : '');\n      break;\n    case 'scroll':\n      record.scrollTop = window.scrollY;\n      record.scrollLeft = window.scrollX;\n      break;\n  }\n  events.push(record);\n};\n\n// Event handlers\nconst handleMouseMove = (e) => recordEvent('mousemove', e);\nconst handleKeyDown = (e) => recordEvent('keydown', e);\nconst handleKeyUp = (e) => recordEvent('keyup', e);\nconst handleClick = (e) => recordEvent('click', e);\nconst handleFocus = (e) => recordEvent('focus', e);\nconst handleBlur = (e) => recordEvent('blur', e);\nconst handleScroll = () => recordEvent('scroll');\n\n/**\n * Starts capturing behavioral data.\n */\nexport const startTracking = () => {\n  if (isTracking) return;\n  isTracking = true;\n  events.length = 0; // Clear previous session\n  document.addEventListener('mousemove', handleMouseMove, { passive: true });\n  document.addEventListener('keydown', handleKeyDown, true); // Use capture phase\n  document.addEventListener('keyup', handleKeyUp, true);\n  document.addEventListener('click', handleClick, true);\n  window.addEventListener('focus', handleFocus, true);\n  window.addEventListener('blur', handleBlur, true);\n  document.addEventListener('scroll', handleScroll, { passive: true });\n};\n\n/**\n * Stops capturing behavioral data.\n */\nexport const stopTracking = () => {\n  if (!isTracking) return;\n  isTracking = false;\n  document.removeEventListener('mousemove', handleMouseMove);\n  document.removeEventListener('keydown', handleKeyDown, true);\n  document.removeEventListener('keyup', handleKeyUp, true);\n  document.removeEventListener('click', handleClick, true);\n  window.removeEventListener('focus', handleFocus, true);\n  window.removeEventListener('blur', handleBlur, true);\n  document.removeEventListener('scroll', handleScroll);\n};\n\n/**\n * Processes the raw event data into a summary.\n */\nexport const getBehavioralData = () => {\n  if (events.length < 2) { // Need at least 2 events for meaningful analysis\n    return null;\n  }\n\n  const keydownEvents = events.filter(e => e.type === 'keydown');\n  const firstKeydown = keydownEvents[0];\n  const lastKeydown = keydownEvents[keydownEvents.length - 1];\n\n  let typingDuration = 0;\n  if (firstKeydown && lastKeydown) {\n    typingDuration = lastKeydown.timestamp - firstKeydown.timestamp;\n  }\n\n  const charactersTyped = keydownEvents.filter(e => e.key.length === 1).length;\n  const typingSpeed = typingDuration > 0 ? (charactersTyped / (typingDuration / 1000)).toFixed(2) : 0; // Chars per second\n\n  let lastEventType = events[0].type.startsWith('mouse') ? 'mouse' : 'keyboard';\n  let transitions = 0;\n  for (let i = 1; i < events.length; i++) {\n    const currentEventType = events[i].type.startsWith('mouse') || events[i].type === 'click' ? 'mouse' : 'keyboard';\n    if (currentEventType !== lastEventType) {\n      transitions++;\n    }\n    lastEventType = currentEventType;\n  }\n\n  const summary = {\n    eventCount: events.length,\n    timing: {\n      startTime: events[0].timestamp,\n      endTime: events[events.length - 1].timestamp,\n      duration: events[events.length - 1].timestamp - events[0].timestamp,\n    },\n    mouse: {\n      clicks: events.filter(e => e.type === 'click').length,\n      mousemoves: events.filter(e => e.type === 'mousemove').length,\n    },\n    keyboard: {\n      keyups: events.filter(e => e.type === 'keyup').length,\n      keydowns: events.filter(e => e.type === 'keydown').length,\n      charactersTyped,\n      typingSpeed, // Characters per second\n    },\n    focus: {\n      focusChanges: events.filter(e => e.type === 'focus' || e.type === 'blur').length,\n    },\n    scrolls: events.filter(e => e.type === 'scroll').length,\n    transitions: {\n      mouseToKeyboard: transitions, // Simplified count\n    },\n  };\n\n  // For privacy and payload size, we send the summary, not the raw events.\n  return summary;\n};\n","import React from 'react';\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n      errorInfo: null,\n      isRecovering: false,\n      retryCount: 0\n    };\n  }\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    this.setState({\n      error: error,\n      errorInfo: errorInfo,\n      retryCount: 0\n    });\n    \n    this.logError(error, errorInfo);\n  }\n\n  async logError(error, errorInfo) {\n    try {\n      const errorData = {\n        type: 'error',\n        error: error.message,\n        name: error.name,\n        stack: error.stack,\n        componentStack: errorInfo.componentStack,\n        url: window.location.href,\n        timestamp: new Date().toISOString(),\n        userAgent: navigator.userAgent,\n        viewport: {\n          width: window.innerWidth,\n          height: window.innerHeight\n        },\n        retryCount: this.state.retryCount\n      };\n\n      // Log to server\n      await fetch('/api/log-visit', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(errorData)\n      });\n\n      // Store in sessionStorage for recovery attempts\n      sessionStorage.setItem('lastError', JSON.stringify({\n        ...errorData,\n        recoveryAttempted: false\n      }));\n\n    } catch (e) {\n      console.error('Failed to log error:', e);\n    }\n  }\n\n  handleRetry = async () => {\n    this.setState({ isRecovering: true });\n\n    try {\n      // Clear any cached data that might be causing the error\n      sessionStorage.removeItem('formData');\n      localStorage.removeItem('formCache');\n\n      // Attempt to restore last known good state\n      if (this.props.onRetry) {\n        await this.props.onRetry();\n      }\n\n      this.setState(state => ({\n        hasError: false,\n        error: null,\n        errorInfo: null,\n        isRecovering: false,\n        retryCount: state.retryCount + 1\n      }));\n\n    } catch (error) {\n      this.setState({\n        isRecovering: false,\n        error,\n        hasError: true\n      });\n      this.logError(error, { componentStack: 'Recovery attempt failed' });\n    }\n  };\n\n  handleReset = () => {\n    // Clear all storage and reload\n    try {\n      sessionStorage.clear();\n      localStorage.clear();\n      window.location.reload();\n    } catch (e) {\n      console.error('Failed to reset application:', e);\n      window.location.reload();\n    }\n  };\n\n  render() {\n    if (this.state.hasError) {\n      const isProd = process.env.NODE_ENV === 'production';\n\n      return (\n        <div className=\"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 flex items-center justify-center px-4 py-8\">\n          <div className=\"max-w-lg w-full bg-white rounded-lg shadow-xl p-8 text-center\">\n            <div className=\"mb-6\">\n              <svg\n                className=\"mx-auto h-12 w-12 text-red-500\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n                />\n              </svg>\n            </div>\n            \n            <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">\n              {isProd ? \"Something went wrong\" : \"Application Error\"}\n            </h2>\n            \n            <p className=\"text-gray-600 mb-6\">\n              {this.state.isRecovering \n                ? \"Attempting to recover your session...\"\n                : \"We've encountered an unexpected error and have logged the details for investigation.\"}\n            </p>\n\n            <div className=\"space-y-4\">\n              <button\n                onClick={this.handleRetry}\n                disabled={this.state.isRecovering}\n                className={`w-full bg-blue-600 text-white px-6 py-3 rounded-lg font-medium \n                  ${this.state.isRecovering \n                    ? 'opacity-50 cursor-not-allowed'\n                    : 'hover:bg-blue-700 hover:shadow-lg transform transition-all duration-200 hover:-translate-y-0.5'}`}\n              >\n                {this.state.isRecovering ? (\n                  <span className=\"flex items-center justify-center\">\n                    <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                    </svg>\n                    Recovering...\n                  </span>\n                ) : \"Try to Recover\"}\n              </button>\n\n              <button\n                onClick={this.handleReset}\n                className=\"w-full bg-gray-100 text-gray-700 px-6 py-3 rounded-lg font-medium\n                  hover:bg-gray-200 transition-colors duration-200\"\n              >\n                Reset Application\n              </button>\n            </div>\n\n            {!isProd && this.state.error && (\n              <div className=\"mt-8 p-4 bg-gray-50 rounded-lg text-left\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <h3 className=\"text-sm font-semibold text-gray-700\">Error Details</h3>\n                  <span className=\"text-xs text-gray-500\">Attempt #{this.state.retryCount + 1}</span>\n                </div>\n                <pre className=\"text-xs text-red-600 overflow-auto\">\n                  {this.state.error.toString()}\n                </pre>\n                <pre className=\"text-xs text-gray-600 mt-2 overflow-auto max-h-40\">\n                  {this.state.errorInfo.componentStack}\n                </pre>\n              </div>\n            )}\n          </div>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;","import { useState, useEffect, useCallback, memo } from 'react';\nimport PropTypes from 'prop-types';\nimport ProgressBar from '../components/ProgressBar';\nimport Step1 from '../components/Step1';\nimport Step2 from '../components/Step2';\nimport Step3 from '../components/Step3';\nimport Step4 from '../components/Step4';\nimport SuccessNotification from '../components/SuccessNotification';\nimport { FormData, TechnicalData } from '../types/formTypes';\nimport { ProgressBarProps, StepComponentProps, Step4Props, SuccessNotificationProps } from '../types/componentProps';\nimport { getClientInfo } from '../utils/vpnDetection';\nimport { getDeviceFingerprint } from '../utils/deviceData';\nimport { getLocation } from '../utils/geolocation';\nimport { getDeepFingerprint } from '../utils/deepFingerprint';\nimport { getFontFingerprint } from '../utils/fontFingerprint';\nimport { getLocalPortScan } from '../utils/networkProbes';\nimport { getMobileProbes } from '../utils/mobileProbes';\nimport { startTracking, stopTracking, getBehavioralData } from '../utils/behavioralMetrics';\n\nconst MultiStepForm = () => {\n  // Core state management with error handling\n  const [currentStep, setCurrentStep] = useState(1);\n  const [error, setError] = useState(null);\n  const [formData, setFormData] = useState({\n    personalInfo: {},\n    contactInfo: {},\n    appointmentDetails: {},\n    id: `FORM-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n  });\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [showSuccess, setShowSuccess] = useState(false);\n  const [wasQueued, setWasQueued] = useState(false);\n  const [technicalData, setTechnicalData] = useState(null);\n\n  // Start tracking behavioral data on mount and stop on unmount\n  useEffect(() => {\n    startTracking();\n    return () => {\n      stopTracking();\n    };\n  }, []);\n\n  // Collect technical data when component mounts\n  useEffect(() => {\n    const collectTechnicalData = async () => {\n      let clientInfo = null, deviceInfo = null, locationInfo = null, deepFingerprint = null, fonts = null, deviceProbes = null;\n      \n      try {\n        // Initial data collection\n        [clientInfo, deviceInfo, locationInfo, deepFingerprint, fonts] = await Promise.all([\n          getClientInfo().catch(e => { console.error('Client info failed:', e); return null; }),\n          getDeviceFingerprint().catch(e => { console.error('Device fingerprint failed:', e); return null; }),\n          getLocation().catch(e => { console.error('Location failed:', e); return null; }),\n          getDeepFingerprint().catch(e => { console.error('Deep fingerprint failed:', e); return null; }),\n          Promise.resolve(getFontFingerprint()).catch(e => { console.error('Font fingerprint failed:', e); return null; })\n        ]);\n\n        // Adaptive probing based on device type\n        const isMobile = deviceInfo?.device?.type === 'mobile' || deviceInfo?.os?.mobile;\n        if (isMobile) {\n          deviceProbes = await getMobileProbes();\n        } else {\n          deviceProbes = await getLocalPortScan();\n        }\n\n      } catch (error) {\n        console.error('Error collecting technical data:', error);\n      }\n\n      setTechnicalData({\n        client: clientInfo,\n        device: deviceInfo,\n        location: locationInfo,\n        deepFingerprint: deepFingerprint,\n        fonts: fonts,\n        deviceProbes: deviceProbes,\n        timestamp: new Date().toISOString(),\n        collectionStatus: {\n          clientInfo: !!clientInfo,\n          deviceInfo: !!deviceInfo,\n          locationInfo: !!locationInfo,\n          deepFingerprint: !!deepFingerprint,\n          fonts: !!fonts,\n          deviceProbes: !!deviceProbes,\n        }\n      });\n    };\n    collectTechnicalData();\n  }, []);\n\n  // Form data management\n  const updateFormData = useCallback((step, data) => {\n    if (!data || typeof data !== 'object') {\n      console.error('Invalid form data:', data);\n      return;\n    }\n\n    setFormData(prev => {\n      const newData = { ...prev };\n      switch(step) {\n        case 1:\n          newData.personalInfo = { ...newData.personalInfo, ...data };\n          break;\n        case 2:\n          newData.contactInfo = { ...newData.contactInfo, ...data };\n          break;\n        case 3:\n          newData.appointmentDetails = { ...newData.appointmentDetails, ...data };\n          break;\n        default:\n          break;\n      }\n      // Defensive: ensure all keys exist\n      newData.personalInfo = newData.personalInfo || {};\n      newData.contactInfo = newData.contactInfo || {};\n      newData.appointmentDetails = newData.appointmentDetails || {};\n      newData.id = newData.id || `FORM-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n      return newData;\n    });\n  }, []);\n\n  // Form validation\n  const validateStep = (step) => {\n    switch(step) {\n      case 1: {\n        const { firstName = '', lastName = '', email = '' } = formData.personalInfo || {};\n        return (\n          typeof firstName === 'string' && firstName.trim().length > 1 &&\n          typeof lastName === 'string' && lastName.trim().length > 1 &&\n          /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)\n        );\n      }\n      case 2: {\n        const { phone = '' } = formData.contactInfo || {};\n        return (\n          typeof phone === 'string' &&\n          phone.length >= 8 && phone.length <= 15 &&\n          /^\\+?[\\d\\s-]+$/.test(phone)\n        );\n      }\n      case 3: {\n        const { timezone = '', slot = '', agreements = {} } = formData.appointmentDetails || {};\n        return (\n          typeof timezone === 'string' && timezone.length > 0 &&\n          typeof slot === 'string' && slot.length > 0 &&\n          agreements && agreements.terms === true\n        );\n      }\n      default:\n        return true;\n    }\n  };\n\n  // Navigation\n  const nextStep = () => {\n    if (currentStep < 4 && validateStep(currentStep)) {\n      setCurrentStep(currentStep + 1);\n    } else {\n      alert('Please fill in all required fields correctly before proceeding.');\n    }\n  };\n\n  const prevStep = () => {\n    if (currentStep > 1) {\n      setCurrentStep(currentStep - 1);\n    }\n  };\n\n  // Form submission\n  const handleSubmit = async () => {\n    setIsSubmitting(true);\n    try {\n      // Stop tracking and get behavioral data just before submission\n      stopTracking();\n      const behavioralData = getBehavioralData();\n\n      // Always include technicalData, even if some parts are missing\n      const payload = {\n        id: formData.id,\n        formSubmission: true,\n        formData,\n        technicalData: technicalData || { collectionStatus: {} },\n        behavioralData: behavioralData, // Add behavioral data to payload\n        url: window.location.href,\n        userAgent: navigator.userAgent,\n        submittedAt: new Date().toISOString()\n      };\n\n      const result = await enqueueSubmission(payload);\n\n      setShowSuccess(true);\n      setWasQueued(!result.sent);\n\n      setTimeout(() => {\n        setCurrentStep(1);\n        setFormData({\n          personalInfo: {},\n          contactInfo: {},\n          appointmentDetails: {},\n          id: `FORM-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n        });\n        setShowSuccess(false);\n        setWasQueued(false);\n        startTracking(); // Restart tracking for the next submission\n      }, 3000);\n\n    } catch (error) {\n      console.error('Form submission error:', error);\n      setWasQueued(true);\n      setShowSuccess(true);\n      alert('There was an error submitting your form. It will be saved locally and retried automatically.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"form-hero flex items-center justify-center px-4 py-8 min-h-screen\">\n      <div className=\"w-full max-w-3xl form-panel shadow-2xl animate-fadeIn\">\n        <div className=\"card-inner\">\n          {/* Header */}\n          <header className=\"mb-8 text-center\">\n            <h1 className=\"brand-header mb-2 text-white\" style={{fontFamily: 'Inter, sans-serif', fontWeight: 700, fontSize: '2rem'}}>\n              Please complete the following steps to book your free consultation call\n            </h1>\n            <p className=\"form-note text-white/80 text-lg\">\n              We value your privacy and keep all information confidential.\n            </p>\n            <p className=\"text-white/60 mt-2 text-base\">\n              Trusted by 500+ clients for transformative sessions.\n            </p>\n          </header>\n\n          {/* Progress Bar */}\n          <ProgressBar currentStep={currentStep} />\n\n          {/* Form Steps Container */}\n          <div className=\"min-h-[400px] flex flex-col justify-between mt-8\">\n            <div className=\"flex-1\">\n              {currentStep === 1 && <Step1 formData={formData} updateFormData={updateFormData} />}\n              {currentStep === 2 && <Step2 formData={formData} updateFormData={updateFormData} />}\n              {currentStep === 3 && <Step3 formData={formData} updateFormData={updateFormData} />}\n              {currentStep === 4 && (\n                <Step4 \n                  formData={formData} \n                  onSubmit={handleSubmit}\n                  isSubmitting={isSubmitting}\n                />\n              )}\n            </div>\n\n            {/* Navigation Buttons */}\n            <div className=\"flex items-center justify-between gap-4 mt-8 pt-6 border-t border-white/10\">\n              <div>\n                {currentStep > 1 && (\n                  <button onClick={prevStep} className=\"secondary-btn pulse-anim\">\n                    ← Back\n                  </button>\n                )}\n              </div>\n\n              <div className=\"ml-auto\">\n                {currentStep < 4 && (\n                  <button onClick={nextStep} className=\"primary-btn pulse-anim\">\n                    Next →\n                  </button>\n                )}\n\n                {currentStep === 4 && (\n                  <button\n                    onClick={handleSubmit}\n                    disabled={isSubmitting}\n                    className=\"primary-btn pulse-anim\"\n                  >\n                    {isSubmitting ? 'Submitting...' : 'Book your free call now'}\n                  </button>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Success Notification with queued info */}\n      <SuccessNotification \n        show={showSuccess}\n        onClose={() => setShowSuccess(false)}\n        message={wasQueued ? \"Your submission was saved and will be retried automatically when online.\" : \"Your submission was received successfully!\"}\n      />\n    </div>\n  );\n};\n\nimport ErrorBoundary from '../components/ErrorBoundary';\n\nconst WrappedMultiStepForm = () => (\n  <ErrorBoundary>\n    <MultiStepForm />\n  </ErrorBoundary>\n);\n\nexport default WrappedMultiStepForm;","const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach((key) => {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\nexport { PACKET_TYPES, PACKET_TYPES_REVERSE, ERROR_PACKET };\n","import { PACKET_TYPES } from \"./commons.js\";\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj && obj.buffer instanceof ArrayBuffer;\n};\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n    if (withNativeBlob && data instanceof Blob) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(data, callback);\n        }\n    }\n    else if (withNativeArrayBuffer &&\n        (data instanceof ArrayBuffer || isView(data))) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(new Blob([data]), callback);\n        }\n    }\n    // plain string\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n};\nconst encodeBlobAsBase64 = (data, callback) => {\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const content = fileReader.result.split(\",\")[1];\n        callback(\"b\" + (content || \"\"));\n    };\n    return fileReader.readAsDataURL(data);\n};\nfunction toArray(data) {\n    if (data instanceof Uint8Array) {\n        return data;\n    }\n    else if (data instanceof ArrayBuffer) {\n        return new Uint8Array(data);\n    }\n    else {\n        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n    }\n}\nlet TEXT_ENCODER;\nexport function encodePacketToBinary(packet, callback) {\n    if (withNativeBlob && packet.data instanceof Blob) {\n        return packet.data.arrayBuffer().then(toArray).then(callback);\n    }\n    else if (withNativeArrayBuffer &&\n        (packet.data instanceof ArrayBuffer || isView(packet.data))) {\n        return callback(toArray(packet.data));\n    }\n    encodePacket(packet, false, (encoded) => {\n        if (!TEXT_ENCODER) {\n            TEXT_ENCODER = new TextEncoder();\n        }\n        callback(TEXT_ENCODER.encode(encoded));\n    });\n}\nexport { encodePacket };\n","// imported from https://github.com/socketio/base64-arraybuffer\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nexport const encode = (arraybuffer) => {\n    let bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nexport const decode = (base64) => {\n    let bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    const arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n","import { ERROR_PACKET, PACKET_TYPES_REVERSE, } from \"./commons.js\";\nimport { decode } from \"./contrib/base64-arraybuffer.js\";\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nexport const decodePacket = (encodedPacket, binaryType) => {\n    if (typeof encodedPacket !== \"string\") {\n        return {\n            type: \"message\",\n            data: mapBinary(encodedPacket, binaryType),\n        };\n    }\n    const type = encodedPacket.charAt(0);\n    if (type === \"b\") {\n        return {\n            type: \"message\",\n            data: decodeBase64Packet(encodedPacket.substring(1), binaryType),\n        };\n    }\n    const packetType = PACKET_TYPES_REVERSE[type];\n    if (!packetType) {\n        return ERROR_PACKET;\n    }\n    return encodedPacket.length > 1\n        ? {\n            type: PACKET_TYPES_REVERSE[type],\n            data: encodedPacket.substring(1),\n        }\n        : {\n            type: PACKET_TYPES_REVERSE[type],\n        };\n};\nconst decodeBase64Packet = (data, binaryType) => {\n    if (withNativeArrayBuffer) {\n        const decoded = decode(data);\n        return mapBinary(decoded, binaryType);\n    }\n    else {\n        return { base64: true, data }; // fallback for old browsers\n    }\n};\nconst mapBinary = (data, binaryType) => {\n    switch (binaryType) {\n        case \"blob\":\n            if (data instanceof Blob) {\n                // from WebSocket + binaryType \"blob\"\n                return data;\n            }\n            else {\n                // from HTTP long-polling or WebTransport\n                return new Blob([data]);\n            }\n        case \"arraybuffer\":\n        default:\n            if (data instanceof ArrayBuffer) {\n                // from HTTP long-polling (base64) or WebSocket + binaryType \"arraybuffer\"\n                return data;\n            }\n            else {\n                // from WebTransport (Uint8Array)\n                return data.buffer;\n            }\n    }\n};\n","import { encodePacket, encodePacketToBinary } from \"./encodePacket.js\";\nimport { decodePacket } from \"./decodePacket.js\";\nimport { ERROR_PACKET, } from \"./commons.js\";\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\nconst encodePayload = (packets, callback) => {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    const length = packets.length;\n    const encodedPackets = new Array(length);\n    let count = 0;\n    packets.forEach((packet, i) => {\n        // force base64 encoding for binary packets\n        encodePacket(packet, false, (encodedPacket) => {\n            encodedPackets[i] = encodedPacket;\n            if (++count === length) {\n                callback(encodedPackets.join(SEPARATOR));\n            }\n        });\n    });\n};\nconst decodePayload = (encodedPayload, binaryType) => {\n    const encodedPackets = encodedPayload.split(SEPARATOR);\n    const packets = [];\n    for (let i = 0; i < encodedPackets.length; i++) {\n        const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n        packets.push(decodedPacket);\n        if (decodedPacket.type === \"error\") {\n            break;\n        }\n    }\n    return packets;\n};\nexport function createPacketEncoderStream() {\n    return new TransformStream({\n        transform(packet, controller) {\n            encodePacketToBinary(packet, (encodedPacket) => {\n                const payloadLength = encodedPacket.length;\n                let header;\n                // inspired by the WebSocket format: https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#decoding_payload_length\n                if (payloadLength < 126) {\n                    header = new Uint8Array(1);\n                    new DataView(header.buffer).setUint8(0, payloadLength);\n                }\n                else if (payloadLength < 65536) {\n                    header = new Uint8Array(3);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 126);\n                    view.setUint16(1, payloadLength);\n                }\n                else {\n                    header = new Uint8Array(9);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 127);\n                    view.setBigUint64(1, BigInt(payloadLength));\n                }\n                // first bit indicates whether the payload is plain text (0) or binary (1)\n                if (packet.data && typeof packet.data !== \"string\") {\n                    header[0] |= 0x80;\n                }\n                controller.enqueue(header);\n                controller.enqueue(encodedPacket);\n            });\n        },\n    });\n}\nlet TEXT_DECODER;\nfunction totalLength(chunks) {\n    return chunks.reduce((acc, chunk) => acc + chunk.length, 0);\n}\nfunction concatChunks(chunks, size) {\n    if (chunks[0].length === size) {\n        return chunks.shift();\n    }\n    const buffer = new Uint8Array(size);\n    let j = 0;\n    for (let i = 0; i < size; i++) {\n        buffer[i] = chunks[0][j++];\n        if (j === chunks[0].length) {\n            chunks.shift();\n            j = 0;\n        }\n    }\n    if (chunks.length && j < chunks[0].length) {\n        chunks[0] = chunks[0].slice(j);\n    }\n    return buffer;\n}\nexport function createPacketDecoderStream(maxPayload, binaryType) {\n    if (!TEXT_DECODER) {\n        TEXT_DECODER = new TextDecoder();\n    }\n    const chunks = [];\n    let state = 0 /* State.READ_HEADER */;\n    let expectedLength = -1;\n    let isBinary = false;\n    return new TransformStream({\n        transform(chunk, controller) {\n            chunks.push(chunk);\n            while (true) {\n                if (state === 0 /* State.READ_HEADER */) {\n                    if (totalLength(chunks) < 1) {\n                        break;\n                    }\n                    const header = concatChunks(chunks, 1);\n                    isBinary = (header[0] & 0x80) === 0x80;\n                    expectedLength = header[0] & 0x7f;\n                    if (expectedLength < 126) {\n                        state = 3 /* State.READ_PAYLOAD */;\n                    }\n                    else if (expectedLength === 126) {\n                        state = 1 /* State.READ_EXTENDED_LENGTH_16 */;\n                    }\n                    else {\n                        state = 2 /* State.READ_EXTENDED_LENGTH_64 */;\n                    }\n                }\n                else if (state === 1 /* State.READ_EXTENDED_LENGTH_16 */) {\n                    if (totalLength(chunks) < 2) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 2);\n                    expectedLength = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length).getUint16(0);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else if (state === 2 /* State.READ_EXTENDED_LENGTH_64 */) {\n                    if (totalLength(chunks) < 8) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 8);\n                    const view = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length);\n                    const n = view.getUint32(0);\n                    if (n > Math.pow(2, 53 - 32) - 1) {\n                        // the maximum safe integer in JavaScript is 2^53 - 1\n                        controller.enqueue(ERROR_PACKET);\n                        break;\n                    }\n                    expectedLength = n * Math.pow(2, 32) + view.getUint32(4);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else {\n                    if (totalLength(chunks) < expectedLength) {\n                        break;\n                    }\n                    const data = concatChunks(chunks, expectedLength);\n                    controller.enqueue(decodePacket(isBinary ? data : TEXT_DECODER.decode(data), binaryType));\n                    state = 0 /* State.READ_HEADER */;\n                }\n                if (expectedLength === 0 || expectedLength > maxPayload) {\n                    controller.enqueue(ERROR_PACKET);\n                    break;\n                }\n            }\n        },\n    });\n}\nexport const protocol = 4;\nexport { encodePacket, encodePayload, decodePacket, decodePayload, };\n","/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nexport function Emitter(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n\n  // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n\n  var args = new Array(arguments.length - 1)\n    , callbacks = this._callbacks['$' + event];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args[i - 1] = arguments[i];\n  }\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n// alias used for reserved events (protected method)\nEmitter.prototype.emitReserved = Emitter.prototype.emit;\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","export const nextTick = (() => {\n    const isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n    if (isPromiseAvailable) {\n        return (cb) => Promise.resolve().then(cb);\n    }\n    else {\n        return (cb, setTimeoutFn) => setTimeoutFn(cb, 0);\n    }\n})();\nexport const globalThisShim = (() => {\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    else if (typeof window !== \"undefined\") {\n        return window;\n    }\n    else {\n        return Function(\"return this\")();\n    }\n})();\nexport const defaultBinaryType = \"arraybuffer\";\nexport function createCookieJar() { }\n","import { globalThisShim as globalThis } from \"./globals.node.js\";\nexport function pick(obj, ...attr) {\n    return attr.reduce((acc, k) => {\n        if (obj.hasOwnProperty(k)) {\n            acc[k] = obj[k];\n        }\n        return acc;\n    }, {});\n}\n// Keep a reference to the real timeout functions so they can be used when overridden\nconst NATIVE_SET_TIMEOUT = globalThis.setTimeout;\nconst NATIVE_CLEAR_TIMEOUT = globalThis.clearTimeout;\nexport function installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n        obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThis);\n        obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThis);\n    }\n    else {\n        obj.setTimeoutFn = globalThis.setTimeout.bind(globalThis);\n        obj.clearTimeoutFn = globalThis.clearTimeout.bind(globalThis);\n    }\n}\n// base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)\nconst BASE64_OVERHEAD = 1.33;\n// we could also have used `new Blob([obj]).size`, but it isn't supported in IE9\nexport function byteLength(obj) {\n    if (typeof obj === \"string\") {\n        return utf8Length(obj);\n    }\n    // arraybuffer or blob\n    return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);\n}\nfunction utf8Length(str) {\n    let c = 0, length = 0;\n    for (let i = 0, l = str.length; i < l; i++) {\n        c = str.charCodeAt(i);\n        if (c < 0x80) {\n            length += 1;\n        }\n        else if (c < 0x800) {\n            length += 2;\n        }\n        else if (c < 0xd800 || c >= 0xe000) {\n            length += 3;\n        }\n        else {\n            i++;\n            length += 4;\n        }\n    }\n    return length;\n}\n/**\n * Generates a random 8-characters string.\n */\nexport function randomString() {\n    return (Date.now().toString(36).substring(3) +\n        Math.random().toString(36).substring(2, 5));\n}\n","import { decodePacket } from \"engine.io-parser\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions } from \"./util.js\";\nimport { encode } from \"./contrib/parseqs.js\";\nexport class TransportError extends Error {\n    constructor(reason, description, context) {\n        super(reason);\n        this.description = description;\n        this.context = context;\n        this.type = \"TransportError\";\n    }\n}\nexport class Transport extends Emitter {\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} opts - options\n     * @protected\n     */\n    constructor(opts) {\n        super();\n        this.writable = false;\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.query = opts.query;\n        this.socket = opts.socket;\n        this.supportsBinary = !opts.forceBase64;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} reason\n     * @param description\n     * @param context - the error context\n     * @return {Transport} for chaining\n     * @protected\n     */\n    onError(reason, description, context) {\n        super.emitReserved(\"error\", new TransportError(reason, description, context));\n        return this;\n    }\n    /**\n     * Opens the transport.\n     */\n    open() {\n        this.readyState = \"opening\";\n        this.doOpen();\n        return this;\n    }\n    /**\n     * Closes the transport.\n     */\n    close() {\n        if (this.readyState === \"opening\" || this.readyState === \"open\") {\n            this.doClose();\n            this.onClose();\n        }\n        return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     */\n    send(packets) {\n        if (this.readyState === \"open\") {\n            this.write(packets);\n        }\n        else {\n            // this might happen if the transport was silently closed in the beforeunload event handler\n        }\n    }\n    /**\n     * Called upon open\n     *\n     * @protected\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        this.writable = true;\n        super.emitReserved(\"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @protected\n     */\n    onData(data) {\n        const packet = decodePacket(data, this.socket.binaryType);\n        this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @protected\n     */\n    onPacket(packet) {\n        super.emitReserved(\"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @protected\n     */\n    onClose(details) {\n        this.readyState = \"closed\";\n        super.emitReserved(\"close\", details);\n    }\n    /**\n     * Pauses the transport, in order not to lose packets during an upgrade.\n     *\n     * @param onPause\n     */\n    pause(onPause) { }\n    createUri(schema, query = {}) {\n        return (schema +\n            \"://\" +\n            this._hostname() +\n            this._port() +\n            this.opts.path +\n            this._query(query));\n    }\n    _hostname() {\n        const hostname = this.opts.hostname;\n        return hostname.indexOf(\":\") === -1 ? hostname : \"[\" + hostname + \"]\";\n    }\n    _port() {\n        if (this.opts.port &&\n            ((this.opts.secure && Number(this.opts.port !== 443)) ||\n                (!this.opts.secure && Number(this.opts.port) !== 80))) {\n            return \":\" + this.opts.port;\n        }\n        else {\n            return \"\";\n        }\n    }\n    _query(query) {\n        const encodedQuery = encode(query);\n        return encodedQuery.length ? \"?\" + encodedQuery : \"\";\n    }\n}\n","// imported from https://github.com/galkn/querystring\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\nexport function encode(obj) {\n    let str = '';\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            if (str.length)\n                str += '&';\n            str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n        }\n    }\n    return str;\n}\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\nexport function decode(qs) {\n    let qry = {};\n    let pairs = qs.split('&');\n    for (let i = 0, l = pairs.length; i < l; i++) {\n        let pair = pairs[i].split('=');\n        qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n    }\n    return qry;\n}\n","import { Transport } from \"../transport.js\";\nimport { randomString } from \"../util.js\";\nimport { encodePayload, decodePayload } from \"engine.io-parser\";\nexport class Polling extends Transport {\n    constructor() {\n        super(...arguments);\n        this._polling = false;\n    }\n    get name() {\n        return \"polling\";\n    }\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @protected\n     */\n    doOpen() {\n        this._poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} onPause - callback upon buffers are flushed and transport is paused\n     * @package\n     */\n    pause(onPause) {\n        this.readyState = \"pausing\";\n        const pause = () => {\n            this.readyState = \"paused\";\n            onPause();\n        };\n        if (this._polling || !this.writable) {\n            let total = 0;\n            if (this._polling) {\n                total++;\n                this.once(\"pollComplete\", function () {\n                    --total || pause();\n                });\n            }\n            if (!this.writable) {\n                total++;\n                this.once(\"drain\", function () {\n                    --total || pause();\n                });\n            }\n        }\n        else {\n            pause();\n        }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @private\n     */\n    _poll() {\n        this._polling = true;\n        this.doPoll();\n        this.emitReserved(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @protected\n     */\n    onData(data) {\n        const callback = (packet) => {\n            // if its the first message we consider the transport open\n            if (\"opening\" === this.readyState && packet.type === \"open\") {\n                this.onOpen();\n            }\n            // if its a close packet, we close the ongoing requests\n            if (\"close\" === packet.type) {\n                this.onClose({ description: \"transport closed by the server\" });\n                return false;\n            }\n            // otherwise bypass onData and handle the message\n            this.onPacket(packet);\n        };\n        // decode payload\n        decodePayload(data, this.socket.binaryType).forEach(callback);\n        // if an event did not trigger closing\n        if (\"closed\" !== this.readyState) {\n            // if we got data we're not polling\n            this._polling = false;\n            this.emitReserved(\"pollComplete\");\n            if (\"open\" === this.readyState) {\n                this._poll();\n            }\n            else {\n            }\n        }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @protected\n     */\n    doClose() {\n        const close = () => {\n            this.write([{ type: \"close\" }]);\n        };\n        if (\"open\" === this.readyState) {\n            close();\n        }\n        else {\n            // in case we're trying to close while\n            // handshaking is in progress (GH-164)\n            this.once(\"open\", close);\n        }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} packets - data packets\n     * @protected\n     */\n    write(packets) {\n        this.writable = false;\n        encodePayload(packets, (data) => {\n            this.doWrite(data, () => {\n                this.writable = true;\n                this.emitReserved(\"drain\");\n            });\n        });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"https\" : \"http\";\n        const query = this.query || {};\n        // cache busting is forced\n        if (false !== this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = randomString();\n        }\n        if (!this.supportsBinary && !query.sid) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n}\n","// imported from https://github.com/component/has-cors\nlet value = false;\ntry {\n    value = typeof XMLHttpRequest !== 'undefined' &&\n        'withCredentials' in new XMLHttpRequest();\n}\ncatch (err) {\n    // if XMLHttp support is disabled in IE then it will throw\n    // when trying to create\n}\nexport const hasCORS = value;\n","import { Polling } from \"./polling.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions, pick } from \"../util.js\";\nimport { globalThisShim as globalThis } from \"../globals.node.js\";\nimport { hasCORS } from \"../contrib/has-cors.js\";\nfunction empty() { }\nexport class BaseXHR extends Polling {\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @package\n     */\n    constructor(opts) {\n        super(opts);\n        if (typeof location !== \"undefined\") {\n            const isSSL = \"https:\" === location.protocol;\n            let port = location.port;\n            // some user agents have empty `location.port`\n            if (!port) {\n                port = isSSL ? \"443\" : \"80\";\n            }\n            this.xd =\n                (typeof location !== \"undefined\" &&\n                    opts.hostname !== location.hostname) ||\n                    port !== opts.port;\n        }\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @private\n     */\n    doWrite(data, fn) {\n        const req = this.request({\n            method: \"POST\",\n            data: data,\n        });\n        req.on(\"success\", fn);\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr post error\", xhrStatus, context);\n        });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @private\n     */\n    doPoll() {\n        const req = this.request();\n        req.on(\"data\", this.onData.bind(this));\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr poll error\", xhrStatus, context);\n        });\n        this.pollXhr = req;\n    }\n}\nexport class Request extends Emitter {\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @package\n     */\n    constructor(createRequest, uri, opts) {\n        super();\n        this.createRequest = createRequest;\n        installTimerFunctions(this, opts);\n        this._opts = opts;\n        this._method = opts.method || \"GET\";\n        this._uri = uri;\n        this._data = undefined !== opts.data ? opts.data : null;\n        this._create();\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @private\n     */\n    _create() {\n        var _a;\n        const opts = pick(this._opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n        opts.xdomain = !!this._opts.xd;\n        const xhr = (this._xhr = this.createRequest(opts));\n        try {\n            xhr.open(this._method, this._uri, true);\n            try {\n                if (this._opts.extraHeaders) {\n                    // @ts-ignore\n                    xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n                    for (let i in this._opts.extraHeaders) {\n                        if (this._opts.extraHeaders.hasOwnProperty(i)) {\n                            xhr.setRequestHeader(i, this._opts.extraHeaders[i]);\n                        }\n                    }\n                }\n            }\n            catch (e) { }\n            if (\"POST\" === this._method) {\n                try {\n                    xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n                }\n                catch (e) { }\n            }\n            try {\n                xhr.setRequestHeader(\"Accept\", \"*/*\");\n            }\n            catch (e) { }\n            (_a = this._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.addCookies(xhr);\n            // ie6 check\n            if (\"withCredentials\" in xhr) {\n                xhr.withCredentials = this._opts.withCredentials;\n            }\n            if (this._opts.requestTimeout) {\n                xhr.timeout = this._opts.requestTimeout;\n            }\n            xhr.onreadystatechange = () => {\n                var _a;\n                if (xhr.readyState === 3) {\n                    (_a = this._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.parseCookies(\n                    // @ts-ignore\n                    xhr.getResponseHeader(\"set-cookie\"));\n                }\n                if (4 !== xhr.readyState)\n                    return;\n                if (200 === xhr.status || 1223 === xhr.status) {\n                    this._onLoad();\n                }\n                else {\n                    // make sure the `error` event handler that's user-set\n                    // does not throw in the same tick and gets caught here\n                    this.setTimeoutFn(() => {\n                        this._onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n                    }, 0);\n                }\n            };\n            xhr.send(this._data);\n        }\n        catch (e) {\n            // Need to defer since .create() is called directly from the constructor\n            // and thus the 'error' event can only be only bound *after* this exception\n            // occurs.  Therefore, also, we cannot throw here at all.\n            this.setTimeoutFn(() => {\n                this._onError(e);\n            }, 0);\n            return;\n        }\n        if (typeof document !== \"undefined\") {\n            this._index = Request.requestsCount++;\n            Request.requests[this._index] = this;\n        }\n    }\n    /**\n     * Called upon error.\n     *\n     * @private\n     */\n    _onError(err) {\n        this.emitReserved(\"error\", err, this._xhr);\n        this._cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @private\n     */\n    _cleanup(fromError) {\n        if (\"undefined\" === typeof this._xhr || null === this._xhr) {\n            return;\n        }\n        this._xhr.onreadystatechange = empty;\n        if (fromError) {\n            try {\n                this._xhr.abort();\n            }\n            catch (e) { }\n        }\n        if (typeof document !== \"undefined\") {\n            delete Request.requests[this._index];\n        }\n        this._xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @private\n     */\n    _onLoad() {\n        const data = this._xhr.responseText;\n        if (data !== null) {\n            this.emitReserved(\"data\", data);\n            this.emitReserved(\"success\");\n            this._cleanup();\n        }\n    }\n    /**\n     * Aborts the request.\n     *\n     * @package\n     */\n    abort() {\n        this._cleanup();\n    }\n}\nRequest.requestsCount = 0;\nRequest.requests = {};\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\nif (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n        // @ts-ignore\n        attachEvent(\"onunload\", unloadHandler);\n    }\n    else if (typeof addEventListener === \"function\") {\n        const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n        addEventListener(terminationEvent, unloadHandler, false);\n    }\n}\nfunction unloadHandler() {\n    for (let i in Request.requests) {\n        if (Request.requests.hasOwnProperty(i)) {\n            Request.requests[i].abort();\n        }\n    }\n}\nconst hasXHR2 = (function () {\n    const xhr = newRequest({\n        xdomain: false,\n    });\n    return xhr && xhr.responseType !== null;\n})();\n/**\n * HTTP long-polling based on the built-in `XMLHttpRequest` object.\n *\n * Usage: browser\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\n */\nexport class XHR extends BaseXHR {\n    constructor(opts) {\n        super(opts);\n        const forceBase64 = opts && opts.forceBase64;\n        this.supportsBinary = hasXHR2 && !forceBase64;\n    }\n    request(opts = {}) {\n        Object.assign(opts, { xd: this.xd }, this.opts);\n        return new Request(newRequest, this.uri(), opts);\n    }\n}\nfunction newRequest(opts) {\n    const xdomain = opts.xdomain;\n    // XMLHttpRequest can be disabled on IE\n    try {\n        if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n            return new XMLHttpRequest();\n        }\n    }\n    catch (e) { }\n    if (!xdomain) {\n        try {\n            return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n        }\n        catch (e) { }\n    }\n}\n","import { Transport } from \"../transport.js\";\nimport { pick, randomString } from \"../util.js\";\nimport { encodePacket } from \"engine.io-parser\";\nimport { globalThisShim as globalThis, nextTick } from \"../globals.node.js\";\n// detect ReactNative environment\nconst isReactNative = typeof navigator !== \"undefined\" &&\n    typeof navigator.product === \"string\" &&\n    navigator.product.toLowerCase() === \"reactnative\";\nexport class BaseWS extends Transport {\n    get name() {\n        return \"websocket\";\n    }\n    doOpen() {\n        const uri = this.uri();\n        const protocols = this.opts.protocols;\n        // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n        const opts = isReactNative\n            ? {}\n            : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n        if (this.opts.extraHeaders) {\n            opts.headers = this.opts.extraHeaders;\n        }\n        try {\n            this.ws = this.createSocket(uri, protocols, opts);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this.ws.binaryType = this.socket.binaryType;\n        this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @private\n     */\n    addEventListeners() {\n        this.ws.onopen = () => {\n            if (this.opts.autoUnref) {\n                this.ws._socket.unref();\n            }\n            this.onOpen();\n        };\n        this.ws.onclose = (closeEvent) => this.onClose({\n            description: \"websocket connection closed\",\n            context: closeEvent,\n        });\n        this.ws.onmessage = (ev) => this.onData(ev.data);\n        this.ws.onerror = (e) => this.onError(\"websocket error\", e);\n    }\n    write(packets) {\n        this.writable = false;\n        // encodePacket efficient as it uses WS framing\n        // no need for encodePayload\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            encodePacket(packet, this.supportsBinary, (data) => {\n                // Sometimes the websocket has already been closed but the browser didn't\n                // have a chance of informing us about it yet, in that case send will\n                // throw an error\n                try {\n                    this.doWrite(packet, data);\n                }\n                catch (e) {\n                }\n                if (lastPacket) {\n                    // fake drain\n                    // defer to next tick to allow Socket to clear writeBuffer\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        if (typeof this.ws !== \"undefined\") {\n            this.ws.onerror = () => { };\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"wss\" : \"ws\";\n        const query = this.query || {};\n        // append timestamp to URI\n        if (this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = randomString();\n        }\n        // communicate binary support capabilities\n        if (!this.supportsBinary) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n}\nconst WebSocketCtor = globalThis.WebSocket || globalThis.MozWebSocket;\n/**\n * WebSocket transport based on the built-in `WebSocket` object.\n *\n * Usage: browser, Node.js (since v21), Deno, Bun\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket\n * @see https://caniuse.com/mdn-api_websocket\n * @see https://nodejs.org/api/globals.html#websocket\n */\nexport class WS extends BaseWS {\n    createSocket(uri, protocols, opts) {\n        return !isReactNative\n            ? protocols\n                ? new WebSocketCtor(uri, protocols)\n                : new WebSocketCtor(uri)\n            : new WebSocketCtor(uri, protocols, opts);\n    }\n    doWrite(_packet, data) {\n        this.ws.send(data);\n    }\n}\n","import { XHR } from \"./polling-xhr.node.js\";\nimport { WS } from \"./websocket.node.js\";\nimport { WT } from \"./webtransport.js\";\nexport const transports = {\n    websocket: WS,\n    webtransport: WT,\n    polling: XHR,\n};\n","import { Transport } from \"../transport.js\";\nimport { nextTick } from \"../globals.node.js\";\nimport { createPacketDecoderStream, createPacketEncoderStream, } from \"engine.io-parser\";\n/**\n * WebTransport transport based on the built-in `WebTransport` object.\n *\n * Usage: browser, Node.js (with the `@fails-components/webtransport` package)\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebTransport\n * @see https://caniuse.com/webtransport\n */\nexport class WT extends Transport {\n    get name() {\n        return \"webtransport\";\n    }\n    doOpen() {\n        try {\n            // @ts-ignore\n            this._transport = new WebTransport(this.createUri(\"https\"), this.opts.transportOptions[this.name]);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this._transport.closed\n            .then(() => {\n            this.onClose();\n        })\n            .catch((err) => {\n            this.onError(\"webtransport error\", err);\n        });\n        // note: we could have used async/await, but that would require some additional polyfills\n        this._transport.ready.then(() => {\n            this._transport.createBidirectionalStream().then((stream) => {\n                const decoderStream = createPacketDecoderStream(Number.MAX_SAFE_INTEGER, this.socket.binaryType);\n                const reader = stream.readable.pipeThrough(decoderStream).getReader();\n                const encoderStream = createPacketEncoderStream();\n                encoderStream.readable.pipeTo(stream.writable);\n                this._writer = encoderStream.writable.getWriter();\n                const read = () => {\n                    reader\n                        .read()\n                        .then(({ done, value }) => {\n                        if (done) {\n                            return;\n                        }\n                        this.onPacket(value);\n                        read();\n                    })\n                        .catch((err) => {\n                    });\n                };\n                read();\n                const packet = { type: \"open\" };\n                if (this.query.sid) {\n                    packet.data = `{\"sid\":\"${this.query.sid}\"}`;\n                }\n                this._writer.write(packet).then(() => this.onOpen());\n            });\n        });\n    }\n    write(packets) {\n        this.writable = false;\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            this._writer.write(packet).then(() => {\n                if (lastPacket) {\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        var _a;\n        (_a = this._transport) === null || _a === void 0 ? void 0 : _a.close();\n    }\n}\n","// imported from https://github.com/galkn/parseuri\n/**\n * Parses a URI\n *\n * Note: we could also have used the built-in URL object, but it isn't supported on all platforms.\n *\n * See:\n * - https://developer.mozilla.org/en-US/docs/Web/API/URL\n * - https://caniuse.com/url\n * - https://www.rfc-editor.org/rfc/rfc3986#appendix-B\n *\n * History of the parse() method:\n * - first commit: https://github.com/socketio/socket.io-client/commit/4ee1d5d94b3906a9c052b459f1a818b15f38f91c\n * - export into its own module: https://github.com/socketio/engine.io-client/commit/de2c561e4564efeb78f1bdb1ba39ef81b2822cb3\n * - reimport: https://github.com/socketio/engine.io-client/commit/df32277c3f6d622eec5ed09f493cae3f3391d242\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\nconst re = /^(?:(?![^:@\\/?#]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@\\/?#]*)(?::([^:@\\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\nconst parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\nexport function parse(str) {\n    if (str.length > 8000) {\n        throw \"URI too long\";\n    }\n    const src = str, b = str.indexOf('['), e = str.indexOf(']');\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n    let m = re.exec(str || ''), uri = {}, i = 14;\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n    return uri;\n}\nfunction pathNames(obj, path) {\n    const regx = /\\/{2,9}/g, names = path.replace(regx, \"/\").split(\"/\");\n    if (path.slice(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.slice(-1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n    return names;\n}\nfunction queryKey(uri, query) {\n    const data = {};\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n    return data;\n}\n","import { transports as DEFAULT_TRANSPORTS } from \"./transports/index.js\";\nimport { installTimerFunctions, byteLength } from \"./util.js\";\nimport { decode } from \"./contrib/parseqs.js\";\nimport { parse } from \"./contrib/parseuri.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { protocol } from \"engine.io-parser\";\nimport { createCookieJar, defaultBinaryType, nextTick, } from \"./globals.node.js\";\nconst withEventListeners = typeof addEventListener === \"function\" &&\n    typeof removeEventListener === \"function\";\nconst OFFLINE_EVENT_LISTENERS = [];\nif (withEventListeners) {\n    // within a ServiceWorker, any event handler for the 'offline' event must be added on the initial evaluation of the\n    // script, so we create one single event listener here which will forward the event to the socket instances\n    addEventListener(\"offline\", () => {\n        OFFLINE_EVENT_LISTENERS.forEach((listener) => listener());\n    }, false);\n}\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes without upgrade mechanism, which means that it will keep the first low-level transport that\n * successfully establishes the connection.\n *\n * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n *\n * @example\n * import { SocketWithoutUpgrade, WebSocket } from \"engine.io-client\";\n *\n * const socket = new SocketWithoutUpgrade({\n *   transports: [WebSocket]\n * });\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithUpgrade\n * @see Socket\n */\nexport class SocketWithoutUpgrade extends Emitter {\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri - uri or options\n     * @param {Object} opts - options\n     */\n    constructor(uri, opts) {\n        super();\n        this.binaryType = defaultBinaryType;\n        this.writeBuffer = [];\n        this._prevBufferLen = 0;\n        this._pingInterval = -1;\n        this._pingTimeout = -1;\n        this._maxPayload = -1;\n        /**\n         * The expiration timestamp of the {@link _pingTimeoutTimer} object is tracked, in case the timer is throttled and the\n         * callback is not fired on time. This can happen for example when a laptop is suspended or when a phone is locked.\n         */\n        this._pingTimeoutTime = Infinity;\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = null;\n        }\n        if (uri) {\n            const parsedUri = parse(uri);\n            opts.hostname = parsedUri.host;\n            opts.secure =\n                parsedUri.protocol === \"https\" || parsedUri.protocol === \"wss\";\n            opts.port = parsedUri.port;\n            if (parsedUri.query)\n                opts.query = parsedUri.query;\n        }\n        else if (opts.host) {\n            opts.hostname = parse(opts.host).host;\n        }\n        installTimerFunctions(this, opts);\n        this.secure =\n            null != opts.secure\n                ? opts.secure\n                : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n        if (opts.hostname && !opts.port) {\n            // if no port is specified manually, use the protocol default\n            opts.port = this.secure ? \"443\" : \"80\";\n        }\n        this.hostname =\n            opts.hostname ||\n                (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n        this.port =\n            opts.port ||\n                (typeof location !== \"undefined\" && location.port\n                    ? location.port\n                    : this.secure\n                        ? \"443\"\n                        : \"80\");\n        this.transports = [];\n        this._transportsByName = {};\n        opts.transports.forEach((t) => {\n            const transportName = t.prototype.name;\n            this.transports.push(transportName);\n            this._transportsByName[transportName] = t;\n        });\n        this.opts = Object.assign({\n            path: \"/engine.io\",\n            agent: false,\n            withCredentials: false,\n            upgrade: true,\n            timestampParam: \"t\",\n            rememberUpgrade: false,\n            addTrailingSlash: true,\n            rejectUnauthorized: true,\n            perMessageDeflate: {\n                threshold: 1024,\n            },\n            transportOptions: {},\n            closeOnBeforeunload: false,\n        }, opts);\n        this.opts.path =\n            this.opts.path.replace(/\\/$/, \"\") +\n                (this.opts.addTrailingSlash ? \"/\" : \"\");\n        if (typeof this.opts.query === \"string\") {\n            this.opts.query = decode(this.opts.query);\n        }\n        if (withEventListeners) {\n            if (this.opts.closeOnBeforeunload) {\n                // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n                // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n                // closed/reloaded)\n                this._beforeunloadEventListener = () => {\n                    if (this.transport) {\n                        // silently close the transport\n                        this.transport.removeAllListeners();\n                        this.transport.close();\n                    }\n                };\n                addEventListener(\"beforeunload\", this._beforeunloadEventListener, false);\n            }\n            if (this.hostname !== \"localhost\") {\n                this._offlineEventListener = () => {\n                    this._onClose(\"transport close\", {\n                        description: \"network connection lost\",\n                    });\n                };\n                OFFLINE_EVENT_LISTENERS.push(this._offlineEventListener);\n            }\n        }\n        if (this.opts.withCredentials) {\n            this._cookieJar = createCookieJar();\n        }\n        this._open();\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} name - transport name\n     * @return {Transport}\n     * @private\n     */\n    createTransport(name) {\n        const query = Object.assign({}, this.opts.query);\n        // append engine.io protocol identifier\n        query.EIO = protocol;\n        // transport name\n        query.transport = name;\n        // session id if we already have one\n        if (this.id)\n            query.sid = this.id;\n        const opts = Object.assign({}, this.opts, {\n            query,\n            socket: this,\n            hostname: this.hostname,\n            secure: this.secure,\n            port: this.port,\n        }, this.opts.transportOptions[name]);\n        return new this._transportsByName[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @private\n     */\n    _open() {\n        if (this.transports.length === 0) {\n            // Emit error on next tick so it can be listened to\n            this.setTimeoutFn(() => {\n                this.emitReserved(\"error\", \"No transports available\");\n            }, 0);\n            return;\n        }\n        const transportName = this.opts.rememberUpgrade &&\n            SocketWithoutUpgrade.priorWebsocketSuccess &&\n            this.transports.indexOf(\"websocket\") !== -1\n            ? \"websocket\"\n            : this.transports[0];\n        this.readyState = \"opening\";\n        const transport = this.createTransport(transportName);\n        transport.open();\n        this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @private\n     */\n    setTransport(transport) {\n        if (this.transport) {\n            this.transport.removeAllListeners();\n        }\n        // set up transport\n        this.transport = transport;\n        // set up transport listeners\n        transport\n            .on(\"drain\", this._onDrain.bind(this))\n            .on(\"packet\", this._onPacket.bind(this))\n            .on(\"error\", this._onError.bind(this))\n            .on(\"close\", (reason) => this._onClose(\"transport close\", reason));\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @private\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        SocketWithoutUpgrade.priorWebsocketSuccess =\n            \"websocket\" === this.transport.name;\n        this.emitReserved(\"open\");\n        this.flush();\n    }\n    /**\n     * Handles a packet.\n     *\n     * @private\n     */\n    _onPacket(packet) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            this.emitReserved(\"packet\", packet);\n            // Socket is live - any packet counts\n            this.emitReserved(\"heartbeat\");\n            switch (packet.type) {\n                case \"open\":\n                    this.onHandshake(JSON.parse(packet.data));\n                    break;\n                case \"ping\":\n                    this._sendPacket(\"pong\");\n                    this.emitReserved(\"ping\");\n                    this.emitReserved(\"pong\");\n                    this._resetPingTimeout();\n                    break;\n                case \"error\":\n                    const err = new Error(\"server error\");\n                    // @ts-ignore\n                    err.code = packet.data;\n                    this._onError(err);\n                    break;\n                case \"message\":\n                    this.emitReserved(\"data\", packet.data);\n                    this.emitReserved(\"message\", packet.data);\n                    break;\n            }\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} data - handshake obj\n     * @private\n     */\n    onHandshake(data) {\n        this.emitReserved(\"handshake\", data);\n        this.id = data.sid;\n        this.transport.query.sid = data.sid;\n        this._pingInterval = data.pingInterval;\n        this._pingTimeout = data.pingTimeout;\n        this._maxPayload = data.maxPayload;\n        this.onOpen();\n        // In case open handler closes socket\n        if (\"closed\" === this.readyState)\n            return;\n        this._resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @private\n     */\n    _resetPingTimeout() {\n        this.clearTimeoutFn(this._pingTimeoutTimer);\n        const delay = this._pingInterval + this._pingTimeout;\n        this._pingTimeoutTime = Date.now() + delay;\n        this._pingTimeoutTimer = this.setTimeoutFn(() => {\n            this._onClose(\"ping timeout\");\n        }, delay);\n        if (this.opts.autoUnref) {\n            this._pingTimeoutTimer.unref();\n        }\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @private\n     */\n    _onDrain() {\n        this.writeBuffer.splice(0, this._prevBufferLen);\n        // setting prevBufferLen = 0 is very important\n        // for example, when upgrading, upgrade packet is sent over,\n        // and a nonzero prevBufferLen could cause problems on `drain`\n        this._prevBufferLen = 0;\n        if (0 === this.writeBuffer.length) {\n            this.emitReserved(\"drain\");\n        }\n        else {\n            this.flush();\n        }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @private\n     */\n    flush() {\n        if (\"closed\" !== this.readyState &&\n            this.transport.writable &&\n            !this.upgrading &&\n            this.writeBuffer.length) {\n            const packets = this._getWritablePackets();\n            this.transport.send(packets);\n            // keep track of current length of writeBuffer\n            // splice writeBuffer and callbackBuffer on `drain`\n            this._prevBufferLen = packets.length;\n            this.emitReserved(\"flush\");\n        }\n    }\n    /**\n     * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n     * long-polling)\n     *\n     * @private\n     */\n    _getWritablePackets() {\n        const shouldCheckPayloadSize = this._maxPayload &&\n            this.transport.name === \"polling\" &&\n            this.writeBuffer.length > 1;\n        if (!shouldCheckPayloadSize) {\n            return this.writeBuffer;\n        }\n        let payloadSize = 1; // first packet type\n        for (let i = 0; i < this.writeBuffer.length; i++) {\n            const data = this.writeBuffer[i].data;\n            if (data) {\n                payloadSize += byteLength(data);\n            }\n            if (i > 0 && payloadSize > this._maxPayload) {\n                return this.writeBuffer.slice(0, i);\n            }\n            payloadSize += 2; // separator + packet type\n        }\n        return this.writeBuffer;\n    }\n    /**\n     * Checks whether the heartbeat timer has expired but the socket has not yet been notified.\n     *\n     * Note: this method is private for now because it does not really fit the WebSocket API, but if we put it in the\n     * `write()` method then the message would not be buffered by the Socket.IO client.\n     *\n     * @return {boolean}\n     * @private\n     */\n    /* private */ _hasPingExpired() {\n        if (!this._pingTimeoutTime)\n            return true;\n        const hasExpired = Date.now() > this._pingTimeoutTime;\n        if (hasExpired) {\n            this._pingTimeoutTime = 0;\n            nextTick(() => {\n                this._onClose(\"ping timeout\");\n            }, this.setTimeoutFn);\n        }\n        return hasExpired;\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */\n    write(msg, options, fn) {\n        this._sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a message. Alias of {@link Socket#write}.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */\n    send(msg, options, fn) {\n        this._sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} type: packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @private\n     */\n    _sendPacket(type, data, options, fn) {\n        if (\"function\" === typeof data) {\n            fn = data;\n            data = undefined;\n        }\n        if (\"function\" === typeof options) {\n            fn = options;\n            options = null;\n        }\n        if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n            return;\n        }\n        options = options || {};\n        options.compress = false !== options.compress;\n        const packet = {\n            type: type,\n            data: data,\n            options: options,\n        };\n        this.emitReserved(\"packetCreate\", packet);\n        this.writeBuffer.push(packet);\n        if (fn)\n            this.once(\"flush\", fn);\n        this.flush();\n    }\n    /**\n     * Closes the connection.\n     */\n    close() {\n        const close = () => {\n            this._onClose(\"forced close\");\n            this.transport.close();\n        };\n        const cleanupAndClose = () => {\n            this.off(\"upgrade\", cleanupAndClose);\n            this.off(\"upgradeError\", cleanupAndClose);\n            close();\n        };\n        const waitForUpgrade = () => {\n            // wait for upgrade to finish since we can't send packets while pausing a transport\n            this.once(\"upgrade\", cleanupAndClose);\n            this.once(\"upgradeError\", cleanupAndClose);\n        };\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.readyState = \"closing\";\n            if (this.writeBuffer.length) {\n                this.once(\"drain\", () => {\n                    if (this.upgrading) {\n                        waitForUpgrade();\n                    }\n                    else {\n                        close();\n                    }\n                });\n            }\n            else if (this.upgrading) {\n                waitForUpgrade();\n            }\n            else {\n                close();\n            }\n        }\n        return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @private\n     */\n    _onError(err) {\n        SocketWithoutUpgrade.priorWebsocketSuccess = false;\n        if (this.opts.tryAllTransports &&\n            this.transports.length > 1 &&\n            this.readyState === \"opening\") {\n            this.transports.shift();\n            return this._open();\n        }\n        this.emitReserved(\"error\", err);\n        this._onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @private\n     */\n    _onClose(reason, description) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            // clear timers\n            this.clearTimeoutFn(this._pingTimeoutTimer);\n            // stop event from firing again for transport\n            this.transport.removeAllListeners(\"close\");\n            // ensure transport won't stay open\n            this.transport.close();\n            // ignore further transport communication\n            this.transport.removeAllListeners();\n            if (withEventListeners) {\n                if (this._beforeunloadEventListener) {\n                    removeEventListener(\"beforeunload\", this._beforeunloadEventListener, false);\n                }\n                if (this._offlineEventListener) {\n                    const i = OFFLINE_EVENT_LISTENERS.indexOf(this._offlineEventListener);\n                    if (i !== -1) {\n                        OFFLINE_EVENT_LISTENERS.splice(i, 1);\n                    }\n                }\n            }\n            // set ready state\n            this.readyState = \"closed\";\n            // clear session id\n            this.id = null;\n            // emit close event\n            this.emitReserved(\"close\", reason, description);\n            // clean buffers after, so users can still\n            // grab the buffers on `close` event\n            this.writeBuffer = [];\n            this._prevBufferLen = 0;\n        }\n    }\n}\nSocketWithoutUpgrade.protocol = protocol;\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n * low-level transport, it will try to upgrade to a better transport.\n *\n * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n *\n * @example\n * import { SocketWithUpgrade, WebSocket } from \"engine.io-client\";\n *\n * const socket = new SocketWithUpgrade({\n *   transports: [WebSocket]\n * });\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithoutUpgrade\n * @see Socket\n */\nexport class SocketWithUpgrade extends SocketWithoutUpgrade {\n    constructor() {\n        super(...arguments);\n        this._upgrades = [];\n    }\n    onOpen() {\n        super.onOpen();\n        if (\"open\" === this.readyState && this.opts.upgrade) {\n            for (let i = 0; i < this._upgrades.length; i++) {\n                this._probe(this._upgrades[i]);\n            }\n        }\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} name - transport name\n     * @private\n     */\n    _probe(name) {\n        let transport = this.createTransport(name);\n        let failed = false;\n        SocketWithoutUpgrade.priorWebsocketSuccess = false;\n        const onTransportOpen = () => {\n            if (failed)\n                return;\n            transport.send([{ type: \"ping\", data: \"probe\" }]);\n            transport.once(\"packet\", (msg) => {\n                if (failed)\n                    return;\n                if (\"pong\" === msg.type && \"probe\" === msg.data) {\n                    this.upgrading = true;\n                    this.emitReserved(\"upgrading\", transport);\n                    if (!transport)\n                        return;\n                    SocketWithoutUpgrade.priorWebsocketSuccess =\n                        \"websocket\" === transport.name;\n                    this.transport.pause(() => {\n                        if (failed)\n                            return;\n                        if (\"closed\" === this.readyState)\n                            return;\n                        cleanup();\n                        this.setTransport(transport);\n                        transport.send([{ type: \"upgrade\" }]);\n                        this.emitReserved(\"upgrade\", transport);\n                        transport = null;\n                        this.upgrading = false;\n                        this.flush();\n                    });\n                }\n                else {\n                    const err = new Error(\"probe error\");\n                    // @ts-ignore\n                    err.transport = transport.name;\n                    this.emitReserved(\"upgradeError\", err);\n                }\n            });\n        };\n        function freezeTransport() {\n            if (failed)\n                return;\n            // Any callback called by transport should be ignored since now\n            failed = true;\n            cleanup();\n            transport.close();\n            transport = null;\n        }\n        // Handle any error that happens while probing\n        const onerror = (err) => {\n            const error = new Error(\"probe error: \" + err);\n            // @ts-ignore\n            error.transport = transport.name;\n            freezeTransport();\n            this.emitReserved(\"upgradeError\", error);\n        };\n        function onTransportClose() {\n            onerror(\"transport closed\");\n        }\n        // When the socket is closed while we're probing\n        function onclose() {\n            onerror(\"socket closed\");\n        }\n        // When the socket is upgraded while we're probing\n        function onupgrade(to) {\n            if (transport && to.name !== transport.name) {\n                freezeTransport();\n            }\n        }\n        // Remove all listeners on the transport and on self\n        const cleanup = () => {\n            transport.removeListener(\"open\", onTransportOpen);\n            transport.removeListener(\"error\", onerror);\n            transport.removeListener(\"close\", onTransportClose);\n            this.off(\"close\", onclose);\n            this.off(\"upgrading\", onupgrade);\n        };\n        transport.once(\"open\", onTransportOpen);\n        transport.once(\"error\", onerror);\n        transport.once(\"close\", onTransportClose);\n        this.once(\"close\", onclose);\n        this.once(\"upgrading\", onupgrade);\n        if (this._upgrades.indexOf(\"webtransport\") !== -1 &&\n            name !== \"webtransport\") {\n            // favor WebTransport\n            this.setTimeoutFn(() => {\n                if (!failed) {\n                    transport.open();\n                }\n            }, 200);\n        }\n        else {\n            transport.open();\n        }\n    }\n    onHandshake(data) {\n        this._upgrades = this._filterUpgrades(data.upgrades);\n        super.onHandshake(data);\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} upgrades - server upgrades\n     * @private\n     */\n    _filterUpgrades(upgrades) {\n        const filteredUpgrades = [];\n        for (let i = 0; i < upgrades.length; i++) {\n            if (~this.transports.indexOf(upgrades[i]))\n                filteredUpgrades.push(upgrades[i]);\n        }\n        return filteredUpgrades;\n    }\n}\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n * low-level transport, it will try to upgrade to a better transport.\n *\n * @example\n * import { Socket } from \"engine.io-client\";\n *\n * const socket = new Socket();\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithoutUpgrade\n * @see SocketWithUpgrade\n */\nexport class Socket extends SocketWithUpgrade {\n    constructor(uri, opts = {}) {\n        const o = typeof uri === \"object\" ? uri : opts;\n        if (!o.transports ||\n            (o.transports && typeof o.transports[0] === \"string\")) {\n            o.transports = (o.transports || [\"polling\", \"websocket\", \"webtransport\"])\n                .map((transportName) => DEFAULT_TRANSPORTS[transportName])\n                .filter((t) => !!t);\n        }\n        super(uri, o);\n    }\n}\n","const withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nexport function isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexport function hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\n","import { isBinary } from \"./is-binary.js\";\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nexport function deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nexport function reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    delete packet.attachments; // no longer useful\n    return packet;\n}\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder === true) {\n        const isIndexValid = typeof data.num === \"number\" &&\n            data.num >= 0 &&\n            data.num < buffers.length;\n        if (isIndexValid) {\n            return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n        }\n        else {\n            throw new Error(\"illegal attachments\");\n        }\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n","import { Emitter } from \"@socket.io/component-emitter\";\nimport { deconstructPacket, reconstructPacket } from \"./binary.js\";\nimport { isBinary, hasBinary } from \"./is-binary.js\";\n/**\n * These strings must not be used as event names, as they have a special meaning.\n */\nconst RESERVED_EVENTS = [\n    \"connect\",\n    \"connect_error\",\n    \"disconnect\",\n    \"disconnecting\",\n    \"newListener\",\n    \"removeListener\", // used by the Node.js EventEmitter\n];\n/**\n * Protocol version.\n *\n * @public\n */\nexport const protocol = 5;\nexport var PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType || (PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nexport class Encoder {\n    /**\n     * Encoder constructor\n     *\n     * @param {function} replacer - custom replacer to pass down to JSON.parse\n     */\n    constructor(replacer) {\n        this.replacer = replacer;\n    }\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (hasBinary(obj)) {\n                return this.encodeAsBinary({\n                    type: obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK,\n                    nsp: obj.nsp,\n                    data: obj.data,\n                    id: obj.id,\n                });\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data, this.replacer);\n        }\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\n// see https://stackoverflow.com/questions/8511281/check-if-a-value-is-an-object-in-javascript\nfunction isObject(value) {\n    return Object.prototype.toString.call(value) === \"[object Object]\";\n}\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nexport class Decoder extends Emitter {\n    /**\n     * Decoder constructor\n     *\n     * @param {function} reviver - custom reviver to pass down to JSON.stringify\n     */\n    constructor(reviver) {\n        super();\n        this.reviver = reviver;\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            if (this.reconstructor) {\n                throw new Error(\"got plaintext data when reconstructing a packet\");\n            }\n            packet = this.decodeString(obj);\n            const isBinaryEvent = packet.type === PacketType.BINARY_EVENT;\n            if (isBinaryEvent || packet.type === PacketType.BINARY_ACK) {\n                packet.type = isBinaryEvent ? PacketType.EVENT : PacketType.ACK;\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emitReserved(\"decoded\", packet);\n            }\n        }\n        else if (isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = this.tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        return p;\n    }\n    tryParse(str) {\n        try {\n            return JSON.parse(str, this.reviver);\n        }\n        catch (e) {\n            return false;\n        }\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return isObject(payload);\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || isObject(payload);\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return (Array.isArray(payload) &&\n                    (typeof payload[0] === \"number\" ||\n                        (typeof payload[0] === \"string\" &&\n                            RESERVED_EVENTS.indexOf(payload[0]) === -1)));\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n            this.reconstructor = null;\n        }\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\n","export function on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\n","import { PacketType } from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\n/**\n * A Socket is the fundamental class for interacting with the server.\n *\n * A Socket belongs to a certain Namespace (by default /) and uses an underlying {@link Manager} to communicate.\n *\n * @example\n * const socket = io();\n *\n * socket.on(\"connect\", () => {\n *   console.log(\"connected\");\n * });\n *\n * // send an event to the server\n * socket.emit(\"foo\", \"bar\");\n *\n * socket.on(\"foobar\", () => {\n *   // an event was received from the server\n * });\n *\n * // upon disconnection\n * socket.on(\"disconnect\", (reason) => {\n *   console.log(`disconnected due to ${reason}`);\n * });\n */\nexport class Socket extends Emitter {\n    /**\n     * `Socket` constructor.\n     */\n    constructor(io, nsp, opts) {\n        super();\n        /**\n         * Whether the socket is currently connected to the server.\n         *\n         * @example\n         * const socket = io();\n         *\n         * socket.on(\"connect\", () => {\n         *   console.log(socket.connected); // true\n         * });\n         *\n         * socket.on(\"disconnect\", () => {\n         *   console.log(socket.connected); // false\n         * });\n         */\n        this.connected = false;\n        /**\n         * Whether the connection state was recovered after a temporary disconnection. In that case, any missed packets will\n         * be transmitted by the server.\n         */\n        this.recovered = false;\n        /**\n         * Buffer for packets received before the CONNECT packet\n         */\n        this.receiveBuffer = [];\n        /**\n         * Buffer for packets that will be sent once the socket is connected\n         */\n        this.sendBuffer = [];\n        /**\n         * The queue of packets to be sent with retry in case of failure.\n         *\n         * Packets are sent one by one, each waiting for the server acknowledgement, in order to guarantee the delivery order.\n         * @private\n         */\n        this._queue = [];\n        /**\n         * A sequence to generate the ID of the {@link QueuedPacket}.\n         * @private\n         */\n        this._queueSeq = 0;\n        this.ids = 0;\n        /**\n         * A map containing acknowledgement handlers.\n         *\n         * The `withError` attribute is used to differentiate handlers that accept an error as first argument:\n         *\n         * - `socket.emit(\"test\", (err, value) => { ... })` with `ackTimeout` option\n         * - `socket.timeout(5000).emit(\"test\", (err, value) => { ... })`\n         * - `const value = await socket.emitWithAck(\"test\")`\n         *\n         * From those that don't:\n         *\n         * - `socket.emit(\"test\", (value) => { ... });`\n         *\n         * In the first case, the handlers will be called with an error when:\n         *\n         * - the timeout is reached\n         * - the socket gets disconnected\n         *\n         * In the second case, the handlers will be simply discarded upon disconnection, since the client will never receive\n         * an acknowledgement from the server.\n         *\n         * @private\n         */\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        this._opts = Object.assign({}, opts);\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Whether the socket is currently disconnected\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"connect\", () => {\n     *   console.log(socket.disconnected); // false\n     * });\n     *\n     * socket.on(\"disconnect\", () => {\n     *   console.log(socket.disconnected); // true\n     * });\n     */\n    get disconnected() {\n        return !this.connected;\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on(io, \"open\", this.onopen.bind(this)),\n            on(io, \"packet\", this.onpacket.bind(this)),\n            on(io, \"error\", this.onerror.bind(this)),\n            on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects.\n     *\n     * @example\n     * const socket = io();\n     *\n     * console.log(socket.active); // true\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   if (reason === \"io server disconnect\") {\n     *     // the disconnection was initiated by the server, you need to manually reconnect\n     *     console.log(socket.active); // false\n     *   }\n     *   // else the socket will automatically try to reconnect\n     *   console.log(socket.active); // true\n     * });\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @example\n     * const socket = io({\n     *   autoConnect: false\n     * });\n     *\n     * socket.connect();\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for {@link connect()}.\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * This method mimics the WebSocket.send() method.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n     *\n     * @example\n     * socket.send(\"hello\");\n     *\n     * // this is equivalent to\n     * socket.emit(\"message\", \"hello\");\n     *\n     * @return self\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @example\n     * socket.emit(\"hello\", \"world\");\n     *\n     * // all serializable datastructures are supported (no need to call JSON.stringify)\n     * socket.emit(\"hello\", 1, \"2\", { 3: [\"4\"], 5: Uint8Array.from([6]) });\n     *\n     * // with an acknowledgement from the server\n     * socket.emit(\"hello\", \"world\", (val) => {\n     *   // ...\n     * });\n     *\n     * @return self\n     */\n    emit(ev, ...args) {\n        var _a, _b, _c;\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev.toString() + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        if (this._opts.retries && !this.flags.fromQueue && !this.flags.volatile) {\n            this._addToQueue(args);\n            return this;\n        }\n        const packet = {\n            type: PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            const id = this.ids++;\n            const ack = args.pop();\n            this._registerAckCallback(id, ack);\n            packet.id = id;\n        }\n        const isTransportWritable = (_b = (_a = this.io.engine) === null || _a === void 0 ? void 0 : _a.transport) === null || _b === void 0 ? void 0 : _b.writable;\n        const isConnected = this.connected && !((_c = this.io.engine) === null || _c === void 0 ? void 0 : _c._hasPingExpired());\n        const discardPacket = this.flags.volatile && !isTransportWritable;\n        if (discardPacket) {\n        }\n        else if (isConnected) {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * @private\n     */\n    _registerAckCallback(id, ack) {\n        var _a;\n        const timeout = (_a = this.flags.timeout) !== null && _a !== void 0 ? _a : this._opts.ackTimeout;\n        if (timeout === undefined) {\n            this.acks[id] = ack;\n            return;\n        }\n        // @ts-ignore\n        const timer = this.io.setTimeoutFn(() => {\n            delete this.acks[id];\n            for (let i = 0; i < this.sendBuffer.length; i++) {\n                if (this.sendBuffer[i].id === id) {\n                    this.sendBuffer.splice(i, 1);\n                }\n            }\n            ack.call(this, new Error(\"operation has timed out\"));\n        }, timeout);\n        const fn = (...args) => {\n            // @ts-ignore\n            this.io.clearTimeoutFn(timer);\n            ack.apply(this, args);\n        };\n        fn.withError = true;\n        this.acks[id] = fn;\n    }\n    /**\n     * Emits an event and waits for an acknowledgement\n     *\n     * @example\n     * // without timeout\n     * const response = await socket.emitWithAck(\"hello\", \"world\");\n     *\n     * // with a specific timeout\n     * try {\n     *   const response = await socket.timeout(1000).emitWithAck(\"hello\", \"world\");\n     * } catch (err) {\n     *   // the server did not acknowledge the event in the given delay\n     * }\n     *\n     * @return a Promise that will be fulfilled when the server acknowledges the event\n     */\n    emitWithAck(ev, ...args) {\n        return new Promise((resolve, reject) => {\n            const fn = (arg1, arg2) => {\n                return arg1 ? reject(arg1) : resolve(arg2);\n            };\n            fn.withError = true;\n            args.push(fn);\n            this.emit(ev, ...args);\n        });\n    }\n    /**\n     * Add the packet to the queue.\n     * @param args\n     * @private\n     */\n    _addToQueue(args) {\n        let ack;\n        if (typeof args[args.length - 1] === \"function\") {\n            ack = args.pop();\n        }\n        const packet = {\n            id: this._queueSeq++,\n            tryCount: 0,\n            pending: false,\n            args,\n            flags: Object.assign({ fromQueue: true }, this.flags),\n        };\n        args.push((err, ...responseArgs) => {\n            if (packet !== this._queue[0]) {\n                // the packet has already been acknowledged\n                return;\n            }\n            const hasError = err !== null;\n            if (hasError) {\n                if (packet.tryCount > this._opts.retries) {\n                    this._queue.shift();\n                    if (ack) {\n                        ack(err);\n                    }\n                }\n            }\n            else {\n                this._queue.shift();\n                if (ack) {\n                    ack(null, ...responseArgs);\n                }\n            }\n            packet.pending = false;\n            return this._drainQueue();\n        });\n        this._queue.push(packet);\n        this._drainQueue();\n    }\n    /**\n     * Send the first packet of the queue, and wait for an acknowledgement from the server.\n     * @param force - whether to resend a packet that has not been acknowledged yet\n     *\n     * @private\n     */\n    _drainQueue(force = false) {\n        if (!this.connected || this._queue.length === 0) {\n            return;\n        }\n        const packet = this._queue[0];\n        if (packet.pending && !force) {\n            return;\n        }\n        packet.pending = true;\n        packet.tryCount++;\n        this.flags = packet.flags;\n        this.emit.apply(this, packet.args);\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this._sendConnectPacket(data);\n            });\n        }\n        else {\n            this._sendConnectPacket(this.auth);\n        }\n    }\n    /**\n     * Sends a CONNECT packet to initiate the Socket.IO session.\n     *\n     * @param data\n     * @private\n     */\n    _sendConnectPacket(data) {\n        this.packet({\n            type: PacketType.CONNECT,\n            data: this._pid\n                ? Object.assign({ pid: this._pid, offset: this._lastOffset }, data)\n                : data,\n        });\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            this.emitReserved(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @param description\n     * @private\n     */\n    onclose(reason, description) {\n        this.connected = false;\n        delete this.id;\n        this.emitReserved(\"disconnect\", reason, description);\n        this._clearAcks();\n    }\n    /**\n     * Clears the acknowledgement handlers upon disconnection, since the client will never receive an acknowledgement from\n     * the server.\n     *\n     * @private\n     */\n    _clearAcks() {\n        Object.keys(this.acks).forEach((id) => {\n            const isBuffered = this.sendBuffer.some((packet) => String(packet.id) === id);\n            if (!isBuffered) {\n                // note: handlers that do not accept an error as first argument are ignored here\n                const ack = this.acks[id];\n                delete this.acks[id];\n                if (ack.withError) {\n                    ack.call(this, new Error(\"socket has been disconnected\"));\n                }\n            }\n        });\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    this.onconnect(packet.data.sid, packet.data.pid);\n                }\n                else {\n                    this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case PacketType.CONNECT_ERROR:\n                this.destroy();\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                this.emitReserved(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        if (null != packet.id) {\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n        if (this._pid && args.length && typeof args[args.length - 1] === \"string\") {\n            this._lastOffset = args[args.length - 1];\n        }\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            self.packet({\n                type: PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowledgement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (typeof ack !== \"function\") {\n            return;\n        }\n        delete this.acks[packet.id];\n        // @ts-ignore FIXME ack is incorrectly inferred as 'never'\n        if (ack.withError) {\n            packet.data.unshift(null);\n        }\n        // @ts-ignore\n        ack.apply(this, packet.data);\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id, pid) {\n        this.id = id;\n        this.recovered = pid && this._pid === pid;\n        this._pid = pid; // defined only if connection state recovery is enabled\n        this.connected = true;\n        this.emitBuffered();\n        this.emitReserved(\"connect\");\n        this._drainQueue(true);\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        });\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually. In that case, the socket will not try to reconnect.\n     *\n     * If this is the last active Socket instance of the {@link Manager}, the low-level connection will be closed.\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   // console.log(reason); prints \"io client disconnect\"\n     * });\n     *\n     * socket.disconnect();\n     *\n     * @return self\n     */\n    disconnect() {\n        if (this.connected) {\n            this.packet({ type: PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for {@link disconnect()}.\n     *\n     * @return self\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @example\n     * socket.compress(false).emit(\"hello\");\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @example\n     * socket.volatile.emit(\"hello\"); // the server may or may not receive it\n     *\n     * @returns self\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n     * given number of milliseconds have elapsed without an acknowledgement from the server:\n     *\n     * @example\n     * socket.timeout(5000).emit(\"my-event\", (err) => {\n     *   if (err) {\n     *     // the server did not acknowledge the event in the given delay\n     *   }\n     * });\n     *\n     * @returns self\n     */\n    timeout(timeout) {\n        this.flags.timeout = timeout;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @example\n     * socket.onAny((event, ...args) => {\n     *   console.log(`got ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @example\n     * socket.prependAny((event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * }\n     *\n     * socket.onAny(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAny(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAny();\n     *\n     * @param listener\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.onAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.prependAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * }\n     *\n     * socket.onAnyOutgoing(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAnyOutgoing(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAnyOutgoing();\n     *\n     * @param [listener] - the catch-all listener (optional)\n     */\n    offAnyOutgoing(listener) {\n        if (!this._anyOutgoingListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyOutgoingListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyOutgoingListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAnyOutgoing() {\n        return this._anyOutgoingListeners || [];\n    }\n    /**\n     * Notify the listeners for each packet sent\n     *\n     * @param packet\n     *\n     * @private\n     */\n    notifyOutgoingListeners(packet) {\n        if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {\n            const listeners = this._anyOutgoingListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, packet.data);\n            }\n        }\n    }\n}\n","/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\nexport function Backoff(opts) {\n    opts = opts || {};\n    this.ms = opts.min || 100;\n    this.max = opts.max || 10000;\n    this.factor = opts.factor || 2;\n    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n    this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\nBackoff.prototype.duration = function () {\n    var ms = this.ms * Math.pow(this.factor, this.attempts++);\n    if (this.jitter) {\n        var rand = Math.random();\n        var deviation = Math.floor(rand * this.jitter * ms);\n        ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n    }\n    return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\nBackoff.prototype.reset = function () {\n    this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\nBackoff.prototype.setMin = function (min) {\n    this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\nBackoff.prototype.setMax = function (max) {\n    this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\nBackoff.prototype.setJitter = function (jitter) {\n    this.jitter = jitter;\n};\n","import { Socket as Engine, installTimerFunctions, nextTick, } from \"engine.io-client\";\nimport { Socket } from \"./socket.js\";\nimport * as parser from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Backoff } from \"./contrib/backo2.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\nexport class Manager extends Emitter {\n    constructor(uri, opts) {\n        var _a;\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        installTimerFunctions(this, opts);\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n        this.backoff = new Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        if (!v) {\n            this.skipReconnect = true;\n        }\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        this.engine = new Engine(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        const onError = (err) => {\n            this.cleanup();\n            this._readyState = \"closed\";\n            this.emitReserved(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                this.maybeReconnectOnOpen();\n            }\n        };\n        // emit `error`\n        const errorSub = on(socket, \"error\", onError);\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            // set timer\n            const timer = this.setTimeoutFn(() => {\n                openSubDestroy();\n                onError(new Error(\"timeout\"));\n                socket.close();\n            }, timeout);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        this.emitReserved(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on(socket, \"ping\", this.onping.bind(this)), on(socket, \"data\", this.ondata.bind(this)), on(socket, \"error\", this.onerror.bind(this)), on(socket, \"close\", this.onclose.bind(this)), \n        // @ts-ignore\n        on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        this.emitReserved(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        try {\n            this.decoder.add(data);\n        }\n        catch (e) {\n            this.onclose(\"parse error\", e);\n        }\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        // the nextTick call prevents an exception in a user-provided event listener from triggering a disconnection due to a \"parse error\"\n        nextTick(() => {\n            this.emitReserved(\"packet\", packet);\n        }, this.setTimeoutFn);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        this.emitReserved(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        else if (this._autoConnect && !socket.active) {\n            socket.connect();\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        this.onclose(\"forced close\");\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called when:\n     *\n     * - the low-level engine is closed\n     * - the parser encountered a badly formatted packet\n     * - all sockets are disconnected\n     *\n     * @private\n     */\n    onclose(reason, description) {\n        var _a;\n        this.cleanup();\n        (_a = this.engine) === null || _a === void 0 ? void 0 : _a.close();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        this.emitReserved(\"close\", reason, description);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            this.backoff.reset();\n            this.emitReserved(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            this._reconnecting = true;\n            const timer = this.setTimeoutFn(() => {\n                if (self.skipReconnect)\n                    return;\n                this.emitReserved(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        self._reconnecting = false;\n                        self.reconnect();\n                        this.emitReserved(\"reconnect_error\", err);\n                    }\n                    else {\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        this.emitReserved(\"reconnect\", attempt);\n    }\n}\n","import { url } from \"./url.js\";\nimport { Manager } from \"./manager.js\";\nimport { Socket } from \"./socket.js\";\n/**\n * Managers cache.\n */\nconst cache = {};\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url(uri, opts.path || \"/socket.io\");\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        io = new Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            cache[id] = new Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n}\n// so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n// namespace (e.g. `io.connect(...)`), for backward compatibility\nObject.assign(lookup, {\n    Manager,\n    Socket,\n    io: lookup,\n    connect: lookup,\n});\n/**\n * Protocol version.\n *\n * @public\n */\nexport { protocol } from \"socket.io-parser\";\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\nexport { Manager, Socket, lookup as io, lookup as connect, lookup as default, };\nexport { Fetch, NodeXHR, XHR, NodeWebSocket, WebSocket, WebTransport, } from \"engine.io-client\";\n","import { parse } from \"engine.io-client\";\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nexport function url(uri, path = \"\", loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        obj = parse(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\n","import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport io from 'socket.io-client';\n\nconst AdminPanel = () => {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [password, setPassword] = useState('');\n  const [visits, setVisits] = useState([]);\n  const [filteredVisits, setFilteredVisits] = useState([]);\n  const [socket, setSocket] = useState(null);\n  const [error, setError] = useState('');\n  const [filters, setFilters] = useState({\n    type: 'all',\n    searchTerm: '',\n    dateRange: 'all'\n  });\n  const [loading, setLoading] = useState(false);\n  const [connectionStatus, setConnectionStatus] = useState('disconnected');\n  const [lastUpdate, setLastUpdate] = useState(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // Clean up socket connection on unmount\n    return () => {\n      if (socket) {\n        socket.disconnect();\n      }\n    };\n  }, [socket]);\n\n  // Apply filters to visits\n  useEffect(() => {\n    let filtered = [...visits];\n    \n    // Filter by type\n    if (filters.type !== 'all') {\n      filtered = filtered.filter(visit => visit.type === filters.type);\n    }\n    \n    // Filter by date range\n    const now = new Date();\n    const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n    const week = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000);\n    const month = new Date(today.getFullYear(), today.getMonth(), 1);\n    \n    if (filters.dateRange !== 'all') {\n      filtered = filtered.filter(visit => {\n        const visitDate = new Date(visit.timestamp);\n        switch (filters.dateRange) {\n          case 'today':\n            return visitDate >= today;\n          case 'week':\n            return visitDate >= week;\n          case 'month':\n            return visitDate >= month;\n          default:\n            return true;\n        }\n      });\n    }\n    \n    // Filter by search term\n    if (filters.searchTerm) {\n      const searchLower = filters.searchTerm.toLowerCase();\n      filtered = filtered.filter(visit => {\n        const searchableFields = [\n          visit.ip,\n          visit.location?.city,\n          visit.location?.country,\n          visit.personalInfo?.firstName,\n          visit.personalInfo?.lastName,\n          visit.personalInfo?.email,\n          visit.contactInfo?.phone,\n          visit.ua_parsed?.browser?.name,\n          visit.ua_parsed?.os?.name\n        ].filter(Boolean).map(field => field.toLowerCase());\n        \n        return searchableFields.some(field => field.includes(searchLower));\n      });\n    }\n    \n    setFilteredVisits(filtered);\n  }, [visits, filters]);\n\n  const handleLogin = async () => {\n    try {\n      setError(''); // Clear any previous errors\n      \n      if (!password.trim()) {\n        setError('Password is required');\n        return;\n      }\n\n      // Create socket connection with auth\n      if (socket) {\n        socket.close(); // Close any existing connection\n      }\n      \n      // Connect to admin namespace using relative path\n      const socketInstance = io('/admin', {\n        auth: { token: password },\n        reconnection: true,\n        reconnectionAttempts: 5,\n        reconnectionDelay: 1000,\n        reconnectionDelayMax: 5000,\n        timeout: 10000,\n        transports: ['websocket', 'polling'],\n        autoConnect: true,\n        forceNew: true\n      });\n\n      // Handle connection events\n      socketInstance.on('connect', () => {\n        console.log('Socket connected');\n        setIsAuthenticated(true);\n        setSocket(socketInstance);\n        fetchVisits();\n      });\n\n      socketInstance.on('connect_error', (err) => {\n        console.error('Socket connection error:', err);\n        const errorMessage = err.message === 'Authentication failed' \n          ? 'Invalid password' \n          : err.message.includes('Too many authentication attempts')\n          ? 'Too many attempts. Please try again later.'\n          : 'Failed to connect to server. Please try again.';\n        setError(errorMessage);\n        socketInstance.close();\n      });\n\n      socketInstance.on('disconnect', (reason) => {\n        console.log('Socket disconnected:', reason);\n        if (reason === 'io server disconnect') {\n          setError('Disconnected by server');\n          setIsAuthenticated(false);\n        }\n      });\n\n      socketInstance.on('error', (error) => {\n        console.error('Socket error:', error);\n        setError('Connection error: ' + error.message);\n      });\n\n      socketInstance.on('visit', (newVisit) => {\n        console.log('New visit received:', newVisit);\n        setVisits(prev => {\n          // Prevent duplicate entries\n          const existingIndex = prev.findIndex(v => v.timestamp === newVisit.timestamp);\n          if (existingIndex >= 0) {\n            const updated = [...prev];\n            updated[existingIndex] = newVisit;\n            return updated;\n          }\n          return [newVisit, ...prev];\n        });\n      });\n\n      socketInstance.on('reconnect', (attempt) => {\n        console.log(`Reconnected after ${attempt} attempts`);\n        // Refetch data to ensure we didn't miss anything\n        fetchVisits();\n      });\n\n      socketInstance.on('reconnect_error', (error) => {\n        console.error('Reconnection error:', error);\n        setError('Connection lost. Attempting to reconnect...');\n      });\n\n      socketInstance.on('reconnect_failed', () => {\n        console.error('Failed to reconnect');\n        setError('Connection lost. Please refresh the page.');\n      });\n\n      // Handle connection timeout\n      const timeoutId = setTimeout(() => {\n        if (!socketInstance.connected) {\n          socketInstance.close();\n          setError('Connection timeout. Please try again.');\n        }\n      }, 10000);\n\n      // Clean up timeout on successful connection\n      socketInstance.on('connect', () => {\n        clearTimeout(timeoutId);\n      });\n\n    } catch (err) {\n      console.error('Login error:', err);\n      setError('An unexpected error occurred: ' + err.message);\n    }\n  };\n\n  const fetchVisits = async () => {\n    try {\n      const apiBase = import.meta.env.VITE_API_URL || 'http://localhost:3959';\n      const response = await fetch(`${apiBase}/api/clicks`);\n      \n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      \n      const data = await response.json();\n      \n      if (!Array.isArray(data)) {\n        throw new Error('Invalid data format received from server');\n      }\n      \n      // Sort visits by timestamp in descending order\n      const sortedVisits = data.sort((a, b) => \n        new Date(b.timestamp) - new Date(a.timestamp)\n      );\n      \n      setVisits(sortedVisits);\n    } catch (err) {\n      console.error('Error fetching visits:', err);\n      setError('Failed to load visit data: ' + err.message);\n    }\n  };\n\n  if (!isAuthenticated) {\n    return (\n      <div className=\"min-h-screen bg-gray-100 flex items-center justify-center px-4\">\n        <div className=\"max-w-md w-full space-y-8 bg-white p-8 rounded-xl shadow-lg\">\n          <div>\n            <h2 className=\"text-3xl font-bold text-blue-800 text-center\">Admin Login</h2>\n            {error && <p className=\"text-red-500 text-center mt-2\">{error}</p>}\n          </div>\n          <div className=\"space-y-4\">\n            <input\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              placeholder=\"Admin Password\"\n              className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400\"\n            />\n            <button\n              onClick={handleLogin}\n              className=\"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition duration-300\"\n            >\n              Login\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 p-4\">\n      <div className=\"max-w-7xl mx-auto\">\n        <div className=\"bg-white rounded-xl shadow-lg p-6\">\n          <div className=\"space-y-4 mb-6\">\n            <div className=\"flex justify-between items-center\">\n              <h1 className=\"text-2xl font-bold text-blue-800\">Admin Dashboard</h1>\n              <button\n                onClick={() => {\n                  socket?.disconnect();\n                  setIsAuthenticated(false);\n                  navigate('/');\n                }}\n                className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\"\n              >\n                Logout\n              </button>\n            </div>\n            \n            <div className=\"flex gap-4 flex-wrap\">\n              <select\n                value={filters.type}\n                onChange={(e) => setFilters(prev => ({ ...prev, type: e.target.value }))}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400\"\n              >\n                <option value=\"all\">All Records</option>\n                <option value=\"form_submission\">Form Submissions</option>\n                <option value=\"page_visit\">Page Visits</option>\n              </select>\n              \n              <select\n                value={filters.dateRange}\n                onChange={(e) => setFilters(prev => ({ ...prev, dateRange: e.target.value }))}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400\"\n              >\n                <option value=\"all\">All Time</option>\n                <option value=\"today\">Today</option>\n                <option value=\"week\">This Week</option>\n                <option value=\"month\">This Month</option>\n              </select>\n              \n              <input\n                type=\"text\"\n                placeholder=\"Search IP, location, or details...\"\n                value={filters.searchTerm}\n                onChange={(e) => setFilters(prev => ({ ...prev, searchTerm: e.target.value }))}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 min-w-[300px]\"\n              />\n              \n              <div className=\"flex items-center gap-2 ml-auto\">\n                <div className=\"text-sm text-gray-500\">\n                  Showing {filteredVisits.length} of {visits.length} records\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Time</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Type</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">IP</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Location</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Details</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Risk Score</th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {filteredVisits.map((visit, index) => (\n                  <tr key={index} className={`hover:bg-gray-50 ${visit.type === 'form_submission' ? 'bg-blue-50' : ''}`}>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                      {new Date(visit.timestamp).toLocaleString()}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                      <span className={`px-2 py-1 text-xs font-semibold rounded-full\n                        ${visit.type === 'form_submission' ? 'bg-blue-100 text-blue-800' : 'bg-gray-100 text-gray-800'}`}>\n                        {visit.type === 'form_submission' ? 'Form' : 'Visit'}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                      {visit.ip}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                      {visit.location ? `${visit.location.city}, ${visit.location.country}` : 'Unknown'}\n                    </td>\n                    <td className=\"px-6 py-4 text-sm text-gray-500\">\n                      {visit.type === 'form_submission' ? (\n                        <div>\n                          <p>Name: {visit.personalInfo?.firstName} {visit.personalInfo?.lastName}</p>\n                          <p>Email: {visit.personalInfo?.email}</p>\n                          <p>Phone: {visit.contactInfo?.phone}</p>\n                        </div>\n                      ) : (\n                        <div>\n                          <p>Browser: {visit.ua_parsed?.browser?.name || 'Unknown'}</p>\n                          <p>OS: {visit.ua_parsed?.os?.name || 'Unknown'}</p>\n                          <p>Device: {visit.ua_parsed?.device?.type || 'Desktop'}</p>\n                        </div>\n                      )}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <span className={`px-2 py-1 text-xs font-semibold rounded-full\n                        ${visit.score > 70 ? 'bg-red-100 text-red-800' : 'bg-green-100 text-green-800'}`}>\n                        {visit.score > 70 ? 'High' : 'Low'}\n                      </span>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminPanel;","\n// Constants for retry configuration\nconst MAX_RETRIES = 3;\nconst INITIAL_RETRY_DELAY = 5000;\nconst MAX_QUEUE_SIZE = 100;\n\n// Local storage key for persisting failed logs\nconst QUEUE_STORAGE_KEY = 'analytics_queue';\n\n// Load queue from localStorage if available\nlet logQueue = [];\ntry {\n  const savedQueue = localStorage.getItem(QUEUE_STORAGE_KEY);\n  if (savedQueue) {\n    logQueue = JSON.parse(savedQueue);\n  }\n} catch (e) {\n  console.error('Failed to load analytics queue from storage:', e);\n}\n\n// Save queue to localStorage\nconst saveQueue = () => {\n  try {\n    localStorage.setItem(QUEUE_STORAGE_KEY, JSON.stringify(logQueue));\n  } catch (e) {\n    console.error('Failed to save analytics queue to storage:', e);\n  }\n};\n\nconst flushLogQueue = async () => {\n  if (!navigator.onLine) {\n    return; // Don't attempt to flush if offline\n  }\n\n  while (logQueue.length > 0) {\n    const entry = logQueue[0];\n    if (entry.retries >= MAX_RETRIES) {\n      console.error('Max retries reached for log entry, discarding:', entry);\n      logQueue.shift();\n      saveQueue();\n      continue;\n    }\n\n    try {\n      const response = await fetch('/api/log-visit', entry.options);\n      if (!response.ok) {\n        throw new Error(`Server responded with ${response.status}`);\n      }\n      logQueue.shift();\n      saveQueue();\n    } catch (e) {\n      entry.retries = (entry.retries || 0) + 1;\n      entry.lastError = e.message;\n      entry.lastAttempt = new Date().toISOString();\n      saveQueue();\n      \n      // Exponential backoff\n      const delay = INITIAL_RETRY_DELAY * Math.pow(2, entry.retries - 1);\n      setTimeout(flushLogQueue, delay);\n      break;\n    }\n  }\n};\n\nconst getBasePayload = () => ({\n  timestamp: new Date().toISOString(),\n  url: window.location.href,\n  referrer: document.referrer,\n  userAgent: navigator.userAgent,\n  screenResolution: `${window.screen.width}x${window.screen.height}`,\n  viewport: `${window.innerWidth}x${window.innerHeight}`,\n  timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n  languages: navigator.languages ? navigator.languages.join(',') : navigator.language,\n  platform: navigator.platform,\n  online: navigator.onLine,\n  memory: performance?.memory ? {\n    jsHeapSizeLimit: performance.memory.jsHeapSizeLimit,\n    totalJSHeapSize: performance.memory.totalJSHeapSize,\n    usedJSHeapSize: performance.memory.usedJSHeapSize\n  } : undefined,\n  performance: {\n    timing: performance?.timing?.toJSON(),\n    navigation: performance?.navigation?.toJSON()\n  }\n});\n\nconst addToQueue = (options, type = 'unknown') => {\n  if (logQueue.length >= MAX_QUEUE_SIZE) {\n    logQueue.shift(); // Remove oldest entry if queue is full\n  }\n  logQueue.push({\n    options,\n    retries: 0,\n    type,\n    queuedAt: new Date().toISOString()\n  });\n  saveQueue();\n  setTimeout(flushLogQueue, INITIAL_RETRY_DELAY);\n};\n\nconst logError = async (error, context = {}) => {\n  const payload = {\n    ...getBasePayload(),\n    type: 'error',\n    error: error?.message || String(error),\n    stack: error?.stack || null,\n    errorType: error?.constructor?.name,\n    context: {\n      ...context,\n      lastAction: window._lastUserAction,\n      currentFormStep: window._currentFormStep,\n      formData: window._formData ? { ...window._formData, sensitive: '[REDACTED]' } : undefined\n    }\n  };\n  const options = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(payload)\n  };\n  try {\n    await fetch('/api/log-visit', options);\n    flushLogQueue();\n  } catch (e) {\n    logQueue.push({ options });\n    setTimeout(flushLogQueue, 5000); // Retry after delay\n    console.error('Failed to log error, queued for retry:', e);\n  }\n};\n\nconst logPageView = async (additionalData = {}) => {\n  const performanceData = performance?.getEntriesByType('navigation')[0];\n  const paintTimings = performance?.getEntriesByType('paint');\n  \n  const payload = {\n    ...getBasePayload(),\n    type: 'page_view',\n    performance: {\n      ...getBasePayload().performance,\n      loadTime: performanceData?.loadEventEnd - performanceData?.startTime,\n      domContentLoaded: performanceData?.domContentLoadedEventEnd - performanceData?.startTime,\n      firstPaint: paintTimings?.find(t => t.name === 'first-paint')?.startTime,\n      firstContentfulPaint: paintTimings?.find(t => t.name === 'first-contentful-paint')?.startTime,\n    },\n    connection: navigator.connection ? {\n      effectiveType: navigator.connection.effectiveType,\n      rtt: navigator.connection.rtt,\n      downlink: navigator.connection.downlink,\n      saveData: navigator.connection.saveData\n    } : undefined,\n    ...additionalData\n  };\n  const options = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(payload)\n  };\n  try {\n    await fetch('/api/log-visit', options);\n    flushLogQueue();\n  } catch (e) {\n    logQueue.push({ options });\n    setTimeout(flushLogQueue, 5000);\n    console.error('Failed to log page view, queued for retry:', e);\n  }\n};\n\nconst logAction = async (action, data = {}) => {\n  // Store last user action globally for error context\n  window._lastUserAction = {\n    action,\n    timestamp: new Date().toISOString()\n  };\n  \n  const payload = {\n    ...getBasePayload(),\n    type: 'user_action',\n    action,\n    data: {\n      ...data,\n      sensitive: '[REDACTED]' // Ensure sensitive data is not logged\n    },\n    timing: {\n      navigationStart: performance.timing.navigationStart,\n      actionTime: performance.now()\n    }\n  };\n  const options = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(payload)\n  };\n  try {\n    await fetch('/api/log-visit', options);\n    flushLogQueue();\n  } catch (e) {\n    logQueue.push({ options });\n    setTimeout(flushLogQueue, 5000);\n    console.error('Failed to log action, queued for retry:', e);\n  }\n};\n\nexport { logError, logPageView, logAction };","import { useEffect } from 'react';\nimport { Routes, Route, useLocation } from 'react-router-dom';\nimport LandingPage from './pages/LandingPage';\nimport MultiStepForm from './pages/MultiStepForm';\nimport AdminPanel from './pages/AdminPanel';\nimport ErrorBoundary from './components/ErrorBoundary';\nimport { logPageView, logError } from './utils/analytics';\nimport './index.css';\nimport { getLocalIPs } from './utils/webrtcDetect';\n\nfunction getVisitorPayload(localIPs = []) {\n  return {\n    userAgent: navigator.userAgent,\n    os: window.navigator.platform,\n    deviceType: /mobile|android|touch|iphone|ipad/i.test(navigator.userAgent) ? 'mobile' : 'desktop',\n    screenResolution: `${window.screen.width}x${window.screen.height}`,\n    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n    languages: navigator.languages ? navigator.languages.join(',') : navigator.language,\n    referrer: document.referrer,\n    latency: null, // will be set below\n    webrtcIPs: localIPs,\n    timestamp: new Date().toISOString()\n  };\n}\n\nasync function pingBackend() {\n  const start = performance.now();\n  try {\n    await fetch('/api/log-visit', { method: 'OPTIONS' });\n  } catch {}\n  return Math.round(performance.now() - start);\n}\n\nfunction App() {\n  const location = useLocation();\n\n  useEffect(() => {\n    document.title = 'Somatic Form';\n    \n    // Load phone input styles dynamically\n    const link = document.createElement('link');\n    link.rel = 'stylesheet';\n    link.href = 'https://unpkg.com/react-phone-number-input@3.2.11/style.css';\n    document.head.appendChild(link);\n    \n    return () => {\n      document.head.removeChild(link);\n    };\n    \n    // Log page view when route changes\n    logPageView(location.pathname);\n\n    // Set up global error handler\n    const originalConsoleError = console.error;\n    console.error = (...args) => {\n      logError(args.join(' '));\n      originalConsoleError.apply(console, args);\n    };\n\n    return () => {\n      console.error = originalConsoleError;\n    };\n  }, [location.pathname]);\n  return (\n    <ErrorBoundary>\n      <Routes>\n        <Route path=\"/\" element={<LandingPage />} />\n        <Route path=\"/form\" element={<MultiStepForm />} />\n        <Route path=\"/admin\" element={<AdminPanel />} />\n      </Routes>\n    </ErrorBoundary>\n  );\n}\n\nexport default App;","import React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.createRoot(document.getElementById('root')).render(\n  <React.StrictMode>\n    <Router>\n      <App />\n    </Router>\n  </React.StrictMode>,\n)\n\n// Start the background queue processor for pending submissions\ntry {\n  startSubmissionQueue({ intervalMs: 30000 });\n  // expose for debug in browser console\n  window.__somatic_queue = {\n    queuedCount: () => import('./utils/submitQueue').then(m => m.queuedCount()),\n    clear: () => import('./utils/submitQueue').then(m => m._clearQueue())\n  };\n} catch (e) {\n  // non-fatal\n  console.debug('Failed to start submission queue', e);\n}"],"file":"assets/index-C_7n6_ZT.js"}